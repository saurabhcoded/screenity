"use strict";self.webpackHotUpdatescreenity(451,{3511:(t,e,n)=>{n.d(e,{Z:()=>Bl});n(6401),n(2736);var r=n(7294),o=n.t(r,2),i=n(1132),a=n(4972);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function c(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */c=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function d(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{d({},"")}catch(t){d=function(t,e,n){return t[e]=n}}function f(t,e,n,r){var i=e&&e.prototype instanceof b?e:b,a=Object.create(i.prototype),s=new R(r||[]);return o(a,"_invoke",{value:A(t,n,s)}),a}function h(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=f;var m="suspendedStart",p="suspendedYield",v="executing",g="completed",y={};function b(){}function w(){}function E(){}var S={};d(S,a,(function(){return this}));var x=Object.getPrototypeOf,O=x&&x(x(k([])));O&&O!==n&&r.call(O,a)&&(S=O);var C=E.prototype=b.prototype=Object.create(S);function N(t){["next","throw","return"].forEach((function(e){d(t,e,(function(t){return this._invoke(e,t)}))}))}function M(t,e){function n(o,i,a,c){var l=h(t[o],t,i);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==s(d)&&r.call(d,"__await")?e.resolve(d.__await).then((function(t){n("next",t,a,c)}),(function(t){n("throw",t,a,c)})):e.resolve(d).then((function(t){u.value=t,a(u)}),(function(t){return n("throw",t,a,c)}))}c(l.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function A(e,n,r){var o=m;return function(i,a){if(o===v)throw new Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=P(s,r);if(c){if(c===y)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===m)throw o=g,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=v;var l=h(e,n,r);if("normal"===l.type){if(o=r.done?g:p,l.arg===y)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=g,r.method="throw",r.arg=l.arg)}}}function P(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,P(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var i=h(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,y;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function j(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function R(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function k(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(s(e)+" is not iterable")}return w.prototype=E,o(C,"constructor",{value:E,configurable:!0}),o(E,"constructor",{value:w,configurable:!0}),w.displayName=d(E,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,E):(t.__proto__=E,d(t,u,"GeneratorFunction")),t.prototype=Object.create(C),t},e.awrap=function(t){return{__await:t}},N(M.prototype),d(M.prototype,l,(function(){return this})),e.AsyncIterator=M,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new M(f(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},N(C),d(C,u,"Generator"),d(C,a,(function(){return this})),d(C,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=k,R.prototype={constructor:R,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(j),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),y},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),j(n),y}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;j(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:k(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),y}},e}function l(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function f(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===s(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return m(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const p=function(){var t=h((0,r.useContext)(a.b),2),e=t[0],n=t[1],o=function(){var t,r=(t=c().mark((function t(){return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.handleReencode();case 2:n((function(t){return d(d({},t),{},{mode:"player",start:0,end:1})}));case 3:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){l(i,r,o,a,s,"next",t)}function s(t){l(i,r,o,a,s,"throw",t)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return r.createElement("div",{className:i.Z.editorNav},r.createElement("div",{className:i.Z.navWrap},r.createElement("div",{className:i.Z.editorNavLeft,onClick:function(){chrome.runtime.sendMessage({type:"open-home"})}},r.createElement("img",{src:"/assets/editor/logo.svg",alt:"Logo"})),r.createElement("div",{className:i.Z.editorNavCenter},r.createElement("div",{className:i.Z.editorNavTitle},chrome.i18n.getMessage("sandboxEditorMainTitle")," ",r.createElement("span",{className:i.Z.beta},"BETA"))),r.createElement("div",{className:i.Z.editorNavRight},r.createElement("button",{className:"button simpleButton blackButton",onClick:function(){n((function(t){return d(d({},t),{},{mode:"player",blob:e.originalBlob,start:0,end:1})}))},disabled:e.isFfmpegRunning},chrome.i18n.getMessage("sandboxEditorCancelButton")),r.createElement("button",{className:"button secondaryButton",onClick:function(){n((function(t){return d(d({},t),{},{blob:e.originalBlob,start:0,end:1})}))},disabled:e.isFfmpegRunning},chrome.i18n.getMessage("sandboxEditorRevertButton")),r.createElement("button",{className:"button primaryButton",onClick:o,disabled:e.isFfmpegRunning},e.reencoding?chrome.i18n.getMessage("sandboxEditorSaveProgressButton"):chrome.i18n.getMessage("sandboxEditorSaveButton")))))};var v=n(5893),g=n(1443),y=n.n(g),b=n(5697),w=n.n(b);const E=(t,e)=>{const n=new(y())(".plyr-react",e.options||{});return e.source&&(n.source=e.source),n},S=t=>{t&&t.destroy()},x=()=>{},O=t=>t?()=>({plyr:t}):()=>new Proxy({plyr:{source:null}},{get:(t,e)=>"plyr"===e?t[e]:x});function C(t,e,n=null){return function(t,e,n=[]){const[o,i]=(0,r.useState)(null),a=(0,r.useRef)(null),{instantiate:s,destroy:c,getAPI:l,params:u}=e;(0,r.useEffect)((()=>{const t=s(a.current,u);return i(t),()=>{c&&c(t,u)}}),n);const d=(0,r.useMemo)((()=>l(o,u)),[o]);return(0,r.useImperativeHandle)(t,d,[d]),a}(t,{instantiate:E,getAPI:O,destroy:S,params:e},n||[e.options,e.source])}const N=r.forwardRef(((t,e)=>{const{source:n,options:r=null,...o}=t,i=C(e,{source:n,options:r});return(0,v.jsx)("video",{ref:i,className:"plyr-react plyr",...o})}));function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function L(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==M(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===M(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function j(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return R(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}N.displayName="Plyr",N.defaultProps={options:{controls:["rewind","play","fast-forward","progress","current-time","duration","mute","volume","settings","fullscreen"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop"}},source:{type:"video",sources:[{src:"https://cdn.plyr.io/static/blank.mp4",type:"video/mp4",size:720},{src:"https://cdn.plyr.io/static/blank.mp4",type:"video/mp4",size:1080}]}},N.propTypes={options:w().object,source:w().any};const k=function(t){var e=j((0,r.useContext)(a.b),2),n=e[0],o=e[1],i=(0,r.useRef)(null),s=j((0,r.useState)(null),2),c=s[0],l=s[1],u=j((0,r.useState)(null),2),d=u[0],f=u[1],h=j((0,r.useState)(!1),2),m=h[0],p=h[1];(0,r.useEffect)((function(){i.current&&i.current.plyr&&n.updatePlayerTime&&(i.current.plyr.currentTime=n.time)}),[n.time]);var v=(0,r.useMemo)((function(){return{controls:["play","mute","captions","settings","pip","fullscreen"],ratio:"16:9",blankVideo:"chrome-extension://"+chrome.i18n.getMessage("@@extension_id")+"/assets/blank.mp4",keyboard:{global:!0}}}),[]);(0,r.useEffect)((function(){if(n.blob){var t=URL.createObjectURL(n.blob);return f({type:"video",sources:[{src:t,type:"video/mp4"}]}),l(t),function(){URL.revokeObjectURL(t)}}}),[n.blob,i]),(0,r.useEffect)((function(){return i.current&&i.current.plyr&&i.current.plyr.on("timeupdate",(function(){o((function(t){return P(P({},t),{},{time:i.current.plyr.currentTime,updatePlayerTime:!1})}))})),function(){i.current&&i.current.plyr&&i.current.plyr.off("timeupdate")}}),[i]);return(0,r.useEffect)((function(){if(!m){var t=function(t){i.current&&i.current.plyr&&(p(!0),i.current.plyr.on("timeupdate",(function(){o((function(t){return P(P({},t),{},{time:i.current.plyr.currentTime,updatePlayerTime:!1})}))})))};return window.addEventListener("keydown",t),function(){window.removeEventListener("keydown",t)}}}),[m]),r.createElement("div",{className:"videoPlayer"},r.createElement("div",{className:"playerWrap",onClick:function(){m||i.current&&i.current.plyr&&(p(!0),i.current.plyr.on("timeupdate",(function(){o((function(t){return P(P({},t),{},{time:i.current.plyr.currentTime,updatePlayerTime:!1})}))})))}},c&&r.createElement(N,{ref:i,id:"plyr-player",source:d,options:v})),r.createElement("style",null,"\n\t\t\t\t\t.plyr {\n\t\t\t\t\t\theight: 90%!important;\n\t\t\t\t\t}\n\t\t\t\t\t@media (max-width: 900px) {\n\t\t\t\t\t\t.videoPlayer {\n\t\t\t\t\t\t\theight: 100%!important;\n\t\t\t\t\t\t\ttop: 40px!important;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t.playerWrap {\n\t\t\t\t\t\t\theight: calc(100% - 300px)!important;\n\t\t\t\t\t\t}\n\t\t\t\t\t"))};var T=n(9529),D=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))};const I={decode:function(t,e){return D(this,void 0,void 0,(function*(){const n=new AudioContext({sampleRate:e});return n.decodeAudioData(t).finally((()=>n.close()))}))},createBuffer:function(t,e){return"number"==typeof t[0]&&(t=[t]),function(t){const e=t[0];if(e.some((t=>t>1||t<-1))){const n=e.length;let r=0;for(let t=0;t<n;t++){const n=Math.abs(e[t]);n>r&&(r=n)}for(const e of t)for(let t=0;t<n;t++)e[t]/=r}}(t),{duration:e,length:t[0].length,sampleRate:t[0].length/e,numberOfChannels:t.length,getChannelData:e=>null==t?void 0:t[e],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};var _=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))};const W={fetchBlob:function(t,e,n){return _(this,void 0,void 0,(function*(){const r=yield fetch(t,n);return function(t,e){_(this,void 0,void 0,(function*(){if(!t.body||!t.headers)return;const n=t.body.getReader(),r=Number(t.headers.get("Content-Length"))||0;let o=0;const i=t=>_(this,void 0,void 0,(function*(){o+=(null==t?void 0:t.length)||0;const n=Math.round(o/r*100);e(n)})),a=()=>_(this,void 0,void 0,(function*(){let t;try{t=yield n.read()}catch(t){return}t.done||(i(t.value),yield a())}));a()}))}(r.clone(),e),r.blob()}))}};const Z=class{constructor(){this.listeners={},this.on=this.addEventListener,this.un=this.removeEventListener}addEventListener(t,e,n){if(this.listeners[t]||(this.listeners[t]=new Set),this.listeners[t].add(e),null==n?void 0:n.once){const n=()=>{this.removeEventListener(t,n),this.removeEventListener(t,e)};return this.addEventListener(t,n),n}return()=>this.removeEventListener(t,e)}removeEventListener(t,e){var n;null===(n=this.listeners[t])||void 0===n||n.delete(e)}once(t,e){return this.on(t,e,{once:!0})}unAll(){this.listeners={}}emit(t,...e){this.listeners[t]&&this.listeners[t].forEach((t=>t(...e)))}};const z=class extends Z{constructor(t){super(),this.isExternalMedia=!1,t.media?(this.media=t.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),t.mediaControls&&(this.media.controls=!0),t.autoplay&&(this.media.autoplay=!0),null!=t.playbackRate&&this.onceMediaEvent("canplay",(()=>{null!=t.playbackRate&&(this.media.playbackRate=t.playbackRate)}))}onMediaEvent(t,e,n){return this.media.addEventListener(t,e,n),()=>this.media.removeEventListener(t,e)}onceMediaEvent(t,e){return this.onMediaEvent(t,e,{once:!0})}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const t=this.getSrc();t.startsWith("blob:")&&URL.revokeObjectURL(t)}setSrc(t,e){if(this.getSrc()===t)return;this.revokeSrc();const n=e instanceof Blob?URL.createObjectURL(e):t;this.media.src=n,this.media.load()}destroy(){this.media.pause(),this.isExternalMedia||(this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(t){this.media=t}play(){return this.media.play()}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(t){this.media.currentTime=t}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(t){this.media.volume=t}getMuted(){return this.media.muted}setMuted(t){this.media.muted=t}getPlaybackRate(){return this.media.playbackRate}setPlaybackRate(t,e){null!=e&&(this.media.preservesPitch=e),this.media.playbackRate=t}getMediaElement(){return this.media}setSinkId(t){return this.media.setSinkId(t)}};class B extends Z{constructor(t,e){super(),this.timeouts=[],this.isScrolling=!1,this.audioData=null,this.resizeObserver=null,this.isDragging=!1,this.options=t;const n=this.parentFromOptionsContainer(t.container);this.parent=n;const[r,o]=this.initHtml();n.appendChild(r),this.container=r,this.scrollContainer=o.querySelector(".scroll"),this.wrapper=o.querySelector(".wrapper"),this.canvasWrapper=o.querySelector(".canvases"),this.progressWrapper=o.querySelector(".progress"),this.cursor=o.querySelector(".cursor"),e&&o.appendChild(e),this.initEvents()}parentFromOptionsContainer(t){let e;if("string"==typeof t?e=document.querySelector(t):t instanceof HTMLElement&&(e=t),!e)throw new Error("Container not found");return e}initEvents(){const t=t=>{const e=this.wrapper.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientX-e.left;return[n/e.width,r/e.height]};this.wrapper.addEventListener("click",(e=>{const[n,r]=t(e);this.emit("click",n,r)})),this.wrapper.addEventListener("dblclick",(e=>{const[n,r]=t(e);this.emit("dblclick",n,r)})),this.options.dragToSeek&&this.initDrag(),this.scrollContainer.addEventListener("scroll",(()=>{const{scrollLeft:t,scrollWidth:e,clientWidth:n}=this.scrollContainer,r=t/e,o=(t+n)/e;this.emit("scroll",r,o)}));const e=this.createDelay(100);this.resizeObserver=new ResizeObserver((()=>{e((()=>this.reRender()))})),this.resizeObserver.observe(this.scrollContainer)}initDrag(){!function(t,e,n,r,o=5){let i=()=>{};if(!t)return i;const a=a=>{if(2===a.button)return;a.preventDefault(),a.stopPropagation(),t.style.touchAction="none";let s=a.clientX,c=a.clientY,l=!1;const u=r=>{r.preventDefault(),r.stopPropagation();const i=r.clientX,a=r.clientY;if(l||Math.abs(i-s)>=o||Math.abs(a-c)>=o){const{left:r,top:o}=t.getBoundingClientRect();l||(l=!0,null==n||n(s-r,c-o)),e(i-s,a-c,i-r,a-o),s=i,c=a}},d=t=>{l&&(t.preventDefault(),t.stopPropagation())},f=()=>{t.style.touchAction="",l&&(null==r||r()),i()};document.addEventListener("pointermove",u),document.addEventListener("pointerup",f),document.addEventListener("pointerleave",f),document.addEventListener("click",d,!0),i=()=>{document.removeEventListener("pointermove",u),document.removeEventListener("pointerup",f),document.removeEventListener("pointerleave",f),setTimeout((()=>{document.removeEventListener("click",d,!0)}),10)}};t.addEventListener("pointerdown",a)}(this.wrapper,((t,e,n)=>{this.emit("drag",Math.max(0,Math.min(1,n/this.wrapper.getBoundingClientRect().width)))}),(()=>this.isDragging=!0),(()=>this.isDragging=!1))}getHeight(){return null==this.options.height?128:isNaN(Number(this.options.height))?"auto"===this.options.height&&this.parent.clientHeight||128:Number(this.options.height)}initHtml(){const t=document.createElement("div"),e=t.attachShadow({mode:"open"});return e.innerHTML=`\n      <style>\n        :host {\n          user-select: none;\n          min-width: 1px;\n        }\n        :host audio {\n          display: block;\n          width: 100%;\n        }\n        :host .scroll {\n          overflow-x: auto;\n          overflow-y: hidden;\n          width: 100%;\n          position: relative;\n        }\n        :host .noScrollbar {\n          scrollbar-color: transparent;\n          scrollbar-width: none;\n        }\n        :host .noScrollbar::-webkit-scrollbar {\n          display: none;\n          -webkit-appearance: none;\n        }\n        :host .wrapper {\n          position: relative;\n          overflow: visible;\n          z-index: 2;\n        }\n        :host .canvases {\n          min-height: ${this.getHeight()}px;\n        }\n        :host .canvases > div {\n          position: relative;\n        }\n        :host canvas {\n          display: block;\n          position: absolute;\n          top: 0;\n          image-rendering: pixelated;\n        }\n        :host .progress {\n          pointer-events: none;\n          position: absolute;\n          z-index: 2;\n          top: 0;\n          left: 0;\n          width: 0;\n          height: 100%;\n          overflow: hidden;\n        }\n        :host .progress > div {\n          position: relative;\n        }\n        :host .cursor {\n          pointer-events: none;\n          position: absolute;\n          z-index: 5;\n          top: 0;\n          left: 0;\n          height: 100%;\n          border-radius: 2px;\n        }\n      </style>\n\n      <div class="scroll" part="scroll">\n        <div class="wrapper" part="wrapper">\n          <div class="canvases"></div>\n          <div class="progress" part="progress"></div>\n          <div class="cursor" part="cursor"></div>\n        </div>\n      </div>\n    `,[t,e]}setOptions(t){if(this.options.container!==t.container){const e=this.parentFromOptionsContainer(t.container);e.appendChild(this.container),this.parent=e}t.dragToSeek&&!this.options.dragToSeek&&this.initDrag(),this.options=t,this.reRender()}getWrapper(){return this.wrapper}getScroll(){return this.scrollContainer.scrollLeft}destroy(){var t;this.container.remove(),null===(t=this.resizeObserver)||void 0===t||t.disconnect()}createDelay(t=10){const e={};return this.timeouts.push(e),n=>{e.timeout&&clearTimeout(e.timeout),e.timeout=setTimeout(n,t)}}convertColorValues(t){if(!Array.isArray(t))return t||"";if(t.length<2)return t[0]||"";const e=document.createElement("canvas"),n=e.getContext("2d").createLinearGradient(0,0,0,e.height),r=1/(t.length-1);return t.forEach(((t,e)=>{const o=e*r;n.addColorStop(o,t)})),n}renderBarWaveform(t,e,n,r){const o=t[0],i=t[1]||t[0],a=o.length,{width:s,height:c}=n.canvas,l=c/2,u=window.devicePixelRatio||1,d=e.barWidth?e.barWidth*u:1,f=e.barGap?e.barGap*u:e.barWidth?d/2:0,h=e.barRadius||0,m=s/(d+f)/a,p=h&&"roundRect"in n?"roundRect":"rect";n.beginPath();let v=0,g=0,y=0;for(let t=0;t<=a;t++){const a=Math.round(t*m);if(a>v){const t=Math.round(g*l*r),o=t+Math.round(y*l*r)||1;let i=l-t;"top"===e.barAlign?i=0:"bottom"===e.barAlign&&(i=c-o),n[p](v*(d+f),i,d,o,h),v=a,g=0,y=0}const s=Math.abs(o[t]||0),u=Math.abs(i[t]||0);s>g&&(g=s),u>y&&(y=u)}n.fill(),n.closePath()}renderLineWaveform(t,e,n,r){const o=e=>{const o=t[e]||t[0],i=o.length,{height:a}=n.canvas,s=a/2,c=n.canvas.width/i;n.moveTo(0,s);let l=0,u=0;for(let t=0;t<=i;t++){const i=Math.round(t*c);if(i>l){const t=s+(Math.round(u*s*r)||1)*(0===e?-1:1);n.lineTo(l,t),l=i,u=0}const a=Math.abs(o[t]||0);a>u&&(u=a)}n.lineTo(l,s)};n.beginPath(),o(0),o(1),n.fill(),n.closePath()}renderWaveform(t,e,n){if(n.fillStyle=this.convertColorValues(e.waveColor),e.renderFunction)return void e.renderFunction(t,n);let r=e.barHeight||1;if(e.normalize){const e=Array.from(t[0]).reduce(((t,e)=>Math.max(t,Math.abs(e))),0);r=e?1/e:1}e.barWidth||e.barGap||e.barAlign?this.renderBarWaveform(t,e,n,r):this.renderLineWaveform(t,e,n,r)}renderSingleCanvas(t,e,n,r,o,i,a,s){const c=window.devicePixelRatio||1,l=document.createElement("canvas"),u=t[0].length;l.width=Math.round(n*(i-o)/u),l.height=r*c,l.style.width=`${Math.floor(l.width/c)}px`,l.style.height=`${r}px`,l.style.left=`${Math.floor(o*n/c/u)}px`,a.appendChild(l);const d=l.getContext("2d");if(this.renderWaveform(t.map((t=>t.slice(o,i))),e,d),l.width>0&&l.height>0){const t=l.cloneNode(),n=t.getContext("2d");n.drawImage(l,0,0),n.globalCompositeOperation="source-in",n.fillStyle=this.convertColorValues(e.progressColor),n.fillRect(0,0,l.width,l.height),s.appendChild(t)}}renderChannel(t,e,n){const r=document.createElement("div"),o=this.getHeight();r.style.height=`${o}px`,this.canvasWrapper.style.minHeight=`${o}px`,this.canvasWrapper.appendChild(r);const i=r.cloneNode();this.progressWrapper.appendChild(i);const{scrollLeft:a,scrollWidth:s,clientWidth:c}=this.scrollContainer,l=t[0].length,u=l/s;let d=Math.min(B.MAX_CANVAS_WIDTH,c);if(e.barWidth||e.barGap){const t=e.barWidth||.5,n=t+(e.barGap||t/2);d%n!=0&&(d=Math.floor(d/n)*n)}const f=Math.floor(Math.abs(a)*u),h=Math.floor(f+d*u),m=h-f,p=(a,s)=>{this.renderSingleCanvas(t,e,n,o,Math.max(0,a),Math.min(s,l),r,i)},v=this.createDelay(),g=this.createDelay(),y=(t,e)=>{p(t,e),t>0&&v((()=>{y(t-m,e-m)}))},b=(t,e)=>{p(t,e),e<l&&g((()=>{b(t+m,e+m)}))};y(f,h),h<l&&b(h,h+m)}render(t){this.timeouts.forEach((t=>t.timeout&&clearTimeout(t.timeout))),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.wrapper.style.width="",null!=this.options.width&&(this.scrollContainer.style.width="number"==typeof this.options.width?`${this.options.width}px`:this.options.width);const e=window.devicePixelRatio||1,n=this.scrollContainer.clientWidth,r=Math.ceil(t.duration*(this.options.minPxPerSec||0));this.isScrolling=r>n;const o=this.options.fillParent&&!this.isScrolling,i=(o?n:r)*e;if(this.wrapper.style.width=o?"100%":`${r}px`,this.scrollContainer.style.overflowX=this.isScrolling?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.options.splitChannels)for(let e=0;e<t.numberOfChannels;e++){const n=Object.assign(Object.assign({},this.options),this.options.splitChannels[e]);this.renderChannel([t.getChannelData(e)],n,i)}else{const e=[t.getChannelData(0)];t.numberOfChannels>1&&e.push(t.getChannelData(1)),this.renderChannel(e,this.options,i)}this.audioData=t,this.emit("render")}reRender(){if(!this.audioData)return;const t=this.progressWrapper.clientWidth;this.render(this.audioData);const e=this.progressWrapper.clientWidth;this.scrollContainer.scrollLeft+=e-t}zoom(t){this.options.minPxPerSec=t,this.reRender()}scrollIntoView(t,e=!1){const{clientWidth:n,scrollLeft:r,scrollWidth:o}=this.scrollContainer,i=o*t,a=n/2;if(i>r+(e&&this.options.autoCenter&&!this.isDragging?a:n)||i<r)if(this.options.autoCenter&&!this.isDragging){const t=a/20;i-(r+a)>=t&&i<r+n?this.scrollContainer.scrollLeft+=t:this.scrollContainer.scrollLeft=i-a}else if(this.isDragging){const t=10;this.scrollContainer.scrollLeft=i<r?i-t:i-n+t}else this.scrollContainer.scrollLeft=i;{const{scrollLeft:t}=this.scrollContainer,e=t/o,r=(t+n)/o;this.emit("scroll",e,r)}}renderProgress(t,e){if(isNaN(t))return;const n=100*t;this.canvasWrapper.style.clipPath=`polygon(${n}% 0, 100% 0, 100% 100%, ${n}% 100%)`,this.progressWrapper.style.width=`${n}%`,this.cursor.style.left=`${n}%`,this.cursor.style.marginLeft=100===Math.round(n)?`-${this.options.cursorWidth}px`:"",this.isScrolling&&this.options.autoScroll&&this.scrollIntoView(t,e)}}B.MAX_CANVAS_WIDTH=4e3;const H=B;const F=class extends Z{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",(()=>{requestAnimationFrame((()=>{this.emit("tick")}))})),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}};var U=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))};const G=class extends Z{constructor(t=new AudioContext){super(),this.bufferNode=null,this.autoplay=!1,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.audioContext=t,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return U(this,void 0,void 0,(function*(){}))}get src(){return this.currentSrc}set src(t){this.currentSrc=t,fetch(t).then((t=>t.arrayBuffer())).then((t=>this.audioContext.decodeAudioData(t))).then((t=>{this.buffer=t,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play()}))}_play(){var t;this.paused&&(this.paused=!1,null===(t=this.bufferNode)||void 0===t||t.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.bufferNode.buffer=this.buffer,this.bufferNode.connect(this.gainNode),this.playedDuration>=this.duration&&(this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,this.playedDuration),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))})}_pause(){var t;this.paused||(this.paused=!0,null===(t=this.bufferNode)||void 0===t||t.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime)}play(){return U(this,void 0,void 0,(function*(){this._play(),this.emit("play")}))}pause(){this._pause(),this.emit("pause")}stopAt(t){var e,n;const r=t-this.currentTime;null===(e=this.bufferNode)||void 0===e||e.stop(this.audioContext.currentTime+r),null===(n=this.bufferNode)||void 0===n||n.addEventListener("ended",(()=>{this.bufferNode=null,this.pause()}),{once:!0})}setSinkId(t){return U(this,void 0,void 0,(function*(){return this.audioContext.setSinkId(t)}))}get playbackRate(){var t,e;return null!==(e=null===(t=this.bufferNode)||void 0===t?void 0:t.playbackRate.value)&&void 0!==e?e:1}set playbackRate(t){this.bufferNode&&(this.bufferNode.playbackRate.value=t)}get currentTime(){return this.paused?this.playedDuration:this.playedDuration+this.audioContext.currentTime-this.playStartTime}set currentTime(t){this.emit("seeking"),this.paused?this.playedDuration=t:(this._pause(),this.playedDuration=t,this._play()),this.emit("timeupdate")}get duration(){var t;return(null===(t=this.buffer)||void 0===t?void 0:t.duration)||0}get volume(){return this.gainNode.gain.value}set volume(t){this.gainNode.gain.value=t,this.emit("volumechange")}get muted(){return this._muted}set muted(t){this._muted!==t&&(this._muted=t,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}getGainNode(){return this.gainNode}};var V=function(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))};const X={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class Y extends z{static create(t){return new Y(t)}constructor(t){const e=t.media||("WebAudio"===t.backend?new G:void 0);super({media:e,mediaControls:t.mediaControls,autoplay:t.autoplay,playbackRate:t.audioRate}),this.plugins=[],this.decodedData=null,this.subscriptions=[],this.mediaSubscriptions=[],this.options=Object.assign({},X,t),this.timer=new F;const n=e?void 0:this.getMediaElement();this.renderer=new H(this.options,n),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const r=this.options.url||this.getSrc()||"";(r||this.options.peaks&&this.options.duration)&&this.load(r,this.options.peaks,this.options.duration)}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",(()=>{const t=this.getCurrentTime();this.renderer.renderProgress(t/this.getDuration(),!0),this.emit("timeupdate",t),this.emit("audioprocess",t)})))}initPlayerEvents(){this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",(()=>{const t=this.getCurrentTime();this.renderer.renderProgress(t/this.getDuration(),this.isPlaying()),this.emit("timeupdate",t)})),this.onMediaEvent("play",(()=>{this.emit("play"),this.timer.start()})),this.onMediaEvent("pause",(()=>{this.emit("pause"),this.timer.stop()})),this.onMediaEvent("emptied",(()=>{this.timer.stop()})),this.onMediaEvent("ended",(()=>{this.emit("finish")})),this.onMediaEvent("seeking",(()=>{this.emit("seeking",this.getCurrentTime())})))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",((t,e)=>{this.options.interact&&(this.seekTo(t),this.emit("interaction",t*this.getDuration()),this.emit("click",t,e))})),this.renderer.on("dblclick",((t,e)=>{this.emit("dblclick",t,e)})),this.renderer.on("scroll",((t,e)=>{const n=this.getDuration();this.emit("scroll",t*n,e*n)})),this.renderer.on("render",(()=>{this.emit("redraw")})));{let t;this.subscriptions.push(this.renderer.on("drag",(e=>{this.options.interact&&(this.renderer.renderProgress(e),clearTimeout(t),t=setTimeout((()=>{this.seekTo(e)}),this.isPlaying()?0:200),this.emit("interaction",e*this.getDuration()),this.emit("drag",e))})))}}initPlugins(){var t;(null===(t=this.options.plugins)||void 0===t?void 0:t.length)&&this.options.plugins.forEach((t=>{this.registerPlugin(t)}))}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach((t=>t())),this.mediaSubscriptions=[]}setOptions(t){this.options=Object.assign({},this.options,t),this.renderer.setOptions(this.options),t.audioRate&&this.setPlaybackRate(t.audioRate),null!=t.mediaControls&&(this.getMediaElement().controls=t.mediaControls)}registerPlugin(t){return t.init(this),this.plugins.push(t),this.subscriptions.push(t.once("destroy",(()=>{this.plugins=this.plugins.filter((e=>e!==t))}))),t}getWrapper(){return this.renderer.getWrapper()}getScroll(){return this.renderer.getScroll()}getActivePlugins(){return this.plugins}loadAudio(t,e,n,r){return V(this,void 0,void 0,(function*(){if(this.emit("load",t),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,!e&&!n){const n=t=>this.emit("loading",t);e=yield W.fetchBlob(t,n,this.options.fetchParams)}this.setSrc(t,e);const o=(yield Promise.resolve(r||this.getDuration()))||(yield new Promise((t=>{this.onceMediaEvent("loadedmetadata",(()=>t(this.getDuration())))})));if(n)this.decodedData=I.createBuffer(n,o||0);else if(e){const t=yield e.arrayBuffer();this.decodedData=yield I.decode(t,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())}))}load(t,e,n){return V(this,void 0,void 0,(function*(){yield this.loadAudio(t,void 0,e,n)}))}loadBlob(t,e,n){return V(this,void 0,void 0,(function*(){yield this.loadAudio("blob",t,e,n)}))}zoom(t){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(t),this.emit("zoom",t)}getDecodedData(){return this.decodedData}exportPeaks({channels:t=2,maxLength:e=8e3,precision:n=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const r=Math.min(t,this.decodedData.numberOfChannels),o=[];for(let t=0;t<r;t++){const r=this.decodedData.getChannelData(t),i=[],a=Math.round(r.length/e);for(let t=0;t<e;t++){const e=r.slice(t*a,(t+1)*a),o=Math.max(...e);i.push(Math.round(o*n)/n)}o.push(i)}return o}getDuration(){let t=super.getDuration()||0;return 0!==t&&t!==1/0||!this.decodedData||(t=this.decodedData.duration),t}toggleInteraction(t){this.options.interact=t}seekTo(t){const e=this.getDuration()*t;this.setTime(e)}playPause(){return V(this,void 0,void 0,(function*(){return this.isPlaying()?this.pause():this.play()}))}stop(){this.pause(),this.setTime(0)}skip(t){this.setTime(this.getCurrentTime()+t)}empty(){this.load("",[[0]],.001)}setMediaElement(t){this.unsubscribePlayerEvents(),super.setMediaElement(t),this.initPlayerEvents()}destroy(){this.emit("destroy"),this.plugins.forEach((t=>t.destroy())),this.subscriptions.forEach((t=>t())),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}const $=Y;var q=n(1868);function K(t){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},K(t)}function Q(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Q=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new L(r||[]);return o(a,"_invoke",{value:N(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",h="suspendedYield",m="executing",p="completed",v={};function g(){}function y(){}function b(){}var w={};l(w,a,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(j([])));S&&S!==n&&r.call(S,a)&&(w=S);var x=b.prototype=g.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function n(o,i,a,s){var c=d(t[o],t,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==K(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(u).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function N(e,n,r){var o=f;return function(i,a){if(o===m)throw new Error("Generator is already running");if(o===p){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=M(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var l=d(e,n,r);if("normal"===l.type){if(o=r.done?p:h,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=p,r.method="throw",r.arg=l.arg)}}}function M(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=d(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function j(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(K(e)+" is not iterable")}return y.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},O(C.prototype),l(C.prototype,s,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new C(u(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=j,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:j(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function J(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function tt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?J(Object(n),!0).forEach((function(e){et(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function et(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==K(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===K(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nt(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function rt(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){nt(i,r,o,a,s,"next",t)}function s(t){nt(i,r,o,a,s,"throw",t)}a(void 0)}))}}function ot(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return it(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return it(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const at=function(t){var e=ot((0,r.useContext)(a.b),2),n=e[0],o=e[1],i=(0,r.useRef)(null),s=(0,r.useRef)(null),c=(0,r.useRef)(null),l=(0,r.useRef)(null),u=ot((0,r.useState)(!1),2),d=u[0],f=u[1],h=(0,r.useRef)(!1);function m(t){return p.apply(this,arguments)}function p(){return(p=rt(Q().mark((function t(e){return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,n){var r=new FileReader;r.onloadend=function(){r.result instanceof ArrayBuffer?t(r.result):n(new Error("Failed to convert Blob to ArrayBuffer"))},r.onerror=n,r.readAsArrayBuffer(e)})));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var v=function(){var t=rt(Q().mark((function t(e){var n;return Q().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i.current=$.create({container:s.current,waveColor:"#C4C5CE",progressColor:"#9596A2",interpolation:"cubic",height:"auto",cursorWidth:0}),t.next=4,m(e);case 4:n=t.sent,i.current.loadBlob(new Blob([n],{type:"audio/wav"})),i.current.on("seeking",(function(t){var e=s.current.getBoundingClientRect().width*(t/i.current.getDuration());c.current.style.left="".concat(e,"px"),o((function(e){return tt(tt({},e),{},{time:t,updatePlayerTime:!0})}))})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error("Error loading waveform:",t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}(),g=function(){h.current||f(!0)},y=function(t){var e=s.current.getBoundingClientRect(),n=t.clientX-e.left;e.width;l.current.style.left="".concat(n,"px")},b=function(){f(!1)},w=function(t){s.current.contains(t.target)||(h.current=!0,f(!1))},E=function(){h.current=!1};return(0,r.useEffect)((function(){if(n.blob){v(n.blob);var t=s.current;return t.addEventListener("mouseover",g),t.addEventListener("mousemove",y),t.addEventListener("mouseleave",b),document.addEventListener("mousedown",w),document.addEventListener("mouseup",E),i.current&&i.current.on("seek",(function(t){var e=s.current.getBoundingClientRect(),n=e.width*t;c.current.style.left="".concat(n+e.left,"px")})),function(){i.current&&i.current.destroy(),t.removeEventListener("mouseenter",g),t.removeEventListener("mousemove",y),t.removeEventListener("mouseleave",b),document.removeEventListener("mousedown",w),document.removeEventListener("mouseup",E)}}}),[n.blob]),(0,r.useEffect)((function(){if(n.blob&&!n.updatePlayerTime&&null!==s.current){var t=document.createElement("video");t.preload="metadata",t.onloadedmetadata=rt(Q().mark((function e(){var r,o;return Q().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=s.current.getBoundingClientRect(),o=r.width*(n.time/t.duration),c.current.style.left="".concat(o,"px"),URL.revokeObjectURL(t.src),t.remove();case 5:case"end":return e.stop()}}),e)}))),t.src=URL.createObjectURL(n.blob)}}),[n.time,n.blob,s.current]),r.createElement("div",{style:{height:"100%"}},r.createElement("div",{className:q.Z.cursor,ref:c}),r.createElement("div",{className:q.Z.ghostCursor,style:d?{opacity:1}:{opacity:0},ref:l}),r.createElement("div",{className:q.Z.waveform,ref:s}))};function st(t){return st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},st(t)}function ct(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ct(Object(n),!0).forEach((function(e){ut(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ct(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ut(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==st(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==st(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===st(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ft(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ft(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const ht=function(t){var e=dt((0,r.useContext)(a.b),2),n=e[0],o=e[1],i=(0,r.useRef)(null),s=(0,r.useRef)(null),c=(0,r.useRef)(null),l=(0,r.useRef)(!1),u=(0,r.useRef)(null),d=function(t,e){t.preventDefault(),l.current=!0,u.current=e,document.addEventListener("mousemove",f),document.addEventListener("mouseup",h)},f=function(t){if(l.current){var e=i.current.getBoundingClientRect(),r=e.width,a=(t.clientX-e.left)/r;if("start"===u.current){a+=0;var s=Math.max(Math.min(a,n.end-.02),0);o((function(t){return lt(lt({},t),{},{start:s})}))}else if("end"===u.current){a-=0;var c=Math.min(Math.max(a,n.start+.02),1);o((function(t){return lt(lt({},t),{},{end:c})}))}}},h=function t(){l.current=!1,u.current=null,n.addToHistory(),o((function(t){return lt(lt({},t),{},{dragInteracted:!0})})),document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",t)};return(0,r.useEffect)((function(){s.current.style.left="calc(".concat(100*n.start,"%)"),c.current.style.left="".concat(100*n.end,"%")}),[n.start,n.end]),r.createElement("div",null,r.createElement("div",{className:T.Z.trimmerContainer,ref:i},r.createElement("div",{className:T.Z.trimWrap},r.createElement("div",{className:T.Z.leftOverlay,style:{width:"".concat(100*n.start,"%")}}),r.createElement("div",{className:T.Z.rightOverlay,style:{width:"".concat(100*(1-n.end),"%")}}),r.createElement("div",{className:T.Z.trimSection,style:{width:"".concat(100*(n.end-n.start),"%"),left:"".concat(100*n.start,"%")}}),r.createElement("div",{className:T.Z.trimmer},r.createElement("div",{className:"".concat(T.Z.handle," ").concat(T.Z.startHandle),onMouseDown:function(t){return d(t,"start")},ref:s}),r.createElement("div",{className:"".concat(T.Z.handle," ").concat(T.Z.endHandle),onMouseDown:function(t){return d(t,"end")},ref:c}))),r.createElement(at,null)))};var mt=n(7307);function pt(){return pt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pt.apply(this,arguments)}function vt(t,e){return vt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vt(t,e)}var gt=function(t,e){return gt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},gt(t,e)};function yt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}gt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var bt=function(){return bt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},bt.apply(this,arguments)};function wt(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}function Et(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))}function St(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}Object.create;function xt(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function Ot(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),o=0;for(e=0;e<n;e++)for(var i=arguments[e],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}function Ct(t,e,n){if(n||2===arguments.length)for(var r,o=0,i=e.length;o<i;o++)!r&&o in e||(r||(r=Array.prototype.slice.call(e,0,o)),r[o]=e[o]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;"function"==typeof SuppressedError&&SuppressedError;var Nt=n(7811),Mt=new Map,At=function(t){return t.cloneNode(!0)},Pt=function(){return"file:"===window.location.protocol},Lt=function(t,e,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){try{if(!/\.svg/i.test(t)&&2===r.readyState){var e=r.getResponseHeader("Content-Type");if(!e)throw new Error("Content type not found");var o=(0,Nt.Q)(e).type;if("image/svg+xml"!==o&&"text/plain"!==o)throw new Error("Invalid content type: ".concat(o))}if(4===r.readyState){if(404===r.status||null===r.responseXML)throw new Error(Pt()?"Note: SVG injection ajax calls do not work locally without adjusting security settings in your browser. Or consider using a local webserver.":"Unable to load SVG file: "+t);if(!(200===r.status||Pt()&&0===r.status))throw new Error("There was a problem injecting the SVG: "+r.status+" "+r.statusText);n(null,r)}}catch(t){if(r.abort(),!(t instanceof Error))throw t;n(t,r)}},r.open("GET",t),r.withCredentials=e,r.overrideMimeType&&r.overrideMimeType("text/xml"),r.send()},jt={},Rt=function(t,e){jt[t]=jt[t]||[],jt[t].push(e)},kt=function(t,e,n){if(Mt.has(t)){var r=Mt.get(t);if(void 0===r)return void Rt(t,n);if(r instanceof SVGSVGElement)return void n(null,At(r))}Mt.set(t,void 0),Rt(t,n),Lt(t,e,(function(e,n){var r;e?Mt.set(t,e):(null===(r=n.responseXML)||void 0===r?void 0:r.documentElement)instanceof SVGSVGElement&&Mt.set(t,n.responseXML.documentElement),function(t){for(var e=function(e,n){setTimeout((function(){if(Array.isArray(jt[t])){var n=Mt.get(t),r=jt[t][e];n instanceof SVGSVGElement&&r(null,At(n)),n instanceof Error&&r(n),e===jt[t].length-1&&delete jt[t]}}),0)},n=0,r=jt[t].length;n<r;n++)e(n)}(t)}))},Tt=function(t,e,n){Lt(t,e,(function(t,e){var r;t?n(t):(null===(r=e.responseXML)||void 0===r?void 0:r.documentElement)instanceof SVGSVGElement&&n(null,e.responseXML.documentElement)}))},Dt=0,It=[],_t={},Wt="http://www.w3.org/1999/xlink",Zt=function(t,e,n,r,o,i,a){var s=t.getAttribute("data-src")||t.getAttribute("src");if(s){if(-1!==It.indexOf(t))return It.splice(It.indexOf(t),1),void(t=null);It.push(t),t.setAttribute("src",""),(r?kt:Tt)(s,o,(function(r,o){if(!o)return It.splice(It.indexOf(t),1),t=null,void a(r);var c=t.getAttribute("id");c&&o.setAttribute("id",c);var l=t.getAttribute("title");l&&o.setAttribute("title",l);var u=t.getAttribute("width");u&&o.setAttribute("width",u);var d=t.getAttribute("height");d&&o.setAttribute("height",d);var f=Array.from(new Set(Ct(Ct(Ct([],(o.getAttribute("class")||"").split(" "),!0),["injected-svg"],!1),(t.getAttribute("class")||"").split(" "),!0))).join(" ").trim();o.setAttribute("class",f);var h=t.getAttribute("style");h&&o.setAttribute("style",h),o.setAttribute("data-src",s);var m=[].filter.call(t.attributes,(function(t){return/^data-\w[\w-]*$/.test(t.name)}));if(Array.prototype.forEach.call(m,(function(t){t.name&&t.value&&o.setAttribute(t.name,t.value)})),n){var p,v,g,y,b,w={clipPath:["clip-path"],"color-profile":["color-profile"],cursor:["cursor"],filter:["filter"],linearGradient:["fill","stroke"],marker:["marker","marker-start","marker-mid","marker-end"],mask:["mask"],path:[],pattern:["fill","stroke"],radialGradient:["fill","stroke"]};Object.keys(w).forEach((function(t){p=t,g=w[t];for(var e=function(t,e){var n;y=v[t].id,b=y+"-"+ ++Dt,Array.prototype.forEach.call(g,(function(t){for(var e=0,r=(n=o.querySelectorAll("["+t+'*="'+y+'"]')).length;e<r;e++){var i=n[e].getAttribute(t);i&&!i.match(new RegExp('url\\("?#'+y+'"?\\)'))||n[e].setAttribute(t,"url(#"+b+")")}}));for(var r=o.querySelectorAll("[*|href]"),i=[],a=0,s=r.length;a<s;a++){var c=r[a].getAttributeNS(Wt,"href");c&&c.toString()==="#"+v[t].id&&i.push(r[a])}for(var l=0,u=i.length;l<u;l++)i[l].setAttributeNS(Wt,"href","#"+b);v[t].id=b},n=0,r=(v=o.querySelectorAll(p+"[id]")).length;n<r;n++)e(n)}))}o.removeAttribute("xmlns:a");for(var E,S,x=o.querySelectorAll("script"),O=[],C=0,N=x.length;C<N;C++)(S=x[C].getAttribute("type"))&&"application/ecmascript"!==S&&"application/javascript"!==S&&"text/javascript"!==S||((E=x[C].innerText||x[C].textContent)&&O.push(E),o.removeChild(x[C]));if(O.length>0&&("always"===e||"once"===e&&!_t[s])){for(var M=0,A=O.length;M<A;M++)new Function(O[M])(window);_t[s]=!0}var P=o.querySelectorAll("style");if(Array.prototype.forEach.call(P,(function(t){t.textContent+=""})),o.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.setAttribute("xmlns:xlink",Wt),i(o),!t.parentNode)return It.splice(It.indexOf(t),1),t=null,void a(new Error("Parent node is null"));t.parentNode.replaceChild(o,t),It.splice(It.indexOf(t),1),t=null,a(null,o)}))}else a(new Error("Invalid data-src or src attribute"))},zt=["afterInjection","beforeInjection","desc","evalScripts","fallback","httpRequestWithCredentials","loading","renumerateIRIElements","src","title","useRequestCache","wrapper"],Bt="http://www.w3.org/2000/svg",Ht="http://www.w3.org/1999/xlink",Ft=function(t){var e,n;function o(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).initialState={hasError:!1,isLoading:!0},e.state=e.initialState,e._isMounted=!1,e.reactWrapper=void 0,e.nonReactWrapper=void 0,e.refCallback=function(t){e.reactWrapper=t},e}n=t,(e=o).prototype=Object.create(n.prototype),e.prototype.constructor=e,vt(e,n);var i=o.prototype;return i.renderSVG=function(){var t,e=this;if(this.reactWrapper instanceof(t=this.reactWrapper,((null==t?void 0:t.ownerDocument)||document).defaultView||window).Node){var n,r,o=this.props,i=o.desc,a=o.evalScripts,s=o.httpRequestWithCredentials,c=o.renumerateIRIElements,l=o.src,u=o.title,d=o.useRequestCache,f=this.props.onError,h=this.props.beforeInjection,m=this.props.afterInjection,p=this.props.wrapper;"svg"===p?((n=document.createElementNS(Bt,p)).setAttribute("xmlns",Bt),n.setAttribute("xmlns:xlink",Ht),r=document.createElementNS(Bt,p)):(n=document.createElement(p),r=document.createElement(p)),n.appendChild(r),r.dataset.src=l,this.nonReactWrapper=this.reactWrapper.appendChild(n);var v=function(t){e.removeSVG(),e._isMounted?e.setState((function(){return{hasError:!0,isLoading:!1}}),(function(){f(t)})):f(t)};!function(t,e){var n=void 0===e?{}:e,r=n.afterAll,o=void 0===r?function(){}:r,i=n.afterEach,a=void 0===i?function(){}:i,s=n.beforeEach,c=void 0===s?function(){}:s,l=n.cacheRequests,u=void 0===l||l,d=n.evalScripts,f=void 0===d?"never":d,h=n.httpRequestWithCredentials,m=void 0!==h&&h,p=n.renumerateIRIElements,v=void 0===p||p;if(t&&"length"in t)for(var g=0,y=0,b=t.length;y<b;y++)Zt(t[y],f,v,u,m,c,(function(e,n){a(e,n),t&&"length"in t&&t.length===++g&&o(g)}));else t?Zt(t,f,v,u,m,c,(function(e,n){a(e,n),o(1),t=null})):o(0)}(r,{afterEach:function(t,n){t?v(t):e._isMounted&&e.setState((function(){return{isLoading:!1}}),(function(){try{m(n)}catch(t){v(t)}}))},beforeEach:function(t){if(t.setAttribute("role","img"),i){var e=t.querySelector(":scope > desc");e&&t.removeChild(e);var n=document.createElement("desc");n.innerHTML=i,t.prepend(n)}if(u){var r=t.querySelector(":scope > title");r&&t.removeChild(r);var o=document.createElement("title");o.innerHTML=u,t.prepend(o)}try{h(t)}catch(t){v(t)}},cacheRequests:d,evalScripts:a,httpRequestWithCredentials:s,renumerateIRIElements:c})}},i.removeSVG=function(){var t;null!=(t=this.nonReactWrapper)&&t.parentNode&&(this.nonReactWrapper.parentNode.removeChild(this.nonReactWrapper),this.nonReactWrapper=null)},i.componentDidMount=function(){this._isMounted=!0,this.renderSVG()},i.componentDidUpdate=function(t){var e=this;(function(t,e){for(var n in t)if(!(n in e))return!0;for(var r in e)if(t[r]!==e[r])return!0;return!1})(pt({},t),this.props)&&this.setState((function(){return e.initialState}),(function(){e.removeSVG(),e.renderSVG()}))},i.componentWillUnmount=function(){this._isMounted=!1,this.removeSVG()},i.render=function(){var t=this.props;t.afterInjection,t.beforeInjection,t.desc,t.evalScripts;var e=t.fallback;t.httpRequestWithCredentials;var n=t.loading;t.renumerateIRIElements,t.src,t.title,t.useRequestCache;var o=t.wrapper,i=function(t,e){if(null==t)return{};var n,r,o={},i=Object.keys(t);for(r=0;r<i.length;r++)n=i[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,zt),a=o;return r.createElement(a,pt({},i,{ref:this.refCallback},"svg"===o?{xmlns:Bt,xmlnsXlink:Ht}:{}),this.state.isLoading&&n&&r.createElement(n,null),this.state.hasError&&e&&r.createElement(e,null))},o}(r.Component);function Ut(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Gt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gt(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}Ft.defaultProps={afterInjection:function(){},beforeInjection:function(){},desc:"",evalScripts:"never",fallback:null,httpRequestWithCredentials:!1,loading:null,onError:function(){},renumerateIRIElements:!0,title:"",useRequestCache:!0,wrapper:"div"},Ft.propTypes={afterInjection:b.func,beforeInjection:b.func,desc:b.string,evalScripts:b.oneOf(["always","once","never"]),fallback:b.oneOfType([b.func,b.object,b.string]),httpRequestWithCredentials:b.bool,loading:b.oneOfType([b.func,b.object,b.string]),onError:b.func,renumerateIRIElements:b.bool,src:b.string.isRequired,title:b.string,useRequestCache:b.bool,wrapper:b.oneOf(["div","span","svg"])};var Vt="/assets/",Xt=Vt+"editor/icons/trim.svg",Yt=Vt+"editor/icons/trash.svg",$t=Vt+"editor/icons/mute.svg",qt=Vt+"editor/icons/undo.svg",Kt=Vt+"editor/icons/redo.svg",Qt=Vt+"editor/icons/time.svg";const Jt=function(t){var e=Ut((0,r.useContext)(a.b),2),n=e[0],o=(e[1],Ut((0,r.useState)(!0),2)),i=o[0],s=o[1],c=Ut((0,r.useState)(!0),2),l=c[0],u=c[1],d=Ut((0,r.useState)(0),2),f=d[0],h=d[1],m=Ut((0,r.useState)(0),2),p=m[0],v=m[1];(0,r.useEffect)((function(){h(n.start*n.duration),v(n.end*n.duration)}),[n.duration,n.start,n.end]),(0,r.useEffect)((function(){n.history.length>2?s(!1):s(!0)}),[n.history]),(0,r.useEffect)((function(){n.redoHistory.length>0?u(!1):u(!0)}),[n.redoHistory]);var g=function(t){var e=Math.floor(t/60),n=Math.floor(t-60*e);return n<10?"".concat(e,":0").concat(n):"".concat(e,":").concat(n)};return r.createElement("div",{className:mt.Z.trimWrap},r.createElement("div",{className:mt.Z.controls},r.createElement("div",{className:mt.Z.actions},r.createElement("button",{className:"button secondaryButton",onClick:function(){return n.handleTrim(!1)},disabled:n.isFfmpegRunning||0===n.start&&1===n.end},r.createElement(Ft,{src:Xt}),n.trimming?chrome.i18n.getMessage("sandboxEditorTrimProgressButton"):chrome.i18n.getMessage("sandboxEditorTrimButton")),r.createElement("button",{className:"button secondaryButton",disabled:0===n.start&&1===n.end||n.isFfmpegRunning,onClick:function(){return n.handleTrim(!0)}},r.createElement(Ft,{src:Yt}),n.cutting?chrome.i18n.getMessage("sandboxEditorCutProgressButton"):chrome.i18n.getMessage("sandboxEditorCutButton")),r.createElement("button",{className:"button secondaryButton",onClick:function(){return n.handleMute()},disabled:n.isFfmpegRunning},r.createElement(Ft,{src:$t}),n.muting?chrome.i18n.getMessage("sandboxEditorMuteProgressButton"):chrome.i18n.getMessage("sandboxEditorMuteButton"))),r.createElement("div",{className:mt.Z.timeWrap},r.createElement(Ft,{src:Qt}),r.createElement("span",null,g(f)+" - "+g(p))),r.createElement("div",{className:mt.Z.controlsRight},r.createElement("button",{className:"button simpleButton",onClick:function(){return n.undo()},disabled:i||n.isFfmpegRunning},r.createElement(Ft,{src:qt}),chrome.i18n.getMessage("undoLabel")),r.createElement("button",{className:"button simpleButton",onClick:function(){return n.redo()},disabled:l||n.isFfmpegRunning},r.createElement(Ft,{src:Kt}),chrome.i18n.getMessage("redoLabel")))),r.createElement(ht,null),(!n.dragInteracted||n.duration>3)&&r.createElement("div",{className:mt.Z.trimInfo},r.createElement("div",{className:mt.Z.trimInfoLeft},r.createElement(Ft,{src:Vt+"editor/icons/alert.svg"})),r.createElement("div",{className:mt.Z.trimInfoRight},chrome.i18n.getMessage("sandboxEditorTrimInfo"),r.createElement("div",{className:mt.Z.trimInfoLink,onClick:function(){chrome.runtime.sendMessage({type:"trim-info"})}},chrome.i18n.getMessage("learnMoreDot")))),n.dragInteracted&&n.duration<=3&&r.createElement("div",{className:mt.Z.trimInfo},r.createElement("div",{className:mt.Z.trimInfoLeft},r.createElement(Ft,{src:Vt+"editor/icons/alert.svg"})),r.createElement("div",{className:mt.Z.trimInfoRight},chrome.i18n.getMessage("sandboxEditorTooSmallInfo"),r.createElement("div",{className:mt.Z.trimInfoLink,onClick:function(){chrome.runtime.sendMessage({type:"trim-info"})}},chrome.i18n.getMessage("learnMoreDot")))))};n(5249);function te(t){return te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},te(t)}function ee(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ne(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ee(Object(n),!0).forEach((function(e){re(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function re(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==te(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==te(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===te(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function oe(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return ie(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ie(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const ae=function(t){t.ffmpeg;var e=oe((0,r.useContext)(a.b),2),n=e[0],o=e[1],i=function(t,e){o((function(n){return ne(ne({},n),{},{updatePlayerTime:e,time:t})}))};return(0,r.useEffect)((function(){o((function(t){return ne(ne({},t),{},{history:[{}],redoHistory:[]})})),n.addToHistory()}),[]),r.createElement("div",null,r.createElement(p,null),r.createElement(k,{onSeek:i}),r.createElement(Jt,{blob:n.blob,onSeek:i}))};var se=n(1150);function ce(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return le(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return le(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var ue="/assets/";const de=function(){var t=ce((0,r.useContext)(a.b),2),e=t[0],n=(t[1],(0,r.useRef)(null));return(0,r.useEffect)((function(){n.current=e}),[e]),r.createElement("div",{className:se.Z.nav},r.createElement("div",{className:se.Z.navWrap},r.createElement("div",{onClick:function(){chrome.runtime.sendMessage({type:"open-home"})},"aria-label":"home",className:se.Z.navLeft},r.createElement("img",{src:ue+"editor/logo.svg",alt:"Screenity Logo"}))))};function fe(t){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fe(t)}function he(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */he=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new L(r||[]);return o(a,"_invoke",{value:N(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",h="suspendedYield",m="executing",p="completed",v={};function g(){}function y(){}function b(){}var w={};l(w,a,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(j([])));S&&S!==n&&r.call(S,a)&&(w=S);var x=b.prototype=g.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function n(o,i,a,s){var c=d(t[o],t,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==fe(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(u).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function N(e,n,r){var o=f;return function(i,a){if(o===m)throw new Error("Generator is already running");if(o===p){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=M(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var l=d(e,n,r);if("normal"===l.type){if(o=r.done?p:h,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=p,r.method="throw",r.arg=l.arg)}}}function M(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=d(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function j(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(fe(e)+" is not iterable")}return y.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},O(C.prototype),l(C.prototype,s,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new C(u(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=j,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:j(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function me(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function pe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ve(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pe(Object(n),!0).forEach((function(e){ge(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ge(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==fe(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===fe(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ye(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return be(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return be(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const we=function(){var t=ye((0,r.useContext)(a.b),2),e=t[0],n=t[1],o=function(){var t,n=(t=he().mark((function t(){return he().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.handleCrop(e.left,e.top,e.width,e.height);case 1:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){me(i,r,o,a,s,"next",t)}function s(t){me(i,r,o,a,s,"throw",t)}a(void 0)}))});return function(){return n.apply(this,arguments)}}();return r.createElement("div",{className:i.Z.editorNav},r.createElement("div",{className:i.Z.navWrap},r.createElement("div",{className:i.Z.editorNavLeft,onClick:function(){chrome.runtime.sendMessage({type:"open-home"})}},r.createElement("img",{src:"/assets/editor/logo.svg",alt:"Logo"})),r.createElement("div",{className:i.Z.editorNavCenter},r.createElement("div",{className:i.Z.editorNavTitle},chrome.i18n.getMessage("sandboxEditorMainTitle")+" "," ",r.createElement("span",{className:i.Z.beta},"BETA"))),r.createElement("div",{className:i.Z.editorNavRight},r.createElement("button",{className:"button simpleButton blackButton",onClick:function(){n((function(t){return ve(ve({},t),{},{mode:"player",blob:e.originalBlob,start:0,end:1,width:e.prevWidth,height:e.prevHeight,left:0,top:0,fromCropper:!1})}))},disabled:e.isFfmpegRunning},chrome.i18n.getMessage("sandboxEditorCancelButton")),r.createElement("button",{className:"button secondaryButton",onClick:function(){n((function(t){return ve(ve({},t),{},{blob:e.originalBlob,start:0,end:1,width:e.prevWidth,height:e.prevHeight,left:0,top:0,fromCropper:!1})}))},disabled:e.isFfmpegRunning},chrome.i18n.getMessage("sandboxEditorResetButton")),r.createElement("button",{className:"button primaryButton",onClick:o,disabled:e.isFfmpegRunning},e.cropping?chrome.i18n.getMessage("sandboxEditorSaveProgressButton"):chrome.i18n.getMessage("sandboxEditorSaveButton")))))};function Ee(t){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ee(t)}function Se(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Se=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new L(r||[]);return o(a,"_invoke",{value:N(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",h="suspendedYield",m="executing",p="completed",v={};function g(){}function y(){}function b(){}var w={};l(w,a,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(j([])));S&&S!==n&&r.call(S,a)&&(w=S);var x=b.prototype=g.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function n(o,i,a,s){var c=d(t[o],t,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==Ee(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(u).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function N(e,n,r){var o=f;return function(i,a){if(o===m)throw new Error("Generator is already running");if(o===p){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=M(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var l=d(e,n,r);if("normal"===l.type){if(o=r.done?p:h,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=p,r.method="throw",r.arg=l.arg)}}}function M(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=d(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function j(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(Ee(e)+" is not iterable")}return y.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},O(C.prototype),l(C.prototype,s,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new C(u(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=j,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:j(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function xe(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function Oe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ce(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Oe(Object(n),!0).forEach((function(e){Ne(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ne(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==Ee(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Ee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ee(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Me(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ae(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ae(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const Pe=function(){var t=Me((0,r.useContext)(a.b),2),e=t[0],n=t[1],o=function(){var t,e=(t=Se().mark((function t(){return Se().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n((function(t){return Ce(Ce({},t),{},{mode:"player",start:0,end:1})}));case 1:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){xe(i,r,o,a,s,"next",t)}function s(t){xe(i,r,o,a,s,"throw",t)}a(void 0)}))});return function(){return e.apply(this,arguments)}}();return r.createElement("div",{className:i.Z.editorNav},r.createElement("div",{className:i.Z.navWrap},r.createElement("div",{className:i.Z.editorNavLeft,onClick:function(){chrome.runtime.sendMessage({type:"open-home"})}},r.createElement("img",{src:"/assets/editor/logo.svg",alt:"Logo"})),r.createElement("div",{className:i.Z.editorNavCenter},r.createElement("div",{className:i.Z.editorNavTitle},chrome.i18n.getMessage("sandboxEditorMainTitle")+" "," ",r.createElement("span",{className:i.Z.beta},"BETA"))),r.createElement("div",{className:i.Z.editorNavRight},r.createElement("button",{className:"button simpleButton blackButton",onClick:function(){n((function(t){return Ce(Ce({},t),{},{mode:"player",blob:e.originalBlob,start:0,end:1,width:e.prevWidth,height:e.prevHeight,left:0,top:0,fromCropper:!1})}))},disabled:e.isFfmpegRunning},chrome.i18n.getMessage("sandboxEditorCancelButton")),r.createElement("button",{className:"button secondaryButton",onClick:function(){n((function(t){return Ce(Ce({},t),{},{blob:e.originalBlob,start:0,end:1})}))},disabled:e.isFfmpegRunning},chrome.i18n.getMessage("sandboxEditorRevertButton")),r.createElement("button",{className:"button primaryButton",onClick:o,disabled:e.isFfmpegRunning},e.cropping?chrome.i18n.getMessage("sandboxEditorSaveProgressButton"):chrome.i18n.getMessage("sandboxEditorSaveButton")))))};var Le=n(3905),je=n(5733),Re=n.n(je);n(4680);function ke(t){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ke(t)}function Te(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function De(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Te(Object(n),!0).forEach((function(e){Ie(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ie(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==ke(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===ke(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return We(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return We(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Ze="chrome-extension://"+chrome.i18n.getMessage("@@extension_id")+"/assets/";const ze=function(t){var e=_e((0,r.useContext)(a.b),2),n=e[0],o=e[1];return r.createElement("div",null,r.createElement("div",{className:Le.Z.alert},r.createElement("div",{className:Le.Z.buttonLeft},r.createElement(Ft,{src:Ze+"editor/icons/alert.svg"})),r.createElement("div",{className:Le.Z.buttonMiddle},r.createElement("div",{className:Le.Z.buttonTitle},chrome.i18n.getMessage("croppingInfoTitle")),r.createElement("div",{className:Le.Z.buttonDescription},chrome.i18n.getMessage("videoProcessingLabelDescription"))),r.createElement("div",{className:Le.Z.buttonRight,onClick:function(){chrome.runtime.sendMessage({type:"upgrade-info"})}},chrome.i18n.getMessage("learnMoreLabel"))),r.createElement("div",{className:Le.Z.section},r.createElement("div",{className:Le.Z.sectionTitle},chrome.i18n.getMessage("sandboxCropTitle")),r.createElement("div",{className:Le.Z.inputs},r.createElement("div",{className:Le.Z.input},r.createElement("div",{className:Le.Z.inputTitle},chrome.i18n.getMessage("widthLabel")),r.createElement("input",{type:"text",className:"input",onChange:function(t){return function(t){var e=t.target.value;isNaN(e)||e<0||o((function(t){return De(De({},t),{},{width:parseFloat(e),cropPreset:"none",fromCropper:!1})}))}(t)},onBlur:function(t){""===t.target.value&&o((function(t){return De(De({},t),{},{width:0})}))},value:n.width}),r.createElement("span",null,"px")),r.createElement("div",{className:Le.Z.input},r.createElement("div",{className:Le.Z.inputTitle},chrome.i18n.getMessage("heightLabel")),r.createElement("input",{type:"text",className:"input",onChange:function(t){return function(t){var e=t.target.value;isNaN(e)||e<0||o((function(t){return De(De({},t),{},{height:parseFloat(e),cropPreset:"none",fromCropper:!1})}))}(t)},value:n.height,onBlur:function(t){""===t.target.value&&o((function(t){return De(De({},t),{},{height:0})}))}}),r.createElement("span",null,"px"))),r.createElement("div",{className:Le.Z.inputs},r.createElement("div",{className:Le.Z.input},r.createElement("div",{className:Le.Z.inputTitle},chrome.i18n.getMessage("leftLabel")),r.createElement("input",{type:"text",className:"input",onChange:function(t){return function(t){var e=t.target.value;isNaN(e)||e<0||o((function(t){return De(De({},t),{},{left:parseFloat(e),fromCropper:!1})}))}(t)},onBlur:function(t){""===t.target.value&&o((function(t){return De(De({},t),{},{left:0})}))},value:n.left}),r.createElement("span",null,"px")),r.createElement("div",{className:Le.Z.input},r.createElement("div",{className:Le.Z.inputTitle},chrome.i18n.getMessage("topLabel")),r.createElement("input",{type:"text",className:"input",onChange:function(t){return function(t){var e=t.target.value;isNaN(e)||e<0||o((function(t){return De(De({},t),{},{top:parseFloat(e),fromCropper:!1})}))}(t)},onBlur:function(t){""===t.target.value&&o((function(t){return De(De({},t),{},{top:0})}))},value:n.top}),r.createElement("span",null,"px")))))};function Be(t,[e,n]){return Math.min(n,Math.max(e,t))}function He(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(null==t||t(r),!1===n||!r.defaultPrevented)return null==e?void 0:e(r)}}function Fe(...t){return e=>t.forEach((t=>function(t,e){"function"==typeof t?t(e):null!=t&&(t.current=e)}(t,e)))}function Ue(...t){return(0,r.useCallback)(Fe(...t),t)}function Ge(t,e=[]){let n=[];const o=()=>{const e=n.map((t=>(0,r.createContext)(t)));return function(n){const o=(null==n?void 0:n[t])||e;return(0,r.useMemo)((()=>({[`__scope${t}`]:{...n,[t]:o}})),[n,o])}};return o.scopeName=t,[function(e,o){const i=(0,r.createContext)(o),a=n.length;function s(e){const{scope:n,children:o,...s}=e,c=(null==n?void 0:n[t][a])||i,l=(0,r.useMemo)((()=>s),Object.values(s));return(0,r.createElement)(c.Provider,{value:l},o)}return n=[...n,o],s.displayName=e+"Provider",[s,function(n,s){const c=(null==s?void 0:s[t][a])||i,l=(0,r.useContext)(c);if(l)return l;if(void 0!==o)return o;throw new Error(`\`${n}\` must be used within \`${e}\``)}]},Ve(o,...e)]}function Ve(...t){const e=t[0];if(1===t.length)return e;const n=()=>{const n=t.map((t=>({useScope:t(),scopeName:t.scopeName})));return function(t){const o=n.reduce(((e,{useScope:n,scopeName:r})=>({...e,...n(t)[`__scope${r}`]})),{});return(0,r.useMemo)((()=>({[`__scope${e.scopeName}`]:o})),[o])}};return n.scopeName=e.scopeName,n}function Xe(t){const e=(0,r.useRef)(t);return(0,r.useEffect)((()=>{e.current=t})),(0,r.useMemo)((()=>(...t)=>{var n;if("function"==typeof(n=e.current))return null===(n=e.current)||void 0===n?void 0:n.call(e,...t)}),[])}function Ye({prop:t,defaultProp:e,onChange:n=(()=>{})}){const[o,i]=function({defaultProp:t,onChange:e}){const n=(0,r.useState)(t),[o]=n,i=(0,r.useRef)(o),a=Xe(e);return(0,r.useEffect)((()=>{i.current!==o&&(a(o),i.current=o)}),[o,i,a]),n}({defaultProp:e,onChange:n}),a=void 0!==t,s=a?t:o,c=Xe(n);return[s,(0,r.useCallback)((e=>{if(a){const n="function"==typeof e?e(t):e;n!==t&&c(n)}else i(e)}),[a,t,i,c])]}const $e=(0,r.createContext)(void 0);function qe(t){const e=(0,r.useRef)({value:t,previous:t});return(0,r.useMemo)((()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous)),[t])}const Ke=Boolean(null===globalThis||void 0===globalThis?void 0:globalThis.document)?r.useLayoutEffect:()=>{};function Qe(t){const[e,n]=(0,r.useState)(void 0);return Ke((()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const e=new ResizeObserver((e=>{if(!Array.isArray(e))return;if(!e.length)return;const r=e[0];let o,i;if("borderBoxSize"in r){const t=r.borderBoxSize,e=Array.isArray(t)?t[0]:t;o=e.inlineSize,i=e.blockSize}else o=t.offsetWidth,i=t.offsetHeight;n({width:o,height:i})}));return e.observe(t,{box:"border-box"}),()=>e.unobserve(t)}n(void 0)}),[t]),e}var Je=n(9060);const tn=(0,r.forwardRef)(((t,e)=>{const{children:n,...o}=t,i=r.Children.toArray(n),a=i.find(rn);if(a){const t=a.props.children,n=i.map((e=>e===a?r.Children.count(t)>1?r.Children.only(null):(0,r.isValidElement)(t)?t.props.children:null:e));return(0,r.createElement)(en,pt({},o,{ref:e}),(0,r.isValidElement)(t)?(0,r.cloneElement)(t,void 0,n):null)}return(0,r.createElement)(en,pt({},o,{ref:e}),n)}));tn.displayName="Slot";const en=(0,r.forwardRef)(((t,e)=>{const{children:n,...o}=t;return(0,r.isValidElement)(n)?(0,r.cloneElement)(n,{...on(o,n.props),ref:e?Fe(e,n.ref):n.ref}):r.Children.count(n)>1?r.Children.only(null):null}));en.displayName="SlotClone";const nn=({children:t})=>(0,r.createElement)(r.Fragment,null,t);function rn(t){return(0,r.isValidElement)(t)&&t.type===nn}function on(t,e){const n={...e};for(const r in e){const o=t[r],i=e[r];/^on[A-Z]/.test(r)?o&&i?n[r]=(...t)=>{i(...t),o(...t)}:o&&(n[r]=o):"style"===r?n[r]={...o,...i}:"className"===r&&(n[r]=[o,i].filter(Boolean).join(" "))}return{...t,...n}}const an=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce(((t,e)=>{const n=(0,r.forwardRef)(((t,n)=>{const{asChild:o,...i}=t,a=o?tn:e;return(0,r.useEffect)((()=>{window[Symbol.for("radix-ui")]=!0}),[]),(0,r.createElement)(a,pt({},i,{ref:n}))}));return n.displayName=`Primitive.${e}`,{...t,[e]:n}}),{});const sn=["PageUp","PageDown"],cn=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ln={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},un="Slider",[dn,fn,hn]=function(t){const e=t+"CollectionProvider",[n,o]=Ge(e),[i,a]=n(e,{collectionRef:{current:null},itemMap:new Map}),s=t=>{const{scope:e,children:n}=t,o=r.useRef(null),a=r.useRef(new Map).current;return r.createElement(i,{scope:e,itemMap:a,collectionRef:o},n)},c=t+"CollectionSlot",l=r.forwardRef(((t,e)=>{const{scope:n,children:o}=t,i=Ue(e,a(c,n).collectionRef);return r.createElement(tn,{ref:i},o)})),u=t+"CollectionItemSlot",d="data-radix-collection-item",f=r.forwardRef(((t,e)=>{const{scope:n,children:o,...i}=t,s=r.useRef(null),c=Ue(e,s),l=a(u,n);return r.useEffect((()=>(l.itemMap.set(s,{ref:s,...i}),()=>{l.itemMap.delete(s)}))),r.createElement(tn,{[d]:"",ref:c},o)}));return[{Provider:s,Slot:l,ItemSlot:f},function(e){const n=a(t+"CollectionConsumer",e);return r.useCallback((()=>{const t=n.collectionRef.current;if(!t)return[];const e=Array.from(t.querySelectorAll(`[${d}]`));return Array.from(n.itemMap.values()).sort(((t,n)=>e.indexOf(t.ref.current)-e.indexOf(n.ref.current)))}),[n.collectionRef,n.itemMap])},o]}(un),[mn,pn]=Ge(un,[hn]),[vn,gn]=mn(un),yn=(0,r.forwardRef)(((t,e)=>{const{name:n,min:o=0,max:i=100,step:a=1,orientation:s="horizontal",disabled:c=!1,minStepsBetweenThumbs:l=0,defaultValue:u=[o],value:d,onValueChange:f=(()=>{}),onValueCommit:h=(()=>{}),inverted:m=!1,...p}=t,[v,g]=(0,r.useState)(null),y=Ue(e,(t=>g(t))),b=(0,r.useRef)(new Set),w=(0,r.useRef)(0),E="horizontal"===s,S=!v||Boolean(v.closest("form")),x=E?En:Sn,[O=[],C]=Ye({prop:d,defaultProp:u,onChange:t=>{var e;null===(e=[...b.current][w.current])||void 0===e||e.focus(),f(t)}}),N=(0,r.useRef)(O);function M(t,e,{commit:n}={commit:!1}){const r=function(t){return(String(t).split(".")[1]||"").length}(a),s=function(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}(Math.round((t-o)/a)*a+o,r),c=Be(s,[o,i]);C(((t=[])=>{const r=function(t=[],e,n){const r=[...t];return r[n]=e,r.sort(((t,e)=>t-e))}(t,c,e);if(function(t,e){if(e>0){const n=function(t){return t.slice(0,-1).map(((e,n)=>t[n+1]-e))}(t);return Math.min(...n)>=e}return!0}(r,l*a)){w.current=r.indexOf(c);const e=String(r)!==String(t);return e&&n&&h(r),e?r:t}return t}))}return(0,r.createElement)(vn,{scope:t.__scopeSlider,disabled:c,min:o,max:i,valueIndexToChangeRef:w,thumbs:b.current,values:O,orientation:s},(0,r.createElement)(dn.Provider,{scope:t.__scopeSlider},(0,r.createElement)(dn.Slot,{scope:t.__scopeSlider},(0,r.createElement)(x,pt({"aria-disabled":c,"data-disabled":c?"":void 0},p,{ref:y,onPointerDown:He(p.onPointerDown,(()=>{c||(N.current=O)})),min:o,max:i,inverted:m,onSlideStart:c?void 0:function(t){const e=function(t,e){if(1===t.length)return 0;const n=t.map((t=>Math.abs(t-e))),r=Math.min(...n);return n.indexOf(r)}(O,t);M(t,e)},onSlideMove:c?void 0:function(t){M(t,w.current)},onSlideEnd:c?void 0:function(){const t=N.current[w.current];O[w.current]!==t&&h(O)},onHomeKeyDown:()=>!c&&M(o,0,{commit:!0}),onEndKeyDown:()=>!c&&M(i,O.length-1,{commit:!0}),onStepKeyDown:({event:t,direction:e})=>{if(!c){const n=sn.includes(t.key)||t.shiftKey&&cn.includes(t.key)?10:1,r=w.current;M(O[r]+a*n*e,r,{commit:!0})}}})))),S&&O.map(((t,e)=>(0,r.createElement)(jn,{key:e,name:n?n+(O.length>1?"[]":""):void 0,value:t}))))})),[bn,wn]=mn(un,{startEdge:"left",endEdge:"right",size:"width",direction:1}),En=(0,r.forwardRef)(((t,e)=>{const{min:n,max:o,dir:i,inverted:a,onSlideStart:s,onSlideMove:c,onSlideEnd:l,onStepKeyDown:u,...d}=t,[f,h]=(0,r.useState)(null),m=Ue(e,(t=>h(t))),p=(0,r.useRef)(),v=function(t){const e=(0,r.useContext)($e);return t||e||"ltr"}(i),g="ltr"===v,y=g&&!a||!g&&a;function b(t){const e=p.current||f.getBoundingClientRect(),r=kn([0,e.width],y?[n,o]:[o,n]);return p.current=e,r(t-e.left)}return(0,r.createElement)(bn,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width"},(0,r.createElement)(xn,pt({dir:v,"data-orientation":"horizontal"},d,{ref:m,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:t=>{const e=b(t.clientX);null==s||s(e)},onSlideMove:t=>{const e=b(t.clientX);null==c||c(e)},onSlideEnd:()=>{p.current=void 0,null==l||l()},onStepKeyDown:t=>{const e=ln[y?"from-left":"from-right"].includes(t.key);null==u||u({event:t,direction:e?-1:1})}})))})),Sn=(0,r.forwardRef)(((t,e)=>{const{min:n,max:o,inverted:i,onSlideStart:a,onSlideMove:s,onSlideEnd:c,onStepKeyDown:l,...u}=t,d=(0,r.useRef)(null),f=Ue(e,d),h=(0,r.useRef)(),m=!i;function p(t){const e=h.current||d.current.getBoundingClientRect(),r=kn([0,e.height],m?[o,n]:[n,o]);return h.current=e,r(t-e.top)}return(0,r.createElement)(bn,{scope:t.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1},(0,r.createElement)(xn,pt({"data-orientation":"vertical"},u,{ref:f,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:t=>{const e=p(t.clientY);null==a||a(e)},onSlideMove:t=>{const e=p(t.clientY);null==s||s(e)},onSlideEnd:()=>{h.current=void 0,null==c||c()},onStepKeyDown:t=>{const e=ln[m?"from-bottom":"from-top"].includes(t.key);null==l||l({event:t,direction:e?-1:1})}})))})),xn=(0,r.forwardRef)(((t,e)=>{const{__scopeSlider:n,onSlideStart:o,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:s,onEndKeyDown:c,onStepKeyDown:l,...u}=t,d=gn(un,n);return(0,r.createElement)(an.span,pt({},u,{ref:e,onKeyDown:He(t.onKeyDown,(t=>{"Home"===t.key?(s(t),t.preventDefault()):"End"===t.key?(c(t),t.preventDefault()):sn.concat(cn).includes(t.key)&&(l(t),t.preventDefault())})),onPointerDown:He(t.onPointerDown,(t=>{const e=t.target;e.setPointerCapture(t.pointerId),t.preventDefault(),d.thumbs.has(e)?e.focus():o(t)})),onPointerMove:He(t.onPointerMove,(t=>{t.target.hasPointerCapture(t.pointerId)&&i(t)})),onPointerUp:He(t.onPointerUp,(t=>{const e=t.target;e.hasPointerCapture(t.pointerId)&&(e.releasePointerCapture(t.pointerId),a(t))}))}))})),On="SliderTrack",Cn=(0,r.forwardRef)(((t,e)=>{const{__scopeSlider:n,...o}=t,i=gn(On,n);return(0,r.createElement)(an.span,pt({"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation},o,{ref:e}))})),Nn="SliderRange",Mn=(0,r.forwardRef)(((t,e)=>{const{__scopeSlider:n,...o}=t,i=gn(Nn,n),a=wn(Nn,n),s=Ue(e,(0,r.useRef)(null)),c=i.values.length,l=i.values.map((t=>Rn(t,i.min,i.max))),u=c>1?Math.min(...l):0,d=100-Math.max(...l);return(0,r.createElement)(an.span,pt({"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0},o,{ref:s,style:{...t.style,[a.startEdge]:u+"%",[a.endEdge]:d+"%"}}))})),An="SliderThumb",Pn=(0,r.forwardRef)(((t,e)=>{const n=fn(t.__scopeSlider),[o,i]=(0,r.useState)(null),a=Ue(e,(t=>i(t))),s=(0,r.useMemo)((()=>o?n().findIndex((t=>t.ref.current===o)):-1),[n,o]);return(0,r.createElement)(Ln,pt({},t,{ref:a,index:s}))})),Ln=(0,r.forwardRef)(((t,e)=>{const{__scopeSlider:n,index:o,...i}=t,a=gn(An,n),s=wn(An,n),[c,l]=(0,r.useState)(null),u=Ue(e,(t=>l(t))),d=Qe(c),f=a.values[o],h=void 0===f?0:Rn(f,a.min,a.max),m=function(t,e){return e>2?`Value ${t+1} of ${e}`:2===e?["Minimum","Maximum"][t]:void 0}(o,a.values.length),p=null==d?void 0:d[s.size],v=p?function(t,e,n){const r=t/2,o=kn([0,50],[0,r]);return(r-o(e)*n)*n}(p,h,s.direction):0;return(0,r.useEffect)((()=>{if(c)return a.thumbs.add(c),()=>{a.thumbs.delete(c)}}),[c,a.thumbs]),(0,r.createElement)("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[s.startEdge]:`calc(${h}% + ${v}px)`}},(0,r.createElement)(dn.ItemSlot,{scope:t.__scopeSlider},(0,r.createElement)(an.span,pt({role:"slider","aria-label":t["aria-label"]||m,"aria-valuemin":a.min,"aria-valuenow":f,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0},i,{ref:u,style:void 0===f?{display:"none"}:t.style,onFocus:He(t.onFocus,(()=>{a.valueIndexToChangeRef.current=o}))}))))})),jn=t=>{const{value:e,...n}=t,o=(0,r.useRef)(null),i=qe(e);return(0,r.useEffect)((()=>{const t=o.current,n=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(n,"value").set;if(i!==e&&r){const n=new Event("input",{bubbles:!0});r.call(t,e),t.dispatchEvent(n)}}),[i,e]),(0,r.createElement)("input",pt({style:{display:"none"}},n,{ref:o,defaultValue:e}))};function Rn(t,e,n){return Be(100/(n-e)*(t-e),[0,100])}function kn(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}const Tn=yn,Dn=Cn,In=Mn,_n=Pn,Wn="Switch",[Zn,zn]=Ge(Wn),[Bn,Hn]=Zn(Wn),Fn=(0,r.forwardRef)(((t,e)=>{const{__scopeSwitch:n,name:o,checked:i,defaultChecked:a,required:s,disabled:c,value:l="on",onCheckedChange:u,...d}=t,[f,h]=(0,r.useState)(null),m=Ue(e,(t=>h(t))),p=(0,r.useRef)(!1),v=!f||Boolean(f.closest("form")),[g=!1,y]=Ye({prop:i,defaultProp:a,onChange:u});return(0,r.createElement)(Bn,{scope:n,checked:g,disabled:c},(0,r.createElement)(an.button,pt({type:"button",role:"switch","aria-checked":g,"aria-required":s,"data-state":Xn(g),"data-disabled":c?"":void 0,disabled:c,value:l},d,{ref:m,onClick:He(t.onClick,(t=>{y((t=>!t)),v&&(p.current=t.isPropagationStopped(),p.current||t.stopPropagation())}))})),v&&(0,r.createElement)(Vn,{control:f,bubbles:!p.current,name:o,value:l,checked:g,required:s,disabled:c,style:{transform:"translateX(-100%)"}}))})),Un="SwitchThumb",Gn=(0,r.forwardRef)(((t,e)=>{const{__scopeSwitch:n,...o}=t,i=Hn(Un,n);return(0,r.createElement)(an.span,pt({"data-state":Xn(i.checked),"data-disabled":i.disabled?"":void 0},o,{ref:e}))})),Vn=t=>{const{control:e,checked:n,bubbles:o=!0,...i}=t,a=(0,r.useRef)(null),s=qe(n),c=Qe(e);return(0,r.useEffect)((()=>{const t=a.current,e=window.HTMLInputElement.prototype,r=Object.getOwnPropertyDescriptor(e,"checked").set;if(s!==n&&r){const e=new Event("click",{bubbles:o});r.call(t,n),t.dispatchEvent(e)}}),[s,n,o]),(0,r.createElement)("input",pt({type:"checkbox","aria-hidden":!0,defaultChecked:n},i,{tabIndex:-1,ref:a,style:{...t.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function Xn(t){return t?"checked":"unchecked"}const Yn=Fn,$n=Gn;var qn=n(3283);function Kn(t){return Kn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kn(t)}function Qn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Jn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Qn(Object(n),!0).forEach((function(e){tr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function tr(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==Kn(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Kn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Kn(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function er(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return nr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const rr=function(){var t=er((0,r.useContext)(a.b),2),e=t[0],n=t[1];return r.createElement("form",null,r.createElement("div",{className:qn.Z.SwitchRow},r.createElement("label",{className:qn.Z.Label,htmlFor:"replaceAudio",style:{paddingRight:15}},chrome.i18n.getMessage("replaceAudioEditor")),r.createElement(Yn,{className:qn.Z.SwitchRoot,checked:e.replaceAudio,onCheckedChange:function(t){n((function(e){return Jn(Jn({},e),{},{replaceAudio:t})}))}},r.createElement($n,{className:qn.Z.SwitchThumb}))))};function or(t){return or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},or(t)}function ir(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ir=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new L(r||[]);return o(a,"_invoke",{value:N(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",h="suspendedYield",m="executing",p="completed",v={};function g(){}function y(){}function b(){}var w={};l(w,a,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(j([])));S&&S!==n&&r.call(S,a)&&(w=S);var x=b.prototype=g.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function n(o,i,a,s){var c=d(t[o],t,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==or(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(u).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function N(e,n,r){var o=f;return function(i,a){if(o===m)throw new Error("Generator is already running");if(o===p){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=M(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var l=d(e,n,r);if("normal"===l.type){if(o=r.done?p:h,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=p,r.method="throw",r.arg=l.arg)}}}function M(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=d(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function j(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(or(e)+" is not iterable")}return y.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},O(C.prototype),l(C.prototype,s,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new C(u(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=j,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:j(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function ar(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function sr(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){ar(i,r,o,a,s,"next",t)}function s(t){ar(i,r,o,a,s,"throw",t)}a(void 0)}))}}function cr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function lr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cr(Object(n),!0).forEach((function(e){ur(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ur(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==or(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==or(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===or(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return fr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var hr="/assets/";const mr=function(t){var e=dr((0,r.useContext)(a.b),2),n=e[0],o=e[1],i=dr((0,r.useState)(null),2),s=i[0],c=i[1],l=(0,r.useRef)(null),u=(0,r.useRef)(null);(0,r.useEffect)((function(){n.blob!==l.current&&(l.current=n.blob,c(null),o((function(t){return lr(lr({},t),{},{volume:1})})))}),[]);var d=function(){var t=sr(ir().mark((function t(e){var r;return ir().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=e.target.files[0]).type.includes("audio")&&0!==r.size){t.next=3;break}return t.abrupt("return");case 3:n.addAudio(n.blob,r,n.volume),c(r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=sr(ir().mark((function t(){return ir().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o((function(t){return lr(lr({},t),{},{blob:l.current})})),n.addAudio(l.current,s,n.volume);case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.createElement("div",null,r.createElement("div",{className:Le.Z.section},r.createElement("div",{className:Le.Z.sectionTitle},"Audio upload"),r.createElement("input",{type:"file",accept:"audio/*",onChange:d,style:{display:"none"},ref:u}),!s&&r.createElement("div",{className:Le.Z.uploadArea,onClick:function(){return u.current.click()}},r.createElement(Ft,{src:hr+"editor/icons/upload.svg"}),r.createElement("div",{className:Le.Z.uploadDetails},r.createElement("div",{className:Le.Z.uploadText},chrome.i18n.getMessage("sandboxAudioDragAndDrop")),r.createElement("div",{className:Le.Z.uploadDescription},chrome.i18n.getMessage("sandboxAudioOrBrowse")))),s&&r.createElement("div",{className:Le.Z.audioDetails},r.createElement("div",{className:Le.Z.audioDetailsLeft},r.createElement(Ft,{src:hr+"editor/icons/attachment.svg"})),r.createElement("div",{className:Le.Z.audioDetailsMiddle},r.createElement("span",null,s.name)),r.createElement("div",{className:Le.Z.audioDetailsRight},r.createElement(Ft,{src:hr+"editor/icons/cross.svg",onClick:function(){c(null),o((function(t){return lr(lr({},t),{},{blob:l.current})})),u.current.value=null}})))),r.createElement("div",{className:Le.Z.section},r.createElement("div",{className:Le.Z.sectionTitle},chrome.i18n.getMessage("sandboxAudioSettingsTitle")),r.createElement("div",{className:Le.Z.inputs},r.createElement("div",{className:"".concat(Le.Z.input," ").concat(Le.Z.inputVolume)},r.createElement("div",{className:Le.Z.inputTitle},chrome.i18n.getMessage("sandboxAudioVolumeLabel")),r.createElement("input",{type:"text",className:"input",onChange:function(t){return function(t){var e=t.target.value;isNaN(e)||e<0||e>100||o((function(t){return lr(lr({},t),{},{volume:parseFloat(e)/100})}))}(t)},value:Math.round(100*n.volume),onBlur:function(t){""===t.target.value&&o((function(t){return lr(lr({},t),{},{volume:0})}))}}),r.createElement("span",null,"%")),r.createElement(Tn,{className:Le.Z.SliderRoot,max:100,step:1,onValueChange:function(t){o((function(e){return lr(lr({},e),{},{volume:Math.round(t)/100})}))},value:[100*n.volume]},r.createElement(Dn,{className:Le.Z.SliderTrack},r.createElement(In,{className:Le.Z.SliderRange})),r.createElement(_n,{className:Le.Z.SliderThumb,"aria-label":"Volume"}))),r.createElement(rr,null),r.createElement("button",{className:["button","primaryButton",Le.Z.updateButton].join(" "),onClick:f,disabled:n.isFfmpegRunning||!s},chrome.i18n.getMessage("sandboxAudioUpdateButton"))))};function pr(t){return pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pr(t)}function vr(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */vr=function(){return e};var t,e={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,n){return t[e]=n}}function u(t,e,n,r){var i=e&&e.prototype instanceof g?e:g,a=Object.create(i.prototype),s=new L(r||[]);return o(a,"_invoke",{value:N(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}e.wrap=u;var f="suspendedStart",h="suspendedYield",m="executing",p="completed",v={};function g(){}function y(){}function b(){}var w={};l(w,a,(function(){return this}));var E=Object.getPrototypeOf,S=E&&E(E(j([])));S&&S!==n&&r.call(S,a)&&(w=S);var x=b.prototype=g.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function C(t,e){function n(o,i,a,s){var c=d(t[o],t,i);if("throw"!==c.type){var l=c.arg,u=l.value;return u&&"object"==pr(u)&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,s)}),(function(t){n("throw",t,a,s)})):e.resolve(u).then((function(t){l.value=t,a(l)}),(function(t){return n("throw",t,a,s)}))}s(c.arg)}var i;o(this,"_invoke",{value:function(t,r){function o(){return new e((function(e,o){n(t,r,e,o)}))}return i=i?i.then(o,o):o()}})}function N(e,n,r){var o=f;return function(i,a){if(o===m)throw new Error("Generator is already running");if(o===p){if("throw"===i)throw a;return{value:t,done:!0}}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var c=M(s,r);if(c){if(c===v)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===f)throw o=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var l=d(e,n,r);if("normal"===l.type){if(o=r.done?p:h,l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=p,r.method="throw",r.arg=l.arg)}}}function M(e,n){var r=n.method,o=e.iterator[r];if(o===t)return n.delegate=null,"throw"===r&&e.iterator.return&&(n.method="return",n.arg=t,M(e,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var i=d(o,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var a=i.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function P(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function j(e){if(e||""===e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}throw new TypeError(pr(e)+" is not iterable")}return y.prototype=b,o(x,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:y,configurable:!0}),y.displayName=l(b,c,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,b):(t.__proto__=b,l(t,c,"GeneratorFunction")),t.prototype=Object.create(x),t},e.awrap=function(t){return{__await:t}},O(C.prototype),l(C.prototype,s,(function(){return this})),e.AsyncIterator=C,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new C(u(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},O(x),l(x,c,"Generator"),l(x,a,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},e.values=j,L.prototype={constructor:L,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(P),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var c=r.call(a,"catchLoc"),l=r.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),v},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),P(n),v}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:j(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}function gr(t,e,n,r,o,i,a){try{var s=t[i](a),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,o)}function yr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function br(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yr(Object(n),!0).forEach((function(e){wr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function wr(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==pr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==pr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===pr(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Er(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Sr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var xr="chrome-extension://"+chrome.i18n.getMessage("@@extension_id")+"/assets/";const Or=function(){var t=Er((0,r.useContext)(a.b),2),e=t[0],n=t[1],o=Er((0,r.useState)(!1),2),i=(o[0],o[1],(0,r.useRef)(e)),s=(0,r.useRef)([]);(0,r.useEffect)((function(){console.error=function(t){s.current.push(t)}}),[]),(0,r.useEffect)((function(){i.current=e}),[e]);var c=function(){var t,r=(t=vr().mark((function t(){return vr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.duration>e.editLimit)||e.override){t.next=2;break}return t.abrupt("return");case 2:if(e.mp4ready){t.next=4;break}return t.abrupt("return");case 4:n((function(t){return br(br({},t),{},{mode:"audio"})})),e.hasBeenEdited||n((function(t){return br(br({},t),{},{hasBeenEdited:!0})}));case 6:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){gr(i,r,o,a,s,"next",t)}function s(t){gr(i,r,o,a,s,"throw",t)}a(void 0)}))});return function(){return r.apply(this,arguments)}}();return r.createElement("div",{className:Le.Z.panel},"audio"===e.mode&&r.createElement(mr,null),"crop"===e.mode&&r.createElement(ze,null),"player"===e.mode&&r.createElement("div",null,!e.fallback&&e.offline&&r.createElement("div",{className:Le.Z.alert},r.createElement("div",{className:Le.Z.buttonLeft},r.createElement(Ft,{src:xr+"editor/icons/no-internet.svg"})),r.createElement("div",{className:Le.Z.buttonMiddle},r.createElement("div",{className:Le.Z.buttonTitle},chrome.i18n.getMessage("offlineLabelTitle")),r.createElement("div",{className:Le.Z.buttonDescription},chrome.i18n.getMessage("offlineLabelDescription"))),r.createElement("div",{className:Le.Z.buttonRight},chrome.i18n.getMessage("offlineLabelTryAgain"))),e.fallback&&r.createElement("div",{className:Le.Z.alert},r.createElement("div",{className:Le.Z.buttonLeft},r.createElement(Ft,{src:xr+"editor/icons/alert.svg"})),r.createElement("div",{className:Le.Z.buttonMiddle},r.createElement("div",{className:Le.Z.buttonTitle},chrome.i18n.getMessage("recoveryModeTitle")),r.createElement("div",{className:Le.Z.buttonDescription},chrome.i18n.getMessage("overLimitLabelDescription")))),!e.fallback&&e.updateChrome&&!e.offline&&e.duration<=e.editLimit&&r.createElement("div",{className:Le.Z.alert},r.createElement("div",{className:Le.Z.buttonLeft},r.createElement(Ft,{src:xr+"editor/icons/alert.svg"})),r.createElement("div",{className:Le.Z.buttonMiddle},r.createElement("div",{className:Le.Z.buttonTitle},chrome.i18n.getMessage("updateChromeLabelTitle")),r.createElement("div",{className:Le.Z.buttonDescription},chrome.i18n.getMessage("updateChromeLabelDescription"))),r.createElement("div",{className:Le.Z.buttonRight,onClick:function(){chrome.runtime.sendMessage({type:"chrome-update-info"})}},chrome.i18n.getMessage("learnMoreLabel"))),!e.fallback&&e.duration>e.editLimit&&!e.override&&!e.offline&&!e.updateChrome&&r.createElement("div",{className:Le.Z.alert},r.createElement("div",{className:Le.Z.buttonLeft},r.createElement(Ft,{src:xr+"editor/icons/alert.svg"})),r.createElement("div",{className:Le.Z.buttonMiddle},r.createElement("div",{className:Le.Z.buttonTitle},chrome.i18n.getMessage("overLimitLabelTitle")),r.createElement("div",{className:Le.Z.buttonDescription},chrome.i18n.getMessage("overLimitLabelDescription"))),r.createElement("div",{className:Le.Z.buttonRight,onClick:function(){"function"==typeof e.openModal&&e.openModal(chrome.i18n.getMessage("overLimitModalTitle"),chrome.i18n.getMessage("overLimitModalDescription"),chrome.i18n.getMessage("overLimitModalButton"),chrome.i18n.getMessage("sandboxEditorCancelButton"),(function(){n((function(t){return br(br({},t),{},{saved:!0})})),chrome.runtime.sendMessage({type:"force-processing"})}),(function(){}),null,chrome.i18n.getMessage("overLimitModalLearnMore"),(function(){chrome.runtime.sendMessage({type:"upgrade-info"})}))}},chrome.i18n.getMessage("learnMoreLabel"))),(!e.mp4ready||e.isFfmpegRunning)&&(e.duration<=e.editLimit||e.override)&&!e.offline&&!e.updateChrome&&!e.noffmpeg&&r.createElement("div",{className:Le.Z.alert},r.createElement("div",{className:Le.Z.buttonLeft},r.createElement(Ft,{src:xr+"editor/icons/alert.svg"})),r.createElement("div",{className:Le.Z.buttonMiddle},r.createElement("div",{className:Le.Z.buttonTitle},chrome.i18n.getMessage("videoProcessingLabelTitle")),r.createElement("div",{className:Le.Z.buttonDescription},chrome.i18n.getMessage("videoProcessingLabelDescription"))),r.createElement("div",{className:Le.Z.buttonRight,onClick:function(){chrome.runtime.sendMessage({type:"open-processing-info"})}},chrome.i18n.getMessage("learnMoreLabel"))),r.createElement("div",{className:Le.Z.section},r.createElement("div",{className:Le.Z.sectionTitle},chrome.i18n.getMessage("sandboxEditTitle")),r.createElement("div",{className:Le.Z.buttonWrap},r.createElement("div",{role:"button",className:Le.Z.button,onClick:function(){e.duration>e.editLimit&&!e.override||e.mp4ready&&(n((function(t){return br(br({},t),{},{mode:"edit",dragInteracted:!1})})),e.hasBeenEdited||n((function(t){return br(br({},t),{},{hasBeenEdited:!0})})))},disabled:e.duration>e.editLimit&&!e.override||!e.mp4ready||e.noffmpeg},r.createElement("div",{className:Le.Z.buttonLeft},r.createElement(Ft,{src:xr+"editor/icons/trim.svg"})),r.createElement("div",{className:Le.Z.buttonMiddle},r.createElement("div",{className:Le.Z.buttonTitle},chrome.i18n.getMessage("editButtonTitle")),r.createElement("div",{className:Le.Z.buttonDescription},e.offline&&!e.ffmpegLoaded?chrome.i18n.getMessage("noConnectionLabel"):e.updateChrome||e.noffmpeg||e.duration>e.editLimit&&!e.override?chrome.i18n.getMessage("notAvailableLabel"):e.mp4ready?chrome.i18n.getMessage("editButtonDescription"):chrome.i18n.getMessage("preparingLabel"))),r.createElement("div",{className:Le.Z.buttonRight},r.createElement(Ft,{src:xr+"editor/icons/right-arrow.svg"}))),r.createElement("div",{role:"button",className:Le.Z.button,onClick:function(){e.duration>e.editLimit&&!e.override||e.mp4ready&&(n((function(t){return br(br({},t),{},{mode:"crop"})})),e.hasBeenEdited||n((function(t){return br(br({},t),{},{hasBeenEdited:!0})})))},disabled:e.duration>e.editLimit&&!e.override||!e.mp4ready||e.noffmpeg},r.createElement("div",{className:Le.Z.buttonLeft},r.createElement(Ft,{src:xr+"editor/icons/crop.svg"})),r.createElement("div",{className:Le.Z.buttonMiddle},r.createElement("div",{className:Le.Z.buttonTitle},chrome.i18n.getMessage("cropButtonTitle")),r.createElement("div",{className:Le.Z.buttonDescription},e.offline&&!e.ffmpegLoaded?chrome.i18n.getMessage("noConnectionLabel"):e.updateChrome||e.noffmpeg||e.duration>e.editLimit&&!e.override?chrome.i18n.getMessage("notAvailableLabel"):e.mp4ready?chrome.i18n.getMessage("cropButtonDescription"):chrome.i18n.getMessage("preparingLabel"))),r.createElement("div",{className:Le.Z.buttonRight},r.createElement(Ft,{src:xr+"editor/icons/right-arrow.svg"}))),r.createElement("div",{role:"button",className:Le.Z.button,onClick:c,disabled:e.duration>e.editLimit&&!e.override||!e.mp4ready||e.noffmpeg},r.createElement("div",{className:Le.Z.buttonLeft},r.createElement(Ft,{src:xr+"editor/icons/audio.svg"})),r.createElement("div",{className:Le.Z.buttonMiddle},r.createElement("div",{className:Le.Z.buttonTitle},chrome.i18n.getMessage("addAudioButtonTitle")),r.createElement("div",{className:Le.Z.buttonDescription},e.offline&&!e.ffmpegLoaded?chrome.i18n.getMessage("noConnectionLabel"):e.updateChrome||e.noffmpeg||e.duration>e.editLimit&&!e.override?chrome.i18n.getMessage("notAvailableLabel"):e.mp4ready?chrome.i18n.getMessage("addAudioButtonDescription"):chrome.i18n.getMessage("preparingLabel"))),r.createElement("div",{className:Le.Z.buttonRight},r.createElement(Ft,{src:xr+"editor/icons/right-arrow.svg"}))))),r.createElement("div",{className:Le.Z.section},r.createElement("div",{className:Le.Z.sectionTitle},chrome.i18n.getMessage("sandboxExportTitle")),r.createElement("div",{className:Le.Z.buttonWrap},e.fallback&&r.createElement("div",{role:"button",className:Le.Z.button,onClick:function(){return e.downloadWEBM()},disabled:e.isFfmpegRunning},r.createElement("div",{className:Le.Z.buttonLeft},r.createElement(Ft,{src:xr+"editor/icons/download.svg"})),r.createElement("div",{className:Le.Z.buttonMiddle},r.createElement("div",{className:Le.Z.buttonTitle},e.downloadingWEBM?chrome.i18n.getMessage("downloadingLabel"):chrome.i18n.getMessage("downloadWEBMButtonTitle")),r.createElement("div",{className:Le.Z.buttonDescription},chrome.i18n.getMessage("downloadWEBMButtonDescription"))),r.createElement("div",{className:Le.Z.buttonRight},r.createElement(Ft,{src:xr+"editor/icons/right-arrow.svg"}))),r.createElement("div",{role:"button",className:Le.Z.button,onClick:function(){e.mp4ready&&e.download()},disabled:e.isFfmpegRunning||e.noffmpeg||!e.mp4ready||e.noffmpeg},r.createElement("div",{className:Le.Z.buttonLeft},r.createElement(Ft,{src:xr+"editor/icons/download.svg"})),r.createElement("div",{className:Le.Z.buttonMiddle},r.createElement("div",{className:Le.Z.buttonTitle},e.downloading?chrome.i18n.getMessage("downloadingLabel"):chrome.i18n.getMessage("downloadMP4ButtonTitle")),r.createElement("div",{className:Le.Z.buttonDescription},e.offline&&!e.ffmpegLoaded?chrome.i18n.getMessage("noConnectionLabel"):e.updateChrome||e.noffmpeg||e.duration>e.editLimit&&!e.override?chrome.i18n.getMessage("notAvailableLabel"):e.mp4ready&&!e.isFfmpegRunning?chrome.i18n.getMessage("downloadMP4ButtonDescription"):chrome.i18n.getMessage("preparingLabel"))),r.createElement("div",{className:Le.Z.buttonRight},r.createElement(Ft,{src:xr+"editor/icons/right-arrow.svg"}))),!e.fallback&&r.createElement("div",{role:"button",className:Le.Z.button,onClick:function(){return e.downloadWEBM()},disabled:e.isFfmpegRunning},r.createElement("div",{className:Le.Z.buttonLeft},r.createElement(Ft,{src:xr+"editor/icons/download.svg"})),r.createElement("div",{className:Le.Z.buttonMiddle},r.createElement("div",{className:Le.Z.buttonTitle},e.downloadingWEBM?chrome.i18n.getMessage("downloadingLabel"):chrome.i18n.getMessage("downloadWEBMButtonTitle")),r.createElement("div",{className:Le.Z.buttonDescription},e.isFfmpegRunning?chrome.i18n.getMessage("preparingLabel"):chrome.i18n.getMessage("downloadWEBMButtonDescription"))),r.createElement("div",{className:Le.Z.buttonRight},r.createElement(Ft,{src:xr+"editor/icons/right-arrow.svg"}))),r.createElement("div",{role:"button",className:Le.Z.button,onClick:function(){e.mp4ready&&e.downloadGIF()},disabled:e.isFfmpegRunning||e.duration>30||!e.mp4ready||e.noffmpeg},r.createElement("div",{className:Le.Z.buttonLeft},r.createElement(Ft,{src:xr+"editor/icons/gif.svg"})),r.createElement("div",{className:Le.Z.buttonMiddle},r.createElement("div",{className:Le.Z.buttonTitle},e.downloadingGIF?chrome.i18n.getMessage("downloadingLabel"):chrome.i18n.getMessage("downloadGIFButtonTitle")),r.createElement("div",{className:Le.Z.buttonDescription},e.offline&&!e.ffmpegLoaded?chrome.i18n.getMessage("noConnectionLabel"):e.updateChrome||e.noffmpeg||e.duration>e.editLimit&&!e.override?chrome.i18n.getMessage("notAvailableLabel"):e.mp4ready?chrome.i18n.getMessage("downloadGIFButtonDescription"):chrome.i18n.getMessage("preparingLabel"))),r.createElement("div",{className:Le.Z.buttonRight},r.createElement(Ft,{src:xr+"editor/icons/right-arrow.svg"}))))),r.createElement("div",{className:Le.Z.section},r.createElement("div",{className:Le.Z.sectionTitle},chrome.i18n.getMessage("sandboxAdvancedTitle")),r.createElement("div",{className:Le.Z.buttonWrap},r.createElement("div",{role:"button",className:Le.Z.button,onClick:function(){"function"==typeof i.current.openModal&&i.current.openModal(chrome.i18n.getMessage("rawRecordingModalTitle"),chrome.i18n.getMessage("rawRecordingModalDescription"),chrome.i18n.getMessage("rawRecordingModalButton"),chrome.i18n.getMessage("sandboxEditorCancelButton"),(function(){var t=i.current.rawBlob,e=window.URL.createObjectURL(t);chrome.downloads.download({url:e,filename:"raw-recording.webm"},(function(){window.URL.revokeObjectURL(e)}))}),(function(){}))}},r.createElement("div",{className:Le.Z.buttonLeft},r.createElement(Ft,{src:xr+"editor/icons/download.svg"})),r.createElement("div",{className:Le.Z.buttonMiddle},r.createElement("div",{className:Le.Z.buttonTitle},chrome.i18n.getMessage("rawRecordingButtonTitle")),r.createElement("div",{className:Le.Z.buttonDescription},chrome.i18n.getMessage("rawRecordingButtonDescription"))),r.createElement("div",{className:Le.Z.buttonRight},r.createElement(Ft,{src:xr+"editor/icons/right-arrow.svg"}))),r.createElement("div",{role:"button",className:Le.Z.button,onClick:function(){"function"==typeof i.current.openModal&&i.current.openModal(chrome.i18n.getMessage("troubleshootModalTitle"),chrome.i18n.getMessage("troubleshootModalDescription"),chrome.i18n.getMessage("troubleshootModalButton"),chrome.i18n.getMessage("sandboxEditorCancelButton"),(function(){var t=navigator.userAgent,e={};chrome.runtime.getPlatformInfo((function(n){e=n;var r=chrome.runtime.getManifest().version,o=i.current.rawBlob,a={userAgent:t,platformInfo:e,manifestInfo:r,contentState:i.current},s=new(Re());s.file("recording.webm",o),s.file("troubleshooting.json",JSON.stringify(a)),s.generateAsync({type:"blob"}).then((function(t){var e=window.URL.createObjectURL(t);chrome.downloads.download({url:e,filename:"troubleshooting.zip"},(function(){window.URL.revokeObjectURL(e)}))}))}))}),(function(){}))}},r.createElement("div",{className:Le.Z.buttonLeft},r.createElement(Ft,{src:xr+"editor/icons/flag.svg"})),r.createElement("div",{className:Le.Z.buttonMiddle},r.createElement("div",{className:Le.Z.buttonTitle},chrome.i18n.getMessage("troubleshootButtonTitle")),r.createElement("div",{className:Le.Z.buttonDescription},chrome.i18n.getMessage("troubleshootButtonDescription"))),r.createElement("div",{className:Le.Z.buttonRight},r.createElement(Ft,{src:xr+"editor/icons/right-arrow.svg"})))))))};var Cr=n(8990),Nr=(n(9512),n(9300)),Mr=n(5446);function Ar(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Pr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pr(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const Lr=function(t){t.showShare;var e=t.setShowShare,n=Ar((0,r.useContext)(a.b),2);n[0],n[1];return r.createElement("div",{className:Mr.Z.modalWrap},r.createElement("div",{className:Mr.Z.modal},r.createElement("div",{className:Mr.Z.close,onClick:function(){e(!1)}},r.createElement(Ft,{src:"/assets/editor/icons/close-button.svg",width:"16px",height:"16px"})),r.createElement("div",{className:Mr.Z.emoji},"👋"),r.createElement("div",{className:Mr.Z.title},chrome.i18n.getMessage("shareModalSandboxTitle")),r.createElement("div",{className:Mr.Z.subtitle},chrome.i18n.getMessage("shareModalSandboxDescription")),r.createElement("div",{className:Mr.Z.button,onClick:function(){chrome.runtime.sendMessage({type:"join-waitlist"}),e(!1)}},chrome.i18n.getMessage("shareModalSandboxButton"))),r.createElement("div",{className:Mr.Z.modalBackground,onClick:function(){e(!1)}}))};function jr(t){return jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jr(t)}function Rr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function kr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Rr(Object(n),!0).forEach((function(e){Tr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rr(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Tr(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==jr(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==jr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===jr(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Dr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ir(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ir(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ir(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const _r=function(){var t=Dr((0,r.useState)(!1),2),e=t[0],n=t[1],o=Dr((0,r.useContext)(a.b),2),i=o[0],s=o[1],c=(0,r.useRef)(null),l=Dr((0,r.useState)(!0),2),u=l[0],d=l[1],f=Dr((0,r.useState)(i.title),2),h=f[0],m=f[1],p=Dr((0,r.useState)(i.title),2),v=p[0],g=p[1];(0,r.useEffect)((function(){m(i.title),i.title.length>80?g(i.title.slice(0,80)+"..."):g(i.title)}),[i.title]);return(0,r.useEffect)((function(){u||(c.current.focus(),c.current.select())}),[u]),(0,r.useEffect)((function(){var t=function(t){"Enter"===t.key?(d(!0),s((function(t){return kr(kr({},t),{},{title:h})}))):"Escape"===t.key&&(d(!0),m(i.title))};return document.addEventListener("keydown",t),function(){document.removeEventListener("keydown",t)}}),[h]),r.createElement("div",{className:Nr.Z.TitleParent},e&&r.createElement(Lr,{showShare:e,setShowShare:n}),r.createElement("div",{className:Nr.Z.TitleWrap},u?r.createElement(r.Fragment,null,r.createElement("h1",{onClick:function(){d(!1)}},v," ",r.createElement(Ft,{src:"/assets/editor/icons/pencil.svg",className:Nr.Z.pencil,styles:{display:"inline-block"}}))):r.createElement("input",{type:"text",value:h,onChange:function(t){m(t.target.value)},onBlur:function(){d(!0),s((function(t){return kr(kr({},t),{},{title:h})}))},ref:c})))};function Wr(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||Zr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zr(t,e){if(t){if("string"==typeof t)return zr(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zr(t,e):void 0}}function zr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const Br=function(t){var e=Wr((0,r.useContext)(a.b),2),n=e[0],o=(e[1],(0,r.useRef)(null)),i=Wr((0,r.useState)(null),2),s=i[0],c=i[1],l=Wr((0,r.useState)(null),2),u=l[0],d=l[1],f=(0,r.useRef)(n),h=(0,r.useRef)(null);(0,r.useEffect)((function(){f.current=n}),[n]),(0,r.useEffect)((function(){o.current&&o.current.plyr&&n.updatePlayerTime&&(o.current.plyr.currentTime=n.time)}),[n.time]);var m=(0,r.useMemo)((function(){return{controls:["play","rewind","fast-forward","progress","current-time","duration","mute","captions","settings","pip","fullscreen"],urls:null,ratio:"16:9",blankVideo:"chrome-extension://"+chrome.i18n.getMessage("@@extension_id")+"/assets/blank.mp4",keyboard:{global:!0}}}),[]);return(0,r.useEffect)((function(){if(n.webm||n.blob){var t;n.blob?(h.current&&(h.current.style.display="none",h.current.remove()),t=n.blob):n.webm&&(t=n.webm);var e=URL.createObjectURL(t);return d({type:"video",sources:[{src:e,type:n.blob?"video/mp4":"video/webm"}]}),c(e),function(){URL.revokeObjectURL(e)}}}),[n.webm,n.blob,n.hasBeenEdited,o]),(0,r.useEffect)((function(){if(!f.current.mp4ready&&!f.current.blob){var t=new MutationObserver((function(t,e){var n,r=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Zr(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(t);try{for(r.s();!(n=r.n()).done;){n.value;!document.querySelector(".plyr--video")||f.current.mp4ready||f.current.blob||h.current||f.current.noffmpeg||f.current.duration>f.current.editLimit&&!f.current.override||(h.current=document.createElement("div"),h.current.classList.add("videoBanner"),h.current.innerHTML="<img src='"+chrome.runtime.getURL("assets/editor/icons/alert-white.svg")+"'/> <span>"+chrome.i18n.getMessage("processingBannerEditor")+"</span>",document.querySelector(".plyr--video").appendChild(h.current))}}catch(t){r.e(t)}finally{r.f()}}));return t.observe(document.body,{attributes:!0,childList:!0,subtree:!0}),function(){t.disconnect(),h.current&&(h.current.style.display="none",h.current.remove(),h.current=null)}}}),[]),r.createElement("div",{className:"videoPlayer"},r.createElement("div",{className:"playerWrap"},s&&r.createElement(N,{ref:o,id:"plyr-player",source:u,options:m}),"player"===n.mode&&r.createElement(_r,null)),r.createElement("style",null,"\n\t\t\t\t\t@media (max-width: 900px) {\n\t\t\t\t\t\t.videoPlayer {\n\t\t\t\t\t\t\tposition: relative!important;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t"))};function Hr(t){return t.moveCoordinates||t.resizeCoordinates||t.transformImage.move||t.transformImage.rotate||t.transformImage.flip||t.transformImage.scale}function Fr(t,e){var n,r;return t&&e?(n=""+t+e[0].toUpperCase()+e.slice(1),r=t+"-"+e):(n=t||e,r=t||e),{camelCase:n,snakeCase:r}}function Ur(t){return/^blob:/.test(t)}function Gr(t){return Ur(t)||function(t){return/^data:/.test(t)}(t)}function Vr(t){if(Gr(t))return!1;var e=window.location,n=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/.exec(t)||[],r={protocol:n[1]||"",host:n[2]||"",port:n[3]||""},o=function(t){return t.port||("http"===(t.protocol||e.protocol)?80:433)};return!(!r.protocol&&!r.host&&!r.port||Boolean(r.protocol&&r.protocol==e.protocol&&r.host&&r.host==e.host&&r.host&&o(r)==o(e)))}function Xr(t){return"function"==typeof t}function Yr(t){return void 0===t}var $r=function(t){return null!==t&&"object"==typeof t};function qr(t,e,n){void 0===n&&(n={});var r={};return $r(t)?(Object.keys(e).forEach((function(o){Yr(t[o])?r[o]=e[o]:$r(e[o])?$r(t[o])?r[o]=qr(t[o],e[o],n[o]):r[o]=t[o]?e[o]:n[o]:!0===e[o]||!1===e[o]?r[o]=Boolean(t[o]):r[o]=t[o]})),r):t?e:n}function Kr(t){var e=Number(t);return Number.isNaN(e)?t:e}function Qr(t){return!0===t||!1===t}function Jr(t){return"number"==typeof t}function to(t){return t!=t}function eo(t){return Jr(t)&&!to(t)||function(t){return"string"==typeof t}(t)&&!Number.isNaN(parseFloat(t))&&isFinite(parseFloat(t))}function no(t,e){return Math.sqrt(Math.pow(t.left-e.left,2)+Math.pow(t.top-e.top,2))}function ro(t,e,n){return void 0===n&&(n=.001),Math.abs(e-t)<n}function oo(t,e,n){return!ro(t,e,n)&&t>e}function io(t,e,n){return!ro(t,e,n)&&t<e}function ao(t){return new Promise((function(e){setTimeout((function(){e()}),t)}))}function so(t){if(!$r(t))return t;var e={};return Array.isArray(t)?e=t.map((function(t){return so(t)})):Object.keys(t).forEach((function(n){return e[n]=so(t[n])})),e}function co(t,e,n){if(void 0===n&&(n=.001),Jr(t)&&Jr(e)&&ro(t,e,n))return!0;if(t===e)return!0;if(t&&e&&"object"==typeof t&&"object"==typeof e){if(t.constructor!==e.constructor)return!1;var r,o=void 0;if(Array.isArray(t)){if((r=t.length)!=e.length)return!1;for(o=r;0!=o--;)if(!co(t[o],e[o],n))return!1;return!0}if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===e.toString();var i=Object.keys(t);if((r=i.length)!==Object.keys(e).length)return!1;for(o=r;0!=o--;)if(!Object.prototype.hasOwnProperty.call(e,i[o]))return!1;for(o=r;0!=o--;){var a=i[o];if(!co(t[a],e[a],n))return!1}return!0}return t!=t&&e!=e}function lo(t){return"west"===t||"south"===t||"north"===t||"east"===t}function uo(t,e){var n,r;function o(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var s=Date.now()-n,c=Xr(e)?e():e||0;s<c&&s>=0?r=setTimeout((function(){return o.apply(void 0,i)}),c-s):t.apply(void 0,i)}function i(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];n=Date.now(),r=setTimeout((function(){return o.apply(void 0,t)}),Xr(e)?e():e||0)}return i.clear=function(){clearTimeout(r)},i}var fo,ho,mo,po=["left","right","top","bottom"],vo=["left","right"],go=["top","bottom"];function yo(t,e){return{left:t.left-e.left,top:t.top-e.top}}function bo(t){return{left:t.left+t.width/2,top:t.top+t.height/2}}function wo(t,e){return Math.pow(t.width-e.width,2)+Math.pow(t.height-e.height,2)}function Eo(t,e){return{left:t.left-e.left,top:t.top-e.top,width:t.width+e.left+e.right,height:t.height+e.top+e.bottom}}function So(t){return{left:-t.left,top:-t.top}}function xo(t,e){return bt(bt({},t),{left:t.left+e.left,top:t.top+e.top})}function Oo(t){return{left:t.left,top:t.top,right:t.left+t.width,bottom:t.top+t.height}}function Co(t,e,n,r){if(1!==e){if("left"in t||"top"in t){if(n){var o=bo(t);return{width:t.width*e,height:t.height*e,left:t.left+t.width*(1-e)/2+(n.left-o.left)*(r||1-e),top:t.top+t.height*(1-e)/2+(n.top-o.top)*(r||1-e)}}return{width:t.width*e,height:t.height*e,left:t.left+t.width*(1-e)/2,top:t.top+t.height*(1-e)/2}}return{width:t.width*e,height:t.height*e}}return t}function No(t){return t.width/t.height}function Mo(t,e){return Math.min(e.maxWidth?e.maxWidth/t.width:1/0,e.maxHeight?e.maxHeight/t.height:1/0)}function Ao(t,e){var n;return e.minimum&&io(t,e.minimum)?n=e.minimum:e.maximum&&oo(t,e.maximum)&&(n=e.maximum),n}function Po(t,e){var n=No(t),r=1;return e.minWidth>0&&e.minHeight>0?n>e.minWidth/e.minHeight?t.height<e.minHeight&&(r=e.minHeight/t.height):t.width<e.minWidth&&(r=e.minWidth/t.width):e.minWidth>0?t.width<e.minWidth&&(r=e.minWidth/t.width):e.minHeight>0&&t.height<e.minHeight&&(r=e.minHeight/t.height),e.maxWidth<1/0&&e.maxHeight<1/0?n>e.maxWidth/e.maxHeight?t.width>e.maxWidth&&(r=e.maxWidth/t.width):t.height>e.maxHeight&&(r=e.maxHeight/t.height):e.maxWidth<1/0?t.width>e.maxWidth&&(r=e.maxWidth/t.width):e.maxHeight<1/0&&t.height>e.maxHeight&&(r=e.maxHeight/t.height),r}function Lo(t,e){var n={left:0,top:0,right:0,bottom:0};return po.forEach((function(r){var o=e[r],i=Oo(t)[r];n[r]=void 0!==o&&void 0!==i?"left"===r||"top"===r?Math.max(0,o-i):Math.max(0,i-o):0})),n}function jo(t,e){return Co(t,Po(t,e))}function Ro(t,e){var n=e*Math.PI/180;return{width:Math.abs(t.width*Math.cos(n))+Math.abs(t.height*Math.sin(n)),height:Math.abs(t.width*Math.sin(n))+Math.abs(t.height*Math.cos(n))}}function ko(t,e,n){var r=e*Math.PI/180;return n?{left:(t.left-n.left)*Math.cos(r)-(t.top-n.top)*Math.sin(r)+n.left,top:(t.left-n.left)*Math.sin(r)+(t.top-n.top)*Math.cos(r)+n.top}:{left:t.left*Math.cos(r)-t.top*Math.sin(r),top:t.left*Math.sin(r)+t.top*Math.cos(r)}}function To(t){return{minWidth:0,minHeight:0,maxWidth:void 0!==t.right&&void 0!==t.left?t.right-t.left:1/0,maxHeight:void 0!==t.bottom&&void 0!==t.top?t.bottom-t.top:1/0}}function Do(t,e){var n={};return po.forEach((function(r){var o=t[r],i=e[r];void 0!==o&&void 0!==i?n[r]="left"===r||"top"===r?Math.max(o,i):Math.min(o,i):void 0!==i?n[r]=i:void 0!==o&&(n[r]=o)})),n}function Io(t,e){var n={left:0,top:0},r=Lo(t,e);return r.left&&r.left>0?n.left=r.left:r.right&&r.right>0&&(n.left=-r.right),r.top&&r.top>0?n.top=r.top:r.bottom&&r.bottom>0&&(n.top=-r.bottom),n}function _o(t,e){return xo(t,Io(t,e))}function Wo(t){return void 0===t&&(t={}),Jr(t)?{minimum:t,maximum:t}:{minimum:eo(t.minimum)?t.minimum:0,maximum:eo(t.maximum)?t.maximum:1/0}}function Zo(t,e){return(Yr(e.maxWidth)||!oo(t.width,e.maxWidth))&&(Yr(e.maxHeight)||!oo(t.height,e.maxHeight))&&(Yr(e.minHeight)||!io(t.height,e.minHeight))&&(Yr(e.minWidth)||!io(t.width,e.minWidth))}function zo(t,e){return(Yr(e.left)||!io(t.left,e.left))&&(Yr(e.top)||!io(t.top,e.top))&&(Yr(e.right)||!oo(t.left+t.width,e.right))&&(Yr(e.bottom)||!oo(t.top+t.height,e.bottom))}function Bo(t){var e=bt({},t);return e.minWidth>e.maxWidth&&(e.minWidth=e.maxWidth),e.minHeight>e.maxHeight&&(e.minHeight=e.maxHeight),e}function Ho(t,e){var n=t,r=bt({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0},e);return Bo({maxHeight:Math.min(n.maxHeight,r.maxHeight),minHeight:Math.max(n.minHeight,r.minHeight),maxWidth:Math.min(n.maxWidth,r.maxWidth),minWidth:Math.max(n.minWidth,r.minWidth)})}function Fo(t){return Boolean(t&&t.visibleArea&&t.coordinates)}function Uo(t,e){return function(t,e){var n=Xr(e.areaSizeRestrictions)?e.areaSizeRestrictions(t,e):e.areaSizeRestrictions;return n.maxWidth<1/0&&n.maxHeight<1/0&&(No(t.boundary)>n.maxWidth/n.maxHeight?n.maxHeight=n.maxWidth/No(t.boundary):n.maxWidth=n.maxHeight*No(t.boundary)),Bo(n)}(t,e)}function Go(t,e){return Xr(e.areaPositionRestrictions)?e.areaPositionRestrictions(t,e):e.areaPositionRestrictions}function Vo(t,e){return function(t,e){var n=Xr(e.sizeRestrictions)?e.sizeRestrictions(t,e):e.sizeRestrictions,r=Xo(t,e),o={minWidth:eo(n.minWidth)?Kr(n.minWidth):0,minHeight:eo(n.minHeight)?Kr(n.minHeight):0,maxWidth:eo(n.maxWidth)?Kr(n.maxWidth):1/0,maxHeight:eo(n.maxHeight)?Kr(n.maxHeight):1/0};return void 0!==r.left&&void 0!==r.right&&(o.maxWidth=Math.min(o.maxWidth,r.right-r.left)),void 0!==r.bottom&&void 0!==r.top&&(o.maxHeight=Math.min(o.maxHeight,r.bottom-r.top)),Bo(o)}(t,e)}function Xo(t,e){return Xr(e.positionRestrictions)?e.positionRestrictions(t,e):e.positionRestrictions}function Yo(t){return t.visibleArea?t.visibleArea.width/t.boundary.width:0}function $o(t){if(Fo(t)){var e=t.coordinates,n=e.width,r=e.height,o=e.left,i=e.top,a=Yo(t);return{width:n/a,height:r/a,left:(o-t.visibleArea.left)/a,top:(i-t.visibleArea.top)/a}}return{left:0,top:0,width:0,height:0}}function qo(t,e){return Wo(Xr(e.aspectRatio)?e.aspectRatio(t,e):e.aspectRatio)}function Ko(t,e){return Xr(e.defaultCoordinates)?e.defaultCoordinates(t,e):e.defaultCoordinates}function Qo(t,e){return Xr(e.defaultVisibleArea)?e.defaultVisibleArea(t,e):e.defaultVisibleArea}function Jo(t){return t.imageSize&&t.imageSize.width&&t.imageSize.height?Ro(t.imageSize,t.transforms.rotate):{width:0,height:0}}function ti(t,e){return!Fo(t)||!Ao(No(t.coordinates),qo(t,e))&&Zo(t.visibleArea,Uo(t,e))&&Zo(t.coordinates,Vo(t,e))&&zo(t.visibleArea,Go(t,e))&&zo(t.coordinates,Xo(t,e))}function ei(t){return so(t)}function ni(t){var e=t.width,n=t.height,r=t.sizeRestrictions||{minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0},o=Wo(t.aspectRatio),i={width:Math.max(r.minWidth,Math.min(r.maxWidth,e)),height:Math.max(r.minHeight,Math.min(r.maxHeight,n))},a=[i];return o&&[o.minimum,o.maximum].forEach((function(t){t&&a.push({width:i.width,height:i.width/t},{width:i.height*t,height:i.height})})),function(t,e,n,r){var o=function(o){return t.reduce((function(t,i){var a=Xr(n)?n(i):n,s=a.maxHeight,c=a.maxWidth,l=a.minWidth,u=a.minHeight,d=Wo(Xr(r)?r(i):r);return Zo(i,o?{maxWidth:c,maxHeight:s}:{maxWidth:c,maxHeight:s,minWidth:l,minHeight:u})&&!Ao(No(i),d)&&i.width&&i.height&&(!t||io(wo(i,e),wo(t,e)))?i:t}),null)};return o()||o(!0)}(a=a.map((function(t){return jo(t,r)})),{width:e,height:n},r,o)}function ri(t,e){var n=ei(t);if(t.visibleArea){var r=Uo(t,e);n.visibleArea=bt(bt({},t.visibleArea),ni({width:t.visibleArea.width,height:t.visibleArea.height,aspectRatio:{minimum:No(n.boundary),maximum:No(n.boundary)},sizeRestrictions:r})),n.visibleArea=xo(n.visibleArea,yo(bo(t.visibleArea),bo(n.visibleArea))),n.visibleArea=_o(n.visibleArea,Go(n,e))}return n}function oi(t,e,n){var r=xo(t,e);return n?_o(r,n):r}function ii(t,e,n,r){void 0===r&&(r=!0);var o=!1===r?fo.unsafe:!0===r?fo.zoom:r,i=qo(t,e),a=Vo(t,e);t.visibleArea&&o===fo.limit&&(a=bt(bt({},a),{minWidth:Math.min(t.visibleArea.width,a.minWidth),minHeight:Math.min(t.visibleArea.height,a.minHeight),maxWidth:Math.min(t.visibleArea.width,a.maxWidth),maxHeight:Math.min(t.visibleArea.height,a.maxHeight)}));var s=Xo(t,e);t.visibleArea&&o===fo.limit&&(s=Do(s,Oo(t.visibleArea)));var c=function(t,e){return oi(t,{left:e.left-(t.left||0),top:e.top-(t.top||0)},s)},l=t.coordinates?bt({},t.coordinates):{left:0,top:0,width:0,height:0};(Array.isArray(n)?n:[n]).forEach((function(n){var r;(r="function"==typeof n?n(bt(bt({},t),{coordinates:l}),e):n)&&(Yr(r.width)&&Yr(r.height)||(l=function(t,e){var n=bt(bt(bt({},t),ni({width:e.width,height:e.height,sizeRestrictions:a,aspectRatio:i})),{left:0,top:0});return c(n,{left:t.left||0,top:t.top||0})}(l,bt(bt({},l),r))),Yr(r.left)&&Yr(r.top)||(l=c(l,bt(bt({},l),r))))}));var u=bt(bt({},ei(t)),{coordinates:l});if(u.visibleArea&&o===fo.zoom){var d=Math.max(0,u.coordinates.width-u.visibleArea.width),f=Math.max(0,u.coordinates.height-u.visibleArea.height),h=Uo(t,e),m=d>f?u.coordinates.width/u.visibleArea.width:u.coordinates.height/u.visibleArea.height;return m>1&&(u.visibleArea=Co(u.visibleArea,Math.min(m,Mo(u.visibleArea,h)))),u.visibleArea=xo(u.visibleArea,So(Io(u.coordinates,Oo(u.visibleArea)))),ri(u,e)}return u}function ai(t,e){if(t.coordinates){var n=ei(t),r=qo(t,e),o=Vo(t,e);return n.coordinates=bt(bt({},t.coordinates),ni({width:t.coordinates.width,height:t.coordinates.height,aspectRatio:r,sizeRestrictions:t.visibleArea?{maxWidth:Math.min(t.visibleArea.width,o.maxWidth),maxHeight:Math.min(t.visibleArea.height,o.maxHeight),minHeight:Math.min(t.visibleArea.height,o.minHeight),minWidth:Math.min(t.visibleArea.width,o.minWidth)}:o})),n.coordinates=xo(n.coordinates,yo(bo(t.coordinates),bo(n.coordinates))),n.coordinates=_o(n.coordinates,t.visibleArea?Do(Oo(t.visibleArea),Xo(n,e)):Xo(n,e)),n}return t}function si(t,e,n,r){void 0===r&&(r=!0);var o=bt(bt({},ei(t)),{visibleArea:n});return o=ri(o,e),r&&(o=ai(o,e)),o}function ci(t,e){var n,r,o,i,a,s=t.boundary,c=t.image,l={boundary:{width:s.width,height:s.height},imageSize:{width:c.width,height:c.height},transforms:{rotate:(null===(n=c.transforms)||void 0===n?void 0:n.rotate)||0,flip:{horizontal:(null===(o=null===(r=c.transforms)||void 0===r?void 0:r.flip)||void 0===o?void 0:o.horizontal)||!1,vertical:(null===(a=null===(i=c.transforms)||void 0===i?void 0:i.flip)||void 0===a?void 0:a.vertical)||!1}},visibleArea:null,coordinates:null};return e.defaultTransforms&&(l.transforms=function(t,e){var n=bt(bt({},t.transforms),{flip:bt({},t.transforms.flip)});if(e.defaultTransforms){var r=Xr(e.defaultTransforms)?e.defaultTransforms(t,e):e.defaultTransforms;Jr(r.rotate)&&(n.rotate=r.rotate),r.flip&&(Qr(r.flip.horizontal)&&(n.flip.horizontal=r.flip.horizontal),Qr(r.flip.vertical)&&(n.flip.vertical=r.flip.vertical))}return n}(l,e)),l=e.priority===mo.visibleArea?ii(l=si(l,e,Qo(l,e),!1),e,Ko(l,e),fo.limit):si(l=ii(l,e,Ko(l,e),fo.unsafe),e,Qo(l,e),!0)}function li(t,e,n){if(Fo(t)){var r=ei(t);return r.coordinates=xo(r.coordinates,n),r.coordinates=_o(r.coordinates,Do(Oo(r.visibleArea),Xo(r,e))),r}return t}function ui(t){var e=t.coordinates,n=t.directions,r=t.positionRestrictions,o=t.sizeRestrictions,i=t.preserveRatio,a=t.allowedDirections,s=t.compensate,c=void 0===s||s,l=bt({},n),u=Eo(e,l).width,d=Eo(e,l).height;u<0&&(l.left<0&&l.right<0?(l.left=-(e.width-o.minWidth)/(l.left/l.right),l.right=-(e.width-o.minWidth)/(l.right/l.left)):l.left<0?l.left=-(e.width-o.minWidth):l.right<0&&(l.right=-(e.width-o.minWidth))),d<0&&(l.top<0&&l.bottom<0?(l.top=-(e.height-o.minHeight)/(l.top/l.bottom),l.bottom=-(e.height-o.minHeight)/(l.bottom/l.top)):l.top<0?l.top=-(e.height-o.minHeight):l.bottom<0&&(l.bottom=-(e.height-o.minHeight)));var f=Lo(Eo(e,l),r),h=po.every((function(t){return!oo(f[(e=t,{left:"right",top:"bottom",right:"left",bottom:"top"}[e])],0)||a[t];var e}));c&&h&&(f.left&&f.left>0&&0===f.right?(l.right+=f.left,l.left-=f.left):f.right&&f.right>0&&0===f.left&&(l.left+=f.right,l.right-=f.right),f.top&&f.top>0&&0===f.bottom?(l.bottom+=f.top,l.top-=f.top):f.bottom&&f.bottom>0&&0===f.top&&(l.top+=f.bottom,l.bottom-=f.bottom),f=Lo(Eo(e,l),r));var m={width:1/0,height:1/0,left:1/0,right:1/0,top:1/0,bottom:1/0};if(po.forEach((function(t){var e=f[t];e&&l[t]&&(m[t]=Math.max(0,1-e/l[t]))})),i){var p=Math.min.apply(Math,po.map((function(t){return m[t]})));p!==1/0&&po.forEach((function(t){l[t]*=p}))}else po.forEach((function(t){m[t]!==1/0&&(l[t]*=m[t])}));if(u=Eo(e,l).width,d=Eo(e,l).height,l.right+l.left&&(u>o.maxWidth?m.width=(o.maxWidth-e.width)/(l.right+l.left):u<o.minWidth&&(m.width=(o.minWidth-e.width)/(l.right+l.left))),l.bottom+l.top&&(d>o.maxHeight?m.height=(o.maxHeight-e.height)/(l.bottom+l.top):d<o.minHeight&&(m.height=(o.minHeight-e.height)/(l.bottom+l.top))),i){var v=Math.min(m.width,m.height);v!==1/0&&po.forEach((function(t){l[t]*=v}))}else m.width!==1/0&&vo.forEach((function(t){l[t]*=m.width})),m.height!==1/0&&go.forEach((function(t){l[t]*=m.height}));return l}function di(t,e,n){return ro(e+n,0)?t/2:ro(e,0)?0:ro(n,0)?t:t*Math.abs(e/(e+n))}function fi(t,e){var n=e.toLowerCase();return{left:t.left+t.width*(-1!==n.indexOf("west")?1:-1!==n.indexOf("east")?0:.5),top:t.top+t.height*(-1!==n.indexOf("north")?1:-1!==n.indexOf("south")?0:.5)}}function hi(t){var e=t.toLowerCase();return{left:-1===e.indexOf("east"),top:-1===e.indexOf("south"),right:-1===e.indexOf("west"),bottom:-1===e.indexOf("north")}}function mi(t,e,n,r,o){var i=r.reference,a=function(t,e){var n=t.toLowerCase(),r={left:-1===n.indexOf("west")?e.left:-e.left,top:-e.top,right:e.left,bottom:e.top};["north","south","center"].every((function(t){return-1===n.indexOf(t)}))&&(r.top=0,r.bottom=0),["west","east","center"].every((function(t){return-1===n.indexOf(t)}))&&(r.left=0,r.right=0);var o=hi(t);return po.forEach((function(t){o[t]||(r[t]=0)})),r}(e,n),s=hi(e),c=function(t,e,n,r){var o=r.aspectRatio,i=r.positionRestrictions,a=r.sizeRestrictions,s=bt({},t);e=bt({},e);var c=n.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};t.width<a.minWidth&&(e.left=0,e.right=0),t.height<a.minHeight&&(e.top=0,e.bottom=0),po.forEach((function(t){c[t]||(e[t]=0)}));var l=Eo(s,e=ui({coordinates:s,directions:e,sizeRestrictions:a,positionRestrictions:i,allowedDirections:c})).width,u=Eo(s,e).height,d=n.preserveAspectRatio?No(s):Ao(l/u,o);if(d){var f=n.respectDirection;if("width"!==f&&"height"!==f&&(f=s.width>=s.height||1===d?"width":"height"),"width"===f){var h=l/d-s.height;if(c.top&&c.bottom){var m=e.top,p=e.bottom;e.bottom=di(h,p,m),e.top=di(h,m,p)}else c.bottom?e.bottom=h:c.top?e.top=h:c.right?e.right=0:c.left&&(e.left=0)}else if("height"===f){var v=s.width-u*d;if(c.left&&c.right){var g=e.left,y=e.right;e.left=-di(v,g,y),e.right=-di(v,y,g)}else c.left?e.left=-v:c.right?e.right=-v:c.top?e.top=0:c.bottom&&(e.bottom=0)}e=ui({directions:e,coordinates:s,sizeRestrictions:a,positionRestrictions:i,preserveRatio:!0,compensate:n.compensate,allowedDirections:c})}return l=Eo(s,e).width,u=Eo(s,e).height,(d=n.preserveAspectRatio?No(s):Ao(l/u,o))&&oo(Math.abs(d-l/u),0)&&po.forEach((function(t){e[t]=0})),oi({width:t.width+e.right+e.left,height:t.height+e.top+e.bottom,left:t.left,top:t.top},{left:-e.left,top:-e.top},i)}(t,a,bt(bt({},r),{allowedDirections:s}),o);return i&&(c=xo(c,yo(fi(i,e),fi(c,e)))),_o(c,o.positionRestrictions)}function pi(t,e,n,r,o){var i=function(t){return t.coordinates?Math.min(t.coordinates.width,t.coordinates.height,20*Yo(t)):1}(t),a=Vo(t,e);return Fo(t)?bt(bt({},ei(t)),{coordinates:mi(t.coordinates,n,r,o,{positionRestrictions:Do(Xo(t,e),Oo(t.visibleArea)),sizeRestrictions:{maxWidth:Math.min(a.maxWidth,t.visibleArea.width),maxHeight:Math.min(a.maxHeight,t.visibleArea.height),minWidth:Math.max(Math.min(a.minWidth,t.visibleArea.width),i),minHeight:Math.max(Math.min(a.minHeight,t.visibleArea.height),i)},aspectRatio:qo(t,e)})}):t}function vi(t,e,n){var r=bt(bt({},ei(t)),{boundary:n});if(r.visibleArea&&r.coordinates&&t.visibleArea){r.visibleArea.height=r.visibleArea.width/No(n),r.visibleArea.top+=(t.visibleArea.height-r.visibleArea.height)/2;var o=Vo(r,e);(Math.max(o.minHeight,r.coordinates.height)-r.visibleArea.height>0||Math.max(o.minWidth,r.coordinates.width)-r.visibleArea.width>0)&&(r.visibleArea=Co(r.visibleArea,Math.max(Math.max(o.minHeight,r.coordinates.height)/r.visibleArea.height,Math.max(o.minWidth,r.coordinates.width)/r.visibleArea.width))),r.visibleArea=jo(r.visibleArea,Uo(r,e));var i=So(Io(r.coordinates,Oo(r.visibleArea)));r.visibleArea.width<r.coordinates.width&&(i.left=0),r.visibleArea.height<r.coordinates.height&&(i.top=0),r.visibleArea=xo(r.visibleArea,i),r.visibleArea=_o(r.visibleArea,Go(r,e)),r=ai(r,e)}return r}function gi(t,e,n){return n.rotate&&(t=function(t,e,n){if(Fo(t)){var r=ei(t),o=Jr(n)?n:n.angle,i=ko(bo(bt({left:0,top:0},Jo(t))),o);r.transforms.rotate+=o,r.coordinates=bt(bt({},ni({sizeRestrictions:Vo(r,e),aspectRatio:qo(r,e),width:r.coordinates.width,height:r.coordinates.height})),ko(bo(r.coordinates),o));var a=!Jr(n)&&n.center?n.center:bo(t.coordinates),s=yo(bo(t.coordinates),ko(bo(t.coordinates),o,a)),c=Jo(r);return r.coordinates.left-=i.left-c.width/2+r.coordinates.width/2-s.left,r.coordinates.top-=i.top-c.height/2+r.coordinates.height/2-s.top,r.visibleArea=jo(r.visibleArea,Ho(Uo(r,e),{minWidth:r.coordinates.width,minHeight:r.coordinates.height})),r.coordinates=_o(r.coordinates,Xo(r,e)),r.visibleArea=xo(r.visibleArea,yo(bo(r.coordinates),bo(t.coordinates))),r.visibleArea=_o(r.visibleArea,Go(r,e)),r}return t}(t,e,n.rotate)),n.flip&&(t=function(t,e,n,r){if(Fo(t)){var o=ei(t),i=t.transforms.rotate,a=Jo(t),s={horizontal:n,vertical:r};if(s.horizontal||s.vertical){var c=ko({left:a.width/2,top:a.height/2},-i),l=ko(bo(o.coordinates),-i),u=ko({left:s.horizontal?c.left-(l.left-c.left):l.left,top:s.vertical?c.top-(l.top-c.top):l.top},i);o.coordinates=xo(o.coordinates,yo(u,bo(o.coordinates))),l=ko(bo(o.visibleArea),-i),u=ko({left:s.horizontal?c.left-(l.left-c.left):l.left,top:s.vertical?c.top-(l.top-c.top):l.top},i),o.visibleArea=xo(o.visibleArea,yo(u,bo(o.visibleArea))),o.visibleArea=_o(o.visibleArea,Go(o,e))}return s.horizontal&&(o.transforms.flip.horizontal=!t.transforms.flip.horizontal),s.vertical&&(o.transforms.flip.vertical=!t.transforms.flip.vertical),o}return t}(t,e,n.flip.horizontal,n.flip.vertical)),(n.move||n.scale)&&(t=function(t,e,n){var r,o,i,a=n.scale,s=void 0===a?1:a,c=n.move,l=void 0===c?{}:c;if(Fo(t)){var u=ei(t),d=1/(Jr(s)?s:s.factor),f=Jr(s)?void 0:s.center,h=!ro(d,1),m=1,p=1;u.visibleArea=xo(u.visibleArea,{left:l.left||0,top:l.top||0});var v=Vo(u,e),g=Xo(u,e),y=Uo(u,e),b={stencil:{minimum:Math.max(v.minWidth?v.minWidth/u.coordinates.width:0,v.minHeight?v.minHeight/u.coordinates.height:0),maximum:Math.min(v.maxWidth?v.maxWidth/u.coordinates.width:1/0,v.maxHeight?v.maxHeight/u.coordinates.height:1/0,Mo(u.coordinates,To(g)))},area:{maximum:Mo(u.visibleArea,y),minimum:(o=u.visibleArea,i=y,Math.max(i.minWidth?i.minWidth/o.width:0,i.minHeight?i.minHeight/o.height:0))}};d&&h&&(d<1?(p=Math.max(d,Math.max(b.area.minimum,b.stencil.minimum)))>1&&(p=1):d>1&&(p=Math.min(d,Math.min(b.area.maximum,b.stencil.maximum)))<1&&(p=1)),p&&(u.visibleArea=Co(u.visibleArea,p,f));var w={left:t.coordinates.left-t.visibleArea.left,right:t.visibleArea.width+t.visibleArea.left-(t.coordinates.width+t.coordinates.left),top:t.coordinates.top-t.visibleArea.top,bottom:t.visibleArea.height+t.visibleArea.top-(t.coordinates.height+t.coordinates.top)};return u.visibleArea=_o(u.visibleArea,{left:void 0!==g.left?g.left-w.left*p:void 0,top:void 0!==g.top?g.top-w.top*p:void 0,bottom:void 0!==g.bottom?g.bottom+w.bottom*p:void 0,right:void 0!==g.right?g.right+w.right*p:void 0}),u.visibleArea=_o(u.visibleArea,Go(u,e)),u.coordinates.width=u.coordinates.width*p,u.coordinates.height=u.coordinates.height*p,u.coordinates.left=u.visibleArea.left+w.left*p,u.coordinates.top=u.visibleArea.top+w.top*p,u.coordinates=_o(u.coordinates,Do(Oo(u.visibleArea),g)),h&&d&&(null===(r=e.transformImage)||void 0===r?void 0:r.adjustStencil)&&(d>1?m=Math.min(b.area.maximum,d)/p:d<1&&(m=Math.max(u.coordinates.height/u.visibleArea.height,u.coordinates.width/u.visibleArea.width,d/p)),1!==m&&(u.visibleArea=Co(u.visibleArea,m,d>1?f:bo(u.coordinates)),u.visibleArea=_o(u.visibleArea,Go(u,e)),u.visibleArea=xo(u.visibleArea,So(Io(u.coordinates,Oo(u.visibleArea)))))),u}return t}(t,e,n)),t}function yi(t,e){if(Fo(t)){var n=ei(t),r=qo(t,e),o=Vo(t,e),i=Uo(t,e),a=Ao(No(t.coordinates),r),s=a?{height:t.coordinates.height,width:t.coordinates.height*a}:t.coordinates;n.coordinates=bt(bt({},n.coordinates),ni({width:s.width,height:s.height,aspectRatio:r,sizeRestrictions:Ho(i,o)})),n.coordinates=xo(n.coordinates,yo(bo(t.coordinates),bo(n.coordinates)));var c=Math.max(n.coordinates.width/n.visibleArea.width,n.coordinates.height/n.visibleArea.height,1);return n.visibleArea=bt(bt({},t.visibleArea),ni({width:t.visibleArea.width*c,height:t.visibleArea.height*c,aspectRatio:{minimum:No(n.boundary),maximum:No(n.boundary)},sizeRestrictions:i})),n.visibleArea=xo(n.visibleArea,yo(bo(t.visibleArea),bo(n.visibleArea))),n.visibleArea=_o(n.visibleArea,Go(n,e)),n.coordinates=_o(n.coordinates,Do(Oo(n.visibleArea),Xo(n,e))),n}return t}function bi(t,e){var n=Yo(t);return t.visibleArea?{left:e.left*n+t.visibleArea.left,top:e.top*n+t.visibleArea.top}:e}function wi(t,e){if(t){var n=Math.abs(t.transforms.rotate%180);return n<=45||n>=135?e:{horizontal:e.vertical,vertical:e.horizontal}}return e}function Ei(t,e){var n=Yo(t);return{left:Jr(e.left)?e.left*n:0,top:Jr(e.top)?e.top*n:0}}function Si(t,e){if(t&&e){var n=e();n&&t(n)}}function xi(t,e){t.forEach((function(t){Si(t,e)}))}!function(t){t.limit="limit",t.zoom="zoom",t.unsafe="unsafe"}(fo||(fo={})),function(t){t.fillArea="fillArea",t.fitArea="fitArea",t.stencil="stencil",t.none="none"}(ho||(ho={})),function(t){t.coordinates="coordinates",t.visibleArea="visibleArea"}(mo||(mo={}));var Oi=function(){var t=this;this.getTransitions=function(){var e=t.getData(),n=t.getProps().transitions;return bt(bt({},qr(n,{timingFunction:"ease-in-out",duration:350})),{active:e.transitions})},this.getInteractions=function(){return so(t.getData().interactions)},this.hasInteractions=function(){return Hr(t.getData().interactions)},this.startTransitions=function(){var e=t.getProps(),n=e.onTransitionsStart,r=e.onUpdate,o=e.getInstance,i=t.getData(),a=i.transitions,s=wt(i,["transitions"]);t.setData(bt(bt({},s),{transitions:!0})),a||xi([n,r],o),t.endTransitions()},this.endTransitions=uo((function(){var e=t.getProps(),n=e.onTransitionsEnd,r=e.onUpdate,o=e.getInstance;t.setData(bt(bt({},t.getData()),{transitions:!1})),xi([n,r],o)}),(function(){return t.getTransitions().duration})),this.applyPostProcess=function(e,n){var r,o=t.getProps(),i=o.settings,a=o.postProcess,s=e.name,c=e.interaction,l=void 0!==c&&c,u=e.transitions,d=void 0!==u&&u,f=e.immediately,h={name:s,interaction:l,transitions:d,immediately:void 0!==f&&f};return r=a,Array.isArray(r)?a.reduce((function(t,e){return e(t,i,h)}),n):Xr(a)?a(n,i,h):n},this.updateState=function(e,n,r){void 0===n&&(n={}),void 0===r&&(r=[]);var o=n.transitions,i=void 0!==o&&o,a=t.getProps(),s=a.onTransitionsStart,c=a.getInstance,l=a.onChange,u=a.onUpdate,d=a.settings,f=t.getData(),h=Xr(e)?e(f.state,d):e,m=h?.001*Yo(h):.001,p=!co(f.state,h,m),v=["coordinates","boundary","visibleArea","imageSize","transforms"].some((function(t){var e;return!co(null===(e=f.state)||void 0===e?void 0:e[t],null==h?void 0:h[t],m)})),g=f;p&&(i&&v&&t.endTransitions(),g=bt(bt({},g),{state:ei(h),transitions:i&&v}),t.setData(g),Si(l,c)),g.transitions&&!f.transitions&&Si(s,c),xi(Ot(r,[u]),c)},this.setInteractions=function(e){var n=t.getProps(),r=n.onInteractionStart,o=n.onInteractionEnd,i=n.getInstance,a=t.getInteractions(),s=bt(bt({},a),e);if(co(a,s)||t.setData(bt(bt({},t.getData()),{interactions:s})),Hr(a)!==Hr(s))if(Hr(a)){var c=t.getData().state;t.updateState((function(){return c&&t.applyPostProcess({name:"interactionEnd",immediately:!0,transitions:!0},c)}),{transitions:!0},[o])}else Si(r,i)},this.resetState=function(e,n){t.updateState(t.createDefaultState(e,n))},this.clear=function(){t.updateState(null)},this.reconcileState=function(e){void 0===e&&(e={});var n=t.getProps(),r=n.reconcileStateAlgorithm,o=n.settings,i=t.getData().state,a=e.transitions,s=void 0!==a&&a;if(i&&!ti(i,o)){var c=(r||yi)(i,o);c=t.applyPostProcess({name:"reconcileState",immediately:!0,transitions:s},c),t.updateState(c,{transitions:s})}},this.transformImage=function(e,n){void 0===n&&(n={});var r=n.transitions,o=void 0===r||r,i=n.interaction,a=void 0===i||i,s=n.immediately,c=void 0!==s&&s,l=n.normalize,u=void 0===l||l,d=t.getProps(),f=d.transformImageAlgorithm,h=d.onTransformImage,m=d.onTransformImageEnd,p=d.settings,v=t.getData().state,g=[];if(v){u&&(e=function(t,e){return e.scale&&(e.scale={factor:Jr(e.scale)?e.scale:e.scale.factor,center:!Jr(e.scale)&&e.scale.center?bi(t,e.scale.center):void 0}),e.rotate&&(e.rotate={angle:Jr(e.rotate)?e.rotate:e.rotate.angle,center:!Jr(e.rotate)&&e.rotate.center?bi(t,e.rotate.center):void 0}),e.move&&(e.move=Ei(t,e.move)),e}(v,e));var y=t.applyPostProcess({name:"transformImage",transitions:o,immediately:c},(f||gi)(v,p,e));g.push(h),a?t.setInteractions({transformImage:{rotate:!Yr(e.rotate),flip:!Yr(e.flip),scale:!Yr(e.scale),move:!Yr(e.move)}}):(y=t.applyPostProcess({name:"transformImageEnd",transitions:o,immediately:!0},y),g.push(m)),t.updateState(y,{transitions:c&&o},g)}},this.transformImageEnd=function(e){void 0===e&&(e={});var n=e.immediately,r=void 0===n||n,o=e.transitions,i=void 0===o||o,a=t.getData().state,s=t.getProps().onTransformImageEnd;t.updateState((function(){return a&&t.applyPostProcess({name:"transformImageEnd",immediately:r,transitions:i},a)}),{transitions:i},[s]),t.setInteractions({transformImage:{rotate:!1,flip:!1,scale:!1,move:!1}})},this.zoomImage=function(e,n){void 0===n&&(n={});var r=n.interaction,o=void 0!==r&&r,i=n.immediately,a=void 0===i||i,s=n.transitions,c=void 0===s||s,l=n.normalize,u=void 0!==l&&l;t.transformImage({scale:e},{interaction:o,immediately:a,transitions:c,normalize:u})},this.moveImage=function(e,n,r){void 0===r&&(r={});var o=r.interaction,i=void 0!==o&&o,a=r.immediately,s=void 0===a||a,c=r.transitions,l=void 0===c||c,u=r.normalize,d=void 0!==u&&u;t.transformImage({move:{left:e,top:n}},{interaction:i,immediately:s,transitions:l,normalize:d})},this.flipImage=function(e,n,r){void 0===r&&(r={});var o=r.interaction,i=void 0!==o&&o,a=r.immediately,s=void 0===a||a,c=r.transitions,l=void 0===c||c,u=r.normalize,d=void 0===u||u,f=t.getState(),h={horizontal:e,vertical:n};t.transformImage({flip:f&&d?wi(f,h):h},{interaction:i,immediately:s,transitions:l})},this.rotateImage=function(e,n){void 0===n&&(n={});var r=n.interaction,o=void 0!==r&&r,i=n.immediately,a=void 0===i||i,s=n.transitions,c=void 0===s||s,l=n.normalize,u=void 0!==l&&l;t.transformImage({rotate:e},{interaction:o,immediately:a,transitions:c,normalize:u})},this.reset=function(e,n){t.resetState(e,n)},this.setState=function(e,n){void 0===n&&(n={});var r=t.getSettings(),o=t.getData().state,i=n.transitions,a=void 0===i||i,s=n.immediately,c=void 0!==s&&s,l=n.interaction,u=void 0!==l&&l,d=n.postprocess,f=void 0!==d&&d,h=e&&(Xr(e)?e(o,r):bt(bt({},o),e));t.updateState((function(){return f?h&&t.applyPostProcess({name:"setState",immediately:c,transitions:a,interaction:u},h):h}),{transitions:a})},this.setCoordinates=function(e,n){void 0===n&&(n={});var r=t.getData().state,o=t.getProps(),i=o.setCoordinatesAlgorithm,a=o.settings,s=n.transitions,c=void 0===s||s,l=n.immediately,u=void 0===l||l;t.updateState((function(){return r&&t.applyPostProcess({name:"setCoordinates",immediately:u,transitions:c},(i||ii)(r,a,e,fo.zoom))}),{transitions:c})},this.setVisibleArea=function(e,n){void 0===n&&(n={});var r=n.transitions,o=void 0===r||r,i=n.immediately,a=void 0===i||i,s=t.getData().state,c=t.getProps(),l=c.setVisibleAreaAlgorithm,u=c.settings;t.updateState((function(){return s&&t.applyPostProcess({name:"setVisibleArea",immediately:a,transitions:o},(l||si)(s,u,e))}),{transitions:o})},this.setBoundary=function(e,n){void 0===n&&(n={});var r=t.getData().state,o=t.getProps(),i=o.setBoundaryAlgorithm,a=o.settings,s=n.transitions,c=void 0!==s&&s,l=n.immediately,u=void 0===l||l;e?t.updateState((function(){return r&&t.applyPostProcess({name:"setBoundary",immediately:u,transitions:c},(i||vi)(r,a,e))})):t.updateState(null)},this.moveCoordinates=function(e,n){void 0===n&&(n={});var r=t.getData(),o=t.getProps(),i=o.moveCoordinatesAlgorithm,a=o.onMove,s=o.onMoveEnd,c=o.settings,l=n.interaction,u=void 0===l||l,d=n.transitions,f=void 0!==d&&d,h=n.immediately,m=void 0!==h&&h,p=n.normalize,v=void 0===p||p,g=[];if(!r.transitions&&r.state){var y=v?Ei(r.state,e):function(t){return{left:Jr(t.left)?t.left:0,top:Jr(t.top)?t.top:0}}(e),b=t.applyPostProcess({name:"moveCoordinates",interaction:u,immediately:m,transitions:f},(i||li)(r.state,c,y));g.push(a),u?t.setInteractions({moveCoordinates:!0}):(b=t.applyPostProcess({name:"moveCoordinatesEnd",interaction:u,immediately:m,transitions:f},b),g.push(s)),t.updateState(b,{transitions:m&&f},g)}},this.moveCoordinatesEnd=function(e){void 0===e&&(e={});var n=t.getData().state,r=t.getProps().onMoveEnd,o=e.transitions,i=void 0===o||o,a=e.immediately,s=void 0!==a&&a;t.updateState((function(){return n&&t.applyPostProcess({name:"moveCoordinatesEnd",transitions:i,immediately:s},n)}),{transitions:i},[r]),t.setInteractions({moveCoordinates:!1})},this.resizeCoordinates=function(e,n,r,o){void 0===o&&(o={});var i=t.getData().state,a=t.getProps(),s=a.resizeCoordinatesAlgorithm,c=a.onResize,l=a.onResizeEnd,u=a.settings,d=o.interaction,f=void 0===d||d,h=o.transitions,m=void 0!==h&&h,p=o.immediately,v=void 0!==p&&p,g=o.normalize,y=void 0===g||g;if(!t.getTransitions().active&&i){var b=[],w=y?function(t,e){var n=Yo(t);return{left:Jr(e.left)?e.left*n:0,top:Jr(e.top)?e.top*n:0,right:Jr(e.right)?e.right*n:0,bottom:Jr(e.bottom)?e.bottom*n:0}}(i,n):function(t){return{left:Jr(t.left)?t.left:0,top:Jr(t.top)?t.top:0,right:Jr(t.right)?t.right:0,bottom:Jr(t.bottom)?t.bottom:0}}(n),E=t.applyPostProcess({name:"resizeCoordinates",interaction:f,immediately:v,transitions:m},(s||pi)(i,u,e,w,$r(r)?r:{}));b.push(c),f?t.setInteractions({resizeCoordinates:!0}):(E=t.applyPostProcess({name:"resizeCoordinatesEnd",interaction:f,immediately:v,transitions:m},E),b.push(l)),t.updateState(E,{transitions:v&&m},b)}},this.resizeCoordinatesEnd=function(e){void 0===e&&(e={});var n=t.getProps().onResizeEnd,r=t.getData().state,o=e.transitions,i=void 0===o||o,a=e.immediately,s=void 0!==a&&a;t.updateState((function(){return r&&t.applyPostProcess({name:"resizeCoordinatesEnd",transitions:i,immediately:s},r)}),{transitions:i},[n]),t.setInteractions({resizeCoordinates:!1})},this.getStencilCoordinates=function(){return $o(t.getData().state)},this.getCoordinates=function(e){void 0===e&&(e={});var n=t.getData().state,r=t.getProps().settings;if(n&&n.coordinates){var o=e.round;return void 0===o||o?function(t,e){if(Fo(t)){var n=Vo(t,e),r=Xo(t,e),o={width:Math.round(t.coordinates.width),height:Math.round(t.coordinates.height),left:Math.round(t.coordinates.left),top:Math.round(t.coordinates.top)};return o.width>n.maxWidth?o.width=Math.floor(t.coordinates.width):o.width<n.minWidth&&(o.width=Math.ceil(t.coordinates.width)),o.height>n.maxHeight?o.height=Math.floor(t.coordinates.height):o.height<n.minHeight&&(o.height=Math.ceil(t.coordinates.height)),_o(o,r)}return null}(n,r):bt({},n.coordinates)}return null},this.getVisibleArea=function(){var e=t.getData().state;return(null==e?void 0:e.visibleArea)?bt({},e.visibleArea):null},this.getSettings=function(){var e=t.getProps().settings;return bt({},e)},this.getState=function(){return ei(t.getData().state)},this.getTransforms=function(){var e=t.getData().state;return e?so(e.transforms):{rotate:0,flip:{horizontal:!1,vertical:!1}}},this.createDefaultState=function(e,n){var r=t.getProps(),o=r.createStateAlgorithm,i=r.settings;return t.applyPostProcess({name:"createState",immediately:!0,transitions:!1},(o||ci)({image:n,boundary:e},i))},this.isConsistent=function(){var e=t.getData().state,n=t.getProps().settings;return!e||ti(e,n)}};function Ci(t,e){var n,r=t.imageSize,o=t.visibleArea,i=Vo(t,e),a=qo(t,e);if(o)n=o;else{var s=To(Xo(t,e));n={width:Math.max(s.minWidth,Math.min(s.maxWidth,r.width)),height:Math.max(s.minHeight,Math.min(s.maxHeight,r.height))}}var c=Math.min(a.maximum||1/0,Math.max(a.minimum||0,No(n))),l=n.width<n.height?{width:.8*n.width,height:.8*n.width/c}:{height:.8*n.height,width:.8*n.height*c};return ni(bt(bt({},l),{aspectRatio:a,sizeRestrictions:i}))}function Ni(t,e){return function(t){return{minWidth:eo(t.minWidth)?Kr(t.minWidth):0,minHeight:eo(t.minHeight)?Kr(t.minHeight):0,maxWidth:eo(t.maxWidth)?Kr(t.maxWidth):1/0,maxHeight:eo(t.maxHeight)?Kr(t.maxHeight):1/0}}(e)}function Mi(t){var e=t.visibleArea,n=t.coordinates,r=e||Jo(t);return{left:(e?e.left:0)+r.width/2-(n?n.width/2:0),top:(e?e.top:0)+r.height/2-(n?n.height/2:0)}}function Ai(t){return function(e,n){var r=Xr(t)?t(e,n):t;return Ho(Ni(0,n),r)}}function Pi(t){return bt(bt({},t),{sizeRestrictions:function(e,n){return t.sizeRestrictions?Xr(t.sizeRestrictions)?t.sizeRestrictions(e,n):t.sizeRestrictions:Ni(0,n)},areaPositionRestrictions:function(e,n){return t.areaPositionRestrictions?Xr(t.areaPositionRestrictions)?t.areaPositionRestrictions(e,n):t.areaPositionRestrictions:function(t,e){var n=t.visibleArea,r=t.boundary,o=e.imageRestriction,i=Jo(t),a={};return o===ho.fillArea?a={left:0,top:0,right:i.width,bottom:i.height}:o===ho.fitArea&&(No(r)>No(i)?(a={top:0,bottom:i.height},n&&(n.width>i.width?(a.left=-(n.width-i.width)/2,a.right=i.width-a.left):(a.left=0,a.right=i.width))):(a={left:0,right:i.width},n&&(n.height>i.height?(a.top=-(n.height-i.height)/2,a.bottom=i.height-a.top):(a.top=0,a.bottom=i.height)))),a}(e,n)},areaSizeRestrictions:function(e,n){return t.areaSizeRestrictions?Xr(t.areaSizeRestrictions)?t.areaSizeRestrictions(e,n):t.areaSizeRestrictions:function(t,e){var n=t.boundary,r=e.imageRestriction,o=Jo(t),i={minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0};return r===ho.fillArea?(i.maxWidth=o.width,i.maxHeight=o.height):r===ho.fitArea&&(No(n)>No(o)?(i.maxHeight=o.height,i.maxWidth=o.height*No(n)):(i.maxWidth=o.width,i.maxHeight=o.width/No(n))),i}(e,n)},positionRestrictions:function(e,n){return t.positionRestrictions?Xr(t.positionRestrictions)?t.positionRestrictions(e,n):t.positionRestrictions:function(t,e){var n=Jo(t),r={};return e.imageRestriction&&"none"!==e.imageRestriction&&(r={left:0,top:0,right:n.width,bottom:n.height}),r}(e,n)},defaultCoordinates:function(e,n){if(t.defaultCoordinates)return Xr(t.defaultCoordinates)?t.defaultCoordinates(e,n):t.defaultCoordinates;var r=t.defaultSize;r||(r=Ci);var o=Xr(r)?r(e,n):r,i=t.defaultPosition||Mi;return[o,function(t){return bt({},Xr(i)?i(t,n):i)}]},defaultVisibleArea:function(e,n){return t.defaultVisibleArea?Xr(t.defaultVisibleArea)?t.defaultVisibleArea(e,n):t.defaultVisibleArea:function(t,e){var n=t.coordinates,r=t.boundary,o=Jo(t),i=No(r);if(n){var a={height:Math.max(n.height,o.height),width:Math.max(n.width,o.width)},s={left:0,top:0,width:No(a)>i?a.width:a.height*i,height:No(a)>i?a.width/i:a.height};(s=jo(s,Uo(t,e))).left=n.left+n.width/2-s.width/2,s.top=n.top+n.height/2-s.height/2;var c=Lo(n,Oo(bt({left:0,top:0},o))),l={};return!c.left&&!c.right&&s.width<=o.width&&(l.left=0,l.right=o.width),!c.top&&!c.bottom&&s.height<=o.height&&(l.top=0,l.bottom=o.height),_o(s,l)}var u=No(o),d={height:u<i?o.height:o.width/i,width:u<i?o.height*i:o.width};return{left:o.width/2-d.width/2,top:o.height/2-d.height/2,width:d.width,height:d.height}}(e,n)},aspectRatio:function(e,n){return Wo(Xr(t.aspectRatio)?t.aspectRatio(e,n):t.aspectRatio)}})}var Li=4;function ji(t){return new Promise((function(e,n){try{if(t)if(/^data:/i.test(t))e(function(t){t=t.replace(/^data:([^;]+);base64,/gim,"");for(var e=atob(t),n=e.length,r=new ArrayBuffer(n),o=new Uint8Array(r),i=0;i<n;i++)o[i]=e.charCodeAt(i);return r}(t));else if(/^blob:/i.test(t)){var r=new FileReader;r.onload=function(t){var n;e(null===(n=t.target)||void 0===n?void 0:n.result)},i=t,a=function(t){r.readAsArrayBuffer(t)},(s=new XMLHttpRequest).open("GET",i,!0),s.responseType="blob",s.onload=function(){200!=this.status&&0!==this.status||a(this.response)},s.send()}else{var o=new XMLHttpRequest;o.onreadystatechange=function(){o.readyState===Li&&(200===o.status||0===o.status?e(o.response):n("Warning: could not load an image to parse its orientation"))},o.onprogress=function(){"image/jpeg"!==o.getResponseHeader("content-type")&&o.abort()},o.withCredentials=!1,o.open("GET",t,!0),o.responseType="arraybuffer",o.send(null)}else n("Error: the image is empty")}catch(t){n(t)}var i,a,s}))}function Ri(t){var e=t.rotate,n=void 0===e?0:e,r=t.flip,o=void 0===r?{horizontal:!1,vertical:!1}:r,i=t.scale,a=void 0===i?1:i;return" rotate("+n+"deg) scaleX("+a*(o.horizontal?-1:1)+") scaleY("+a*(o.vertical?-1:1)+")"}function ki(t){try{var e,n=new DataView(t),r=void 0,o=void 0,i=void 0,a=void 0;if(255===n.getUint8(0)&&216===n.getUint8(1))for(var s=n.byteLength,c=2;c+1<s;){if(255===n.getUint8(c)&&225===n.getUint8(c+1)){i=c;break}c++}if(i&&(r=i+10,"Exif"===function(t,e,n){var r,o="";for(r=e,n+=e;r<n;r++)o+=String.fromCharCode(t.getUint8(r));return o}(n,i+4,4))){var l=n.getUint16(r);if(((o=18761===l)||19789===l)&&42===n.getUint16(r+2,o)){var u=n.getUint32(r+4,o);u>=8&&(a=r+u)}}if(a)for(var d=n.getUint16(a,o),f=0;f<d;f++){c=a+12*f+2;if(274===n.getUint16(c,o)){c+=8,e=n.getUint16(c,o),n.setUint16(c,1,o);break}}return e}catch(t){return null}}function Ti(t){var e=t.src,n=t.arrayBuffer,r=void 0===n?null:n,o=t.orientation,i=void 0===o?null:o,a={src:e,arrayBuffer:r,revoke:!1,transforms:{flip:{horizontal:!1,vertical:!1},rotate:0}};return r&&i&&i>1?Ur(e)||!Gr(e)?(a.src=URL.createObjectURL(new Blob([r])),a.revoke=!0):a.src=function(t){for(var e=[],n=new Uint8Array(t);n.length>0;){var r=n.subarray(0,8192);e.push(String.fromCharCode.apply(null,Array.from?Array.from(r):r.slice())),n=n.subarray(8192)}return"data:image/jpeg;base64,"+btoa(e.join(""))}(r):a.src=e,i&&(a.transforms=function(t){var e={flip:{horizontal:!1,vertical:!1},rotate:0};if(t)switch(t){case 2:e.flip.horizontal=!0;break;case 3:e.rotate=-180;break;case 4:e.flip.vertical=!0;break;case 5:e.rotate=90,e.flip.vertical=!0;break;case 6:e.rotate=90;break;case 7:e.rotate=90,e.flip.horizontal=!0;break;case 8:e.rotate=-90}return e}(i)),a}function Di(t,e){return void 0===e&&(e={}),function(t,e){void 0===e&&(e={});var n=e.checkOrientation,r=e.parse;return new Promise((function(e){n||r?ji(t).then((function(n){var r=ki(n);e(Ti(n?{src:t,arrayBuffer:n,orientation:r}:{src:t,arrayBuffer:null,orientation:null}))})).catch((function(n){console.warn(n),e(Ti({src:t}))})):e(Ti({src:t}))}))}(t,bt(bt({},e),{crossOrigin:Vr(t)&&e.crossOrigin})).then((function(t){return new Promise((function(n,r){(function(t,e){return void 0===e&&(e={}),new Promise((function(n,r){var o=document.createElement("img");e.crossOrigin&&(o.crossOrigin=!0!==e.crossOrigin?e.crossOrigin:"anonymous"),o.src=t,o.style.visibility="hidden",o.style.position="fixed",document.body.appendChild(o),o.complete?(n(o),document.body.removeChild(o)):(o.addEventListener("load",(function(){n(o),document.body.removeChild(o)})),o.addEventListener("error",(function(){r(null),document.body.removeChild(o)})))}))})(t.src,e).then((function(e){n(bt(bt({},t),{width:e.naturalWidth,height:e.naturalHeight}))})).catch((function(){r(null)}))}))}))}function Ii(t,e,n,r,o){void 0===o&&(o=null);var i=t.width>t.height?{width:Math.min(512,t.width),height:Math.min(512,t.width)/(t.width/t.height)}:{height:Math.min(512,t.height),width:Math.min(512,t.height)*(t.width/t.height)},a=Jo(e),s={rotate:e.transforms.rotate,flip:{horizontal:e.transforms.flip.horizontal,vertical:e.transforms.flip.vertical},translateX:n.left/r,translateY:n.top/r,scale:1/r},c={left:(i.width-a.width)/(2*r),top:(i.height-a.height)/(2*r)},l={left:(1-1/r)*i.width/2,top:(1-1/r)*i.height/2},u=bt(bt({},s),{scale:s.scale*(t.width/i.width)}),d={width:i.width+"px",height:i.height+"px",left:"0px",top:"0px",transition:"none",transform:"translate3d("+(-c.left-l.left-s.translateX)+"px, "+(-c.top-l.top-s.translateY)+"px, 0px)"+Ri(u),willChange:"none"};return o&&o.active&&(d.willChange="transform",d.transition=o.duration+"ms "+o.timingFunction),d}function _i(t,e,n){e.style.width="0px",e.style.height="0px",e.style.width=Math.max(t.clientWidth,n.width)+"px";var r=n.width/n.height;e.style.height=Math.max(t.clientHeight,e.clientWidth/r)+"px",e.style.width=e.clientHeight*r+"px"}function Wi(t,e,n){e.style.width="0px",e.style.height="0px",e.style.width=Math.max(t.getBoundingClientRect().width,n.width)+"px";var r=n.width/n.height;e.style.height=Math.max(t.getBoundingClientRect().height,e.getBoundingClientRect().width/r)+"px",e.style.width=e.getBoundingClientRect().height*r+"px",e.clientWidth/e.clientHeight>t.clientWidth/t.clientHeight?e.clientWidth>t.clientWidth&&(e.style.width=t.clientWidth+"px",e.style.height=t.clientWidth/r+"px"):e.clientHeight>t.clientHeight&&(e.style.height=t.clientHeight+"px",e.style.width=t.clientHeight*r+"px")}function Zi(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height}}function zi(t,e,n,r,o){if(Fo(t)){var i=t.transforms,a=t.coordinates,s=0!==i.rotate||i.flip.horizontal||i.flip.vertical?function(t,e,n){var r=n.rotate,o=n.flip,i={width:"naturalWidth"in e?e.naturalWidth:e.width,height:"naturalHeight"in e?e.naturalHeight:e.height},a=Ro(i,r),s=t.getContext("2d");if(t.height=a.height,t.width=a.width,s){s.save();var c=ko(bo(bt({left:0,top:0},i)),r);s.translate(-(c.left-a.width/2),-(c.top-a.height/2)),s.rotate(r*Math.PI/180),s.translate(o.horizontal?i.width:0,o.vertical?i.height:0),s.scale(o.horizontal?-1:1,o.vertical?-1:1),s.drawImage(e,0,0,i.width,i.height),s.restore()}return t}(r,e,i):e,c=bt({minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,maxArea:1/0,imageSmoothingEnabled:!0,imageSmoothingQuality:"high",fillColor:"transparent"},o),l=function(t){return t.find((function(t){return eo(t)}))},u=ni({sizeRestrictions:{minWidth:l([c.width,c.minWidth])||0,minHeight:l([c.height,c.minHeight])||0,maxWidth:l([c.width,c.maxWidth])||1/0,maxHeight:l([c.height,c.maxHeight])||1/0},width:a.width,height:a.height,aspectRatio:{minimum:a.width/a.height,maximum:a.width/a.height}});if(c.maxArea&&u.width*u.height>c.maxArea){var d=Math.sqrt(c.maxArea/(u.width*u.height));u={width:Math.round(d*u.width),height:Math.round(d*u.height)}}return function(t,e,n,r,o){t.width=r?r.width:n.width,t.height=r?r.height:n.height;var i=t.getContext("2d");if(i){i.clearRect(0,0,t.width,t.height),o&&(o.imageSmoothingEnabled&&(i.imageSmoothingEnabled=o.imageSmoothingEnabled),o.imageSmoothingQuality&&(i.imageSmoothingQuality=o.imageSmoothingQuality),o.fillColor&&(i.fillStyle=o.fillColor,i.fillRect(0,0,t.width,t.height),i.save()));var a=n.left<0?-n.left:0,s=n.top<0?-n.top:0;i.drawImage(e,n.left+a,n.top+s,n.width,n.height,a,s,t.width,t.height)}return t}(n,s,a,u,c)}return null}var Bi={linear:function(t){return t},"ease-in":function(t){return Math.pow(t,1.675)},"ease-out":function(t){return 1-Math.pow(1-t,1.675)},"ease-in-out":function(t){return.5*(Math.sin((t-.5)*Math.PI)+1)}},Hi=function(){function t(){this.active=!1}return t.prototype.start=function(t){var e;this.onStart=t.onStart,this.onProgress=t.onProgress,this.onStop=t.onStop,this.active||null===(e=this.onStart)||void 0===e||e.call(this),this.id&&window.cancelAnimationFrame(this.id),this.startTime=performance.now(),this.timingFunction=t.timingFunction,this.endTime=this.startTime+t.duration,this.active=!0,this.animate()},t.prototype.animate=function(){var t=this;if(this.startTime&&this.endTime){var e=Bi[this.timingFunction];e||(e=Bi["ease-out"]);var n=1-(this.endTime-performance.now())/(this.endTime-this.startTime),r=Math.min(1,e(n));this.onProgress&&this.onProgress(r),n<1?this.id=window.requestAnimationFrame((function(){return t.animate()})):this.stop()}else this.stop()},t.prototype.stop=function(){this.active=!1,this.id&&window.cancelAnimationFrame(this.id),this.onStop&&this.onStop()},t}();function Fi(t,e){var n=e.getBoundingClientRect(),r=n.left,o=n.top,i={left:0,top:0},a=0;return t.forEach((function(e){i.left+=(e.clientX-r)/t.length,i.top+=(e.clientY-o)/t.length})),t.forEach((function(t){a+=no({left:i.left,top:i.top},{left:t.clientX-r,top:t.clientY-o})})),{centerMass:i,spread:a,count:t.length}}function Ui(t,e,n){void 0===n&&(n=.1);var r,o,i=e.getBoundingClientRect(),a=i.left,s=i.top;return{scale:{factor:1-n*(r=t.deltaY||t.detail||t.wheelDelta,0===(o=+r)||to(o)?o:o>0?1:-1),center:{left:t.clientX-a,top:t.clientY-s}}}}function Gi(t,e){return t.aspectRatio?{}:{aspectRatio:Wo(Xr(e.aspectRatio)?e.aspectRatio():e.aspectRatio)}}var Vi=n(4184),Xi=n.n(Vi);function Yi(t,e){var n=Gi({},e);return{stencilSize:function(e,r){var o,i,a=Xr(t.stencilSize)?t.stencilSize(e,r):t.stencilSize;return ni(bt(bt({},a),{aspectRatio:(o=n.aspectRatio,i=Wo(No(a)),i?o?{minimum:Math.min(o.maximum,Math.max(o.minimum,i.minimum)),maximum:Math.max(o.minimum,Math.min(o.maximum,i.maximum))}:i:o)}))}}}function $i(t,e){var n=t.boundary,r=Xr(e.stencilSize)?e.stencilSize(t,e):e.stencilSize;return(r.width>n.width||r.height>n.height)&&(r=ni({sizeRestrictions:{maxWidth:n.width,maxHeight:n.height,minWidth:0,minHeight:0},width:r.width,height:r.height,aspectRatio:{minimum:No(r),maximum:No(r)}})),r}function qi(t,e){var n=$i(t,bt(bt({},e),{stencilSize:e.stencilSize})),r=Uo(t,e);return{maxWidth:r.maxWidth*n.width/t.boundary.width,maxHeight:r.maxHeight*n.height/t.boundary.height,minWidth:0,minHeight:0}}function Ki(t,e){var n,r,o=t.imageSize,i=t.visibleArea,a=t.boundary,s=Vo(t,e),c=qo(t,e),l=Xr(e.stencilSize)?e.stencilSize(t,e):e.stencilSize,u=i||o;return No(u)>No(a)?r=(n=l.height*u.height/a.height)*No(l):n=(r=l.width*u.width/a.width)/No(l),ni({width:r,height:n,aspectRatio:c,sizeRestrictions:s})}function Qi(t,e){var n=No($i(t,e));return{minimum:n,maximum:n}}function Ji(t,e,n){return n&&n.immediately?function(t,e){if(Fo(t)){var n=ei(t),r=$i(t,e);n.visibleArea=Co(n.visibleArea,n.coordinates.width*n.boundary.width/(n.visibleArea.width*r.width));var o=Po(n.visibleArea,Uo(n,e));return 1!==o&&(n.visibleArea=Co(n.visibleArea,o),n.coordinates=Co(n.coordinates,o)),n.visibleArea=xo(n.visibleArea,yo(bo(n.coordinates),bo(n.visibleArea))),n.visibleArea=_o(n.visibleArea,Go(n,e)),n.coordinates=_o(n.coordinates,Do(Oo(n.visibleArea),Go(n,e))),n}return t}(t,e):t}function ta(t,e,n){return n.immediately?function(t,e){if(Fo(t)){var n=ei(t),r={width:0,height:0};No(n.boundary)>No(n.coordinates)?(r.height=.8*n.boundary.height,r.width=r.height*No(n.coordinates)):(r.width=.8*n.boundary.width,r.height=r.width*No(n.coordinates)),n.visibleArea=Co(n.visibleArea,n.coordinates.width*n.boundary.width/(n.visibleArea.width*r.width));var o=Po(n.visibleArea,Uo(n,e));return n.visibleArea=Co(n.visibleArea,o),1!==o&&(r.height/=o,r.width/=o),n.visibleArea=xo(n.visibleArea,yo(bo(n.coordinates),bo(n.visibleArea))),n.visibleArea=_o(n.visibleArea,Go(n,e)),n.coordinates=_o(n.coordinates,Do(Oo(n.visibleArea),Xo(n,e))),n}return t}(t,e):t}function ea(){var t=(0,r.useRef)([]);return function(e){-1===t.current.indexOf(e)&&t.current.push(e)}}var na=function(t,e){var n,o=(n=(0,r.useRef)(!0)).current?(n.current=!1,!0):n.current;(0,r.useEffect)((function(){if(!o)return t()}),e)};var ra=function(t){function e(e,n){var r=t.call(this)||this;return r.props=e,r.notify=n,r.data={state:null,transitions:!1,interactions:{moveCoordinates:!1,resizeCoordinates:!1,transformImage:{rotate:!1,move:!1,scale:!1,flip:!1}}},r}return yt(e,t),e.prototype.getProps=function(){return this.props()},e.prototype.setData=function(t){this.data=t,this.notify()},e.prototype.getData=function(){return this.data},e}(Oi);function oa(){var t=xt((0,r.useState)({}),2);t[0];var e=t[1];return function(){e({})}}function ia(t){var e=oa(),n=function(t){var e=(0,r.useRef)(t);return e.current=t,function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.current.apply(e,Ct([],xt(t),!1))}}((function(){var e=t(),n=e.settings,r=wt(e,["settings"]),o=bt({imageRestriction:ho.fitArea,transformImage:{adjustStencil:!0}},n),i=bt({transitions:!0},r);return bt({settings:bt(bt({},o),Pi(o))},i)}));return(0,r.useRef)(new ra(n,e)).current}var aa=function(t){var e=(0,r.useRef)(t),n=function(){e.current&&e.current()};(0,r.useEffect)((function(){e.current=t}),[t]),(0,r.useEffect)((function(){return window.addEventListener("resize",n),window.addEventListener("orientationchange",n),function(){window.removeEventListener("resize",n),window.removeEventListener("orientationchange",n)}}),[])};function sa(t){var e=this,n=t(),o=n.src,i=n.onReady,a=n.onError,s=n.onUpdate,c=n.canvas,l=void 0===c||c,u=n.unloadTime,d=void 0===u?500:u,f=n.crossOrigin,h=void 0===f||f,m=n.checkOrientation,p=void 0===m||m,v=n.autoReconcileState,g=void 0===v||v,y=(0,r.useRef)(null),b=(0,r.useRef)(null),w=(0,r.useRef)(null),E=(0,r.useRef)(null),S=xt(function(t){var e=xt((0,r.useState)(t),2),n=e[0],o=e[1],i=xt((0,r.useState)(null),2),a=i[0],s=i[1],c=(0,r.useRef)(t);return na((function(){a&&a(n,c.current)}),[a]),[n,function(t,e){c.current=n,o(t),s((function(){return e}))}]}(null),2),x=S[0],O=S[1],C=ia((function(){return bt(bt({},t()),{getInstance:function(){return E.current}})})),N=function(t){var e=t.src,n=t.onLoadingStart,o=t.onLoadingEnd,i=t.onError,a=t.onLoad,s=t.crossOrigin,c=t.checkOrientation,l=t.canvas,u=t.unloadTime,d=xt((0,r.useState)(!1),2),f=d[0],h=d[1],m=xt((0,r.useState)(!1),2),p=m[0],v=m[1],g=xt((0,r.useState)(null),2),y=g[0],b=g[1],w=(0,r.useRef)(null);return(0,r.useEffect)((function(){if(w.current!==e)if(w.current=e||null,v(!1),e){h(!0),null==n||n();var t=[Di(e,{crossOrigin:Yr(s)?l:s,checkOrientation:c})];p&&u&&t.push(ao(u)),Promise.all(t).then((function(t){var n=xt(t,1)[0];w.current===e&&(b(n),null==a||a(n))})).catch((function(){w.current===e&&(null==i||i())})).finally((function(){w.current===e&&(null==o||o(),h(!1))}))}else u?ao(u).then((function(){b(null)})):b(null)}),[e]),(0,r.useEffect)((function(){y&&v(!0)}),[y]),{isLoading:function(){return f},isLoaded:function(){return p},getImage:function(){return y},setImage:b}}({src:o,crossOrigin:h,checkOrientation:p,unloadTime:d,canvas:l,onLoad:function(){E.current&&(null==i||i(E.current))},onError:function(){E.current&&(null==a||a(E.current))}}),M=function(t,e){void 0===e&&(e=!0);var n=xt((0,r.useState)(e),2),o=n[0],i=n[1];return(0,r.useLayoutEffect)((function(){o&&!t.hasInteractions()&&t.reconcileState()})),{pause:function(){i(!1)},resume:function(){i(!0)}}}(C,g),A=function(){return Et(e,void 0,void 0,(function(){var t,e,n;return St(this,(function(r){switch(r.label){case 0:return b.current?(M.pause(),t=N.getImage(),[4,null===(n=b.current)||void 0===n?void 0:n.stretchTo(t)]):[3,2];case 1:e=r.sent(),O(t,(function(){e&&t?C.reset(e,t):C.clear()})),M.resume(),r.label=2;case 2:return[2]}}))}))},P=function(){return Et(e,void 0,void 0,(function(){var t,e,n,r;return St(this,(function(o){switch(o.label){case 0:return b.current?(M.pause(),t=N.getImage(),[4,null===(r=b.current)||void 0===r?void 0:r.stretchTo(t)]):[3,2];case 1:(e=o.sent())&&t?(n=C.getState())?e.width===n.boundary.width&&e.height===n.boundary.height||(C.setBoundary(e),C.reconcileState()):C.reset(e,t):C.clear(),M.resume(),o.label=2;case 2:return[2]}}))}))},L={reset:function(){return A()},refresh:function(){return P()},setImage:function(t){return O(t)},reconcileState:C.reconcileState,moveCoordinates:C.moveCoordinates,moveCoordinatesEnd:C.moveCoordinatesEnd,resizeCoordinates:C.resizeCoordinates,clear:C.clear,resizeCoordinatesEnd:C.resizeCoordinatesEnd,moveImage:C.moveImage,flipImage:C.flipImage,zoomImage:C.zoomImage,rotateImage:C.rotateImage,transformImage:C.transformImage,transformImageEnd:C.transformImageEnd,setCoordinates:C.setCoordinates,setVisibleArea:C.setVisibleArea,startTransitions:C.startTransitions,setState:C.setState,hasInteractions:C.hasInteractions,getStencilCoordinates:C.getStencilCoordinates,getCoordinates:C.getCoordinates,getVisibleArea:C.getVisibleArea,getTransforms:C.getTransforms,getTransitions:C.getTransitions,getInteractions:C.getInteractions,getSettings:C.getSettings,getState:C.getState,getDefaultState:function(){var t=C.getState(),e=N.getImage();return t&&e?C.createDefaultState(t.boundary,e):null},getCanvas:function(t){var e=C.getState();return y.current&&w.current&&e?w.current.draw(e,y.current,t):null},getImage:function(){return x?bt({},x):null},isLoading:N.isLoading,isLoaded:N.isLoaded};return aa((function(){P()})),na((function(){A()}),[N.getImage()]),na((function(){E.current&&(null==s||s(E.current))}),[N.isLoaded(),N.isLoading()]),(0,r.useImperativeHandle)(E,(function(){return L})),{cropper:L,refs:{image:y,boundary:b,canvas:w},image:x}}var ca=(0,r.forwardRef)((function(t,e){var n=t.className,o=t.style,i=t.stretcherClassName,a=t.contentClassName,s=t.stretchAlgorithm,c=void 0===s?_i:s,l=t.sizeAlgorithm,u=void 0===l?Zi:l,d=t.children,f=(0,r.useRef)(null),h=(0,r.useRef)(null);return(0,r.useImperativeHandle)(e,(function(){return{reset:function(){var t=f.current;t&&(t.style.height="",t.style.width="")},stretchTo:function(t){var e=f.current,n=h.current;if((null==t?void 0:t.width)&&(null==t?void 0:t.height)&&e&&n){c(n,e,t);var r=u(n,t);return Promise.resolve(r.width&&r.height?r:null)}return e&&(e.style.height="",e.style.width=""),Promise.resolve(null)}}})),r.createElement("div",{ref:h,style:o,className:Xi()("advanced-cropper-boundary",n)},r.createElement("div",{ref:f,className:Xi()(["advanced-cropper-boundary__stretcher",i])}),r.createElement("div",{className:Xi()(["advanced-cropper-boundary__content",a])},d))}));ca.displayName="StretchableBoundary";var la=function(t){var e=t.visible,n=t.className,o=t.style,i=t.children;return r.createElement("div",{style:o,className:Xi()(n,"advanced-cropper-fade",Boolean(e)&&"advanced-cropper-fade--visible")},i)},ua=function(t){var e=t.cropper,n=t.children,o=t.className,i=t.style,a=e?e.getState():null,s=!!e&&e.isLoaded();return r.createElement("div",{className:Xi()(o,"advanced-cropper-wrapper"),style:i},r.createElement(la,{visible:a&&s,className:"advanced-cropper-wrapper__fade"},n))};function da(t){t.preventDefault()}var fa=(0,r.forwardRef)((function(t,e){var n=t.className,o=t.style,i=t.cropper,a=t.crossOrigin,s=void 0===a||a,c=i.getState(),l=i.getTransitions(),u=i.getImage(),d=u&&c?function(t,e,n){return void 0===n&&(n=null),t&&e&&e.visibleArea?Ii(t,e,e.visibleArea,Yo(e),n):{}}(u,c,l):{},f=u?u.src:void 0;return f?r.createElement("img",{key:f,ref:e,className:Xi()("advanced-cropper-background-image",n),src:f,crossOrigin:!0===s?"anonymous":s||void 0,style:bt(bt({},d),o),onMouseDown:da}):null}));fa.displayName="CropperBackgroundImage";var ha=(0,r.forwardRef)((function(t,e){var n=(0,r.useRef)(null),o=(0,r.useRef)(null);return(0,r.useImperativeHandle)(e,(function(){return{draw:function(t,e,r){return void 0===r&&(r={}),e&&n.current&&o.current?zi(t,e,n.current,o.current,r):null}}})),r.createElement(r.Fragment,null,r.createElement("canvas",{className:"advanced-cropper-canvas",ref:n}),r.createElement("canvas",{className:"advanced-cropper-canvas",ref:o}))}));ha.displayName="CropperCanvas";var ma=function(t){function e(e){var n=t.call(this,e)||this;return n.processMove=function(t,e){var r,o=n.container.current;if(o&&n.touches.length){var i=o.getBoundingClientRect(),a=i.left,s=i.top;if(1===n.touches.length&&1===e.length&&n.props.onMove){var c={left:Math.abs(e[0].clientX-n.anchor.left-a)<Math.abs(n.touches[0].clientX-n.anchor.left-a),top:Math.abs(e[0].clientY-n.anchor.top-s)<Math.abs(n.touches[0].clientY-n.anchor.top-s)},l={left:0,top:0};n.props.useAnchor&&c.left||(l.left=e[0].clientX-n.touches[0].clientX),n.props.useAnchor&&c.top||(l.top=e[0].clientY-n.touches[0].clientY),null===(r=n.props)||void 0===r||r.onMove(l,t),n.touches=Ct([],xt(e),!1)}}},n.processEnd=function(){var t=n.props,e=t.onMoveEnd,r=t.onLeave;!n.props.disabled&&n.touches.length&&(null==e||e()),n.hovered&&(null==r||r(),n.hovered=!1),n.touches=[]},n.initAnchor=function(t){var e=n.container.current;if(e){var r=e.getBoundingClientRect(),o=r.left,i=r.top;n.anchor={left:t.clientX-o,top:t.clientY-i}}},n.onMouseOver=function(){var t=n.props,e=t.onEnter,r=t.disabled;n.hovered||r||(n.hovered=!0,null==e||e())},n.onMouseLeave=function(){var t=n.props.onLeave;n.hovered&&!n.touches.length&&(n.hovered=!1,null==t||t())},n.onTouchStart=function(t){var e=n.props,r=e.onEnter,o=e.onMoveStart,i=e.disabled;if(t.cancelable){n.touches=Array.from(t.touches);var a=!i&&1===t.touches.length;a&&(n.touches=Array.from(t.touches),null==o||o()),n.hovered||i||(n.hovered=!0,null==r||r()),(n.started||a)&&(t.preventDefault(),t.stopPropagation())}},n.onTouchEnd=function(){n.started=!1,n.processEnd()},n.onTouchMove=function(t){n.touches.length>=1&&(n.started?(n.processMove(t,Array.from(t.touches)),t.preventDefault(),t.stopPropagation()):no({left:n.touches[0].clientX,top:n.touches[0].clientY},{left:t.touches[0].clientX,top:t.touches[0].clientY})>(n.props.activationDistance||0)&&(n.initAnchor({clientX:t.touches[0].clientX,clientY:t.touches[0].clientY}),n.started=!0))},n.onMouseDown=function(t){var e=n.props,r=e.onMoveStart;if(!e.disabled&&0===t.button){var o={clientX:t.clientX,clientY:t.clientY};n.touches=[o],n.initAnchor(o),t.stopPropagation(),null==r||r()}},n.onMouseMove=function(t){!n.props.disabled&&n.touches.length&&(n.processMove(t,[{clientX:t.clientX,clientY:t.clientY}]),t.preventDefault&&t.cancelable&&t.preventDefault(),t.stopPropagation())},n.onMouseUp=function(){n.processEnd()},n.touches=[],n.hovered=!1,n.started=!1,n.anchor={left:0,top:0},n.container=(0,r.createRef)(),n}return yt(e,t),e.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd);var t=this.container.current;t&&(t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("mousedown",this.onMouseDown))},e.prototype.componentDidMount=function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1});var t=this.container.current;t&&(t.addEventListener("touchstart",this.onTouchStart,{passive:!1}),t.addEventListener("mousedown",this.onMouseDown,{passive:!1}))},e.prototype.componentDidUpdate=function(t){this.props.disabled&&!t.disabled&&(this.touches=[])},e.prototype.render=function(){var t=this.props,e=t.children,n=t.className;return r.createElement("div",{className:Xi()("advanced-cropper-draggable-element",n),ref:this.container,onMouseOver:this.onMouseOver,onMouseLeave:this.onMouseLeave},e)},e.defaultProps={disabled:!1,activationDistance:30,useAnchor:!0,rerender:!0},e}(r.Component),pa=function(t){var e=t.position,n=t.className,o=t.disabled,i=t.onDrag,a=t.onDragEnd,s=t.onLeave,c=t.onEnter,l=t.children;return r.createElement(ma,{className:Xi()(["advanced-cropper-line-wrapper",e&&"advanced-cropper-line-wrapper--".concat(e),o&&"advanced-cropper-line-wrapper--disabled",n]),disabled:o,onMove:i,onMoveEnd:a,onLeave:s,onEnter:c,activationDistance:0},r.createElement("div",{className:Xi()(["advanced-cropper-line-wrapper__content",e&&"advanced-cropper-line-wrapper__content--".concat(e)])},l))},va=function(t){var e,n,o=t.position,i=t.hoverClassName,a=t.wrapperClassName,s=t.defaultClassName,c=t.disabled,l=t.onMove,u=t.onMoveEnd,d=xt((0,r.useState)(!1),2),f=d[0],h=d[1];return r.createElement(pa,{className:Xi()("advanced-cropper-simple-line-wrapper",a,(e={},e["advanced-cropper-simple-line-wrapper--".concat(o)]=!!o,e)),position:o,disabled:c,onDrag:l,onDragEnd:u,onLeave:function(){h(!1)},onEnter:function(){h(!0)}},r.createElement("div",{className:Xi()("advanced-cropper-simple-line",f&&"advanced-cropper-simple-line--hover",s,f&&i,(n={},n["advanced-cropper-simple-line--".concat(o)]=!!o,n))}))},ga=function(t){var e=t.horizontalPosition,n=t.verticalPosition,o=t.className,i=t.disabled,a=t.onDrag,s=t.onDragEnd,c=t.onLeave,l=t.onEnter,u=t.children,d=t.style,f=e||n?Fr(e,n).snakeCase:null;return r.createElement("div",{style:d,className:Xi()(o,"advanced-cropper-handler-wrapper",f&&"advanced-cropper-handler-wrapper--".concat(f),i&&"advanced-cropper-handler-wrapper--disabled")},r.createElement(ma,{className:"advanced-cropper-handler-wrapper__draggable",disabled:i,onMove:a,onMoveEnd:s,onLeave:c,onEnter:l,activationDistance:0},u))},ya=function(t){var e,n=t.verticalPosition,o=t.horizontalPosition,i=t.hoverClassName,a=t.wrapperClassName,s=t.defaultClassName,c=t.wrapperStyle,l=t.disabled,u=t.onMove,d=t.onMoveEnd,f=xt((0,r.useState)(!1),2),h=f[0],m=f[1];return r.createElement(ga,{style:c,className:Xi()("advanced-cropper-simple-handler-wrapper",a,n&&"advanced-cropper-simple-handler-wrapper--".concat(n),o&&"advanced-cropper-simple-handler-wrapper--".concat(o),o&&n&&"advanced-cropper-simple-handler-wrapper--".concat(o,"-").concat(n),h&&"advanced-cropper-simple-handler-wrapper--hover"),verticalPosition:n,horizontalPosition:o,disabled:l,onDrag:u,onDragEnd:d,onLeave:function(){m(!1)},onEnter:function(){m(!0)}},r.createElement("div",{className:Xi()("advanced-cropper-simple-handler",h&&"advanced-cropper-simple-handler--hover",s,h&&i,(e={},e["advanced-cropper-simple-handler--".concat(n)]=!!n,e["advanced-cropper-simple-handler--".concat(o)]=!!o,e["advanced-cropper-simple-handler--".concat(o,"-").concat(n)]=o&&n,e))}))},ba=["east","west",null],wa=["south","north",null],Ea=function(t){var e=t.style,n=t.className,o=t.children,i=t.onResize,a=t.onResizeEnd,s=t.handlerComponent,c=void 0===s?ya:s,l=t.handlers,u=void 0===l?{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}:l,d=t.handlerClassNames,f=void 0===d?{}:d,h=t.handlerWrapperClassNames,m=void 0===h?{}:h,p=t.lines,v=void 0===p?{west:!0,north:!0,east:!0,south:!0}:p,g=t.lineComponent,y=void 0===g?va:g,b=t.lineClassNames,w=void 0===b?{}:b,E=t.lineWrapperClassNames,S=void 0===E?{}:E,x=t.disabled,O=void 0!==x&&x,C=t.reference,N=void 0===C?null:C,M=xt((0,r.useState)(null),2),A=M[0],P=M[1],L=(0,r.useMemo)((function(){var t=[];return ba.forEach((function(e){wa.forEach((function(n){if(e!==n){var r=Fr(e,n),o=r.snakeCase,i=r.camelCase;o&&i&&t.push({name:i,className:o,verticalPosition:n,horizontalPosition:e})}}))})),t}),[]),j=(0,r.useMemo)((function(){var t=[];return L.forEach((function(e){lo(e.name)&&($r(v)?v[e.name]:v)&&t.push({name:e.name,component:y,className:Xi()(w.default,w[e.name],O&&w.disabled),wrapperClassName:Xi()("advanced-cropper-bounding-box__line","advanced-cropper-bounding-box__line--".concat(e.name),S.default,S[e.name],O&&S.disabled),hoverClassName:w.hover,verticalPosition:e.verticalPosition,horizontalPosition:e.horizontalPosition,disabled:O})})),t}),[L,v,y,w,S,O]),R=(0,r.useMemo)((function(){var t=[];return L.forEach((function(e){($r(u)?u[e.name]:u)&&t.push({name:e.name,component:c,className:Xi()(f.default,f[e.name]),containerClassName:Xi()("advanced-cropper-bounding-box__handler-wrapper","advanced-cropper-bounding-box__handler-wrapper--".concat(e.className)),wrapperClassName:Xi()("advanced-cropper-bounding-box__handler","advanced-cropper-bounding-box__handler--".concat(e.className),m.default,m[e.name]),hoverClassName:f.hover,verticalPosition:e.verticalPosition,horizontalPosition:e.horizontalPosition,disabled:O})})),t}),[L,u,c,f,m,O]),k=function(t,e){return function(n,r){var o,a={left:n.left,top:n.top};if(!e&&t?o="width":e&&!t&&(o="height"),!O){if(i){var s=Fr(t,e).camelCase;s&&i(s,a,{reference:A||N,preserveAspectRatio:r&&r.shiftKey,respectDirection:o,compensate:!0})}A||P(N)}}},T=function(){null==a||a(),P(null)};return r.createElement("div",{className:Xi()("advanced-cropper-bounding-box",n),style:e},o,r.createElement("div",null,j.map((function(t){return r.createElement(t.component,{key:t.name,defaultClassName:t.className,hoverClassName:t.hoverClassName,wrapperClassName:t.wrapperClassName,position:t.name,disabled:t.disabled,onMove:k(t.horizontalPosition,t.verticalPosition),onMoveEnd:T})}))),r.createElement("div",null,R.map((function(t){var e=r.createElement(t.component,{defaultClassName:t.className,hoverClassName:t.hoverClassName,wrapperClassName:t.wrapperClassName,horizontalPosition:t.horizontalPosition,verticalPosition:t.verticalPosition,disabled:t.disabled,onMove:k(t.horizontalPosition,t.verticalPosition),onMoveEnd:T});return r.createElement("div",{key:t.name,className:t.containerClassName},e)}))))},Sa=function(t){var e=t.className,n=t.children;return r.createElement("div",{className:Xi()("advanced-cropper-stencil-overlay",e)},n)};var xa=function(t){var e=t.className,n=t.transitions,o=t.children,i=wt(t,["className","transitions","children"]),a=(0,r.useRef)(null),s=(0,r.useRef)(i),c=xt((0,r.useState)(i),2),l=c[0],u=c[1],d=xt(function(t){void 0===t&&(t=null);var e=(0,r.useRef)(new Hi),n=xt((0,r.useState)(!1),2),o=n[0],i=n[1];return[function(n){t&&t.active?e.current.start(bt(bt({},t),{onStart:function(){i(!0)},onProgress:function(t){n(t)},onStop:function(){i(!1)}})):e.current.active||n(1)},o]}(n),2),f=d[0],h=d[1];(0,r.useLayoutEffect)((function(){if(!co(l,i)){u(i);var t=h?bt({},s.current):l;f((function(e){["left","top","height","width"].forEach((function(n){var r=i[n],o=t[n];s.current[n]=Jr(o)&&Jr(r)?o+(r-o)*e:r})),a.current&&(a.current.style.width="".concat(s.current.width,"px"),a.current.style.height="".concat(s.current.height,"px"),a.current.style.transform="translate3d(".concat(s.current.left,"px, ").concat(s.current.top,"px, 0px)"))}))}}),[l,h,i.width,i.height,i.top,i.left]);var m=h?s.current:i,p={left:0,top:0,width:"".concat(m.width,"px"),height:"".concat(m.height,"px"),transform:"translate3d(".concat(m.left,"px, ").concat(m.top,"px, 0px)")};return r.createElement("div",{ref:a,className:Xi()("advanced-cropper-artificial-transition",e),style:p},o)},Oa=function(t){var e=t.className,n=t.transitions,o=t.width,i=t.height,a=t.left,s=t.top,c=t.children;return r.createElement(xa,{className:Xi()("advanced-cropper-stencil-wrapper",e),transitions:n,width:o,height:i,top:s,left:a},c)},Ca=function(t){var e=t.columns,n=void 0===e?3:e,o=t.rows,i=void 0===o?3:o,a=t.visible,s=void 0!==a&&a,c=t.className,l=[],u=xt((0,r.useState)(n),2),d=u[0],f=u[1],h=xt((0,r.useState)(i),2),m=h[0],p=h[1];na((function(){s&&(p(i),f(n))}),[s,n,i]);for(var v=0;v<m;v++){for(var g=[],y=0;y<d;y++)g.push(r.createElement("div",{key:y,className:Xi()("advanced-cropper-stencil-grid__cell",0===v&&"advanced-cropper-stencil-grid__cell--top",v===m-1&&"advanced-cropper-stencil-grid__cell--bottom",0===y&&"advanced-cropper-stencil-grid__cell--left",y===d-1&&"advanced-cropper-stencil-grid__cell--right")}));l.push(r.createElement("div",{key:v,className:"advanced-cropper-stencil-grid__row"},g))}return r.createElement("div",{className:Xi()("advanced-cropper-stencil-grid",s&&"advanced-cropper-stencil-grid--visible",c)},l)},Na=(0,r.forwardRef)((function(t,e){var n=t.cropper,o=t.coordinates,i=t.aspectRatio,a=t.minAspectRatio,s=t.maxAspectRatio,c=t.handlerComponent,l=void 0===c?ya:c,u=t.handlers,d=void 0===u?{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}:u,f=t.handlerClassNames,h=void 0===f?{}:f,m=t.handlerWrapperClassNames,p=void 0===m?{}:m,v=t.lines,g=void 0===v?{west:!0,north:!0,east:!0,south:!0}:v,y=t.lineComponent,b=void 0===y?va:y,w=t.lineClassNames,E=void 0===w?{}:w,S=t.lineWrapperClassNames,x=void 0===S?{}:S,O=t.resizable,C=void 0===O||O,N=t.movable,M=void 0===N||N,A=t.grid,P=t.gridClassName,L=t.className,j=t.movingClassName,R=t.resizingClassName,k=t.previewClassName,T=t.boundingBoxClassName,D=t.overlayClassName,I=t.draggableAreaClassName,_=n.getState(),W=n.getTransitions(),Z=n.getInteractions();(0,r.useImperativeHandle)(e,(function(){return{aspectRatio:Wo(i||{minimum:a,maximum:s})}}));var z=o?Xr(o)?o(_):o:$o(_),B=z.width,H=z.height,F=z.left,U=z.top;return _&&r.createElement(Oa,{className:Xi()("advanced-cropper-rectangle-stencil",L,Z.moveCoordinates&&j,Z.resizeCoordinates&&R,{"advanced-cropper-rectangle-stencil--movable":M,"advanced-cropper-rectangle-stencil--moving":Z.moveCoordinates,"advanced-cropper-rectangle-stencil--resizable":C,"advanced-cropper-rectangle-stencil--resizing":Z.resizeCoordinates}),width:B,height:H,left:F,top:U,transitions:W},r.createElement(Ea,{reference:_.coordinates,className:Xi()(T,"advanced-cropper-rectangle-stencil__bounding-box"),handlers:d,handlerComponent:l,handlerClassNames:h,handlerWrapperClassNames:p,lines:g,lineComponent:b,lineClassNames:E,lineWrapperClassNames:x,onResize:function(t,e,r){n&&C&&n.resizeCoordinates(t,e,r)},onResizeEnd:function(){n&&n.resizeCoordinatesEnd()},disabled:!C},r.createElement(ma,{disabled:!M,onMove:function(t){n&&M&&n.moveCoordinates(t)},onMoveEnd:function(){n&&n.moveCoordinatesEnd()},className:Xi()("advanced-cropper-rectangle-stencil__draggable-area",I)},r.createElement(Sa,{className:Xi()("advanced-cropper-rectangle-stencil__overlay",D)},A&&r.createElement(Ca,{visible:n.hasInteractions(),columns:Z.transformImage.rotate?9:3,rows:Z.transformImage.rotate?9:3,className:Xi()("advanced-cropper-rectangle-stencil__grid",P)}),r.createElement("div",{className:Xi()("advanced-cropper-rectangle-stencil__preview",k)})))))}));Na.displayName="RectangleStencil";var Ma,Aa=function(){function t(t){var e=t.active;this.active=e,this.defaultPrevented=!1}return t.prototype.preventDefault=function(){this.defaultPrevented=!0},t}(),Pa=function(t){function e(e){var n=t.call(this,e)||this;return n.processMove=function(t){var e=n.props,r=e.onTransform,o=e.touchScale,i=e.touchMove,a=e.touchRotate,s=n.container.current;s&&r&&(r(function(t,e,n,r){var o,i,a;if(void 0===r&&(r={}),1===e.length&&1===t.length)r.move&&(o={left:e[0].clientX-t[0].clientX,top:e[0].clientY-t[0].clientY});else if(t.length>1){var s=Fi(e,n),c=Fi(t,n);if(r.rotate&&2===e.length&&2===t.length){var l={left:[t[0].clientX-t[1].clientX,e[0].clientX-e[1].clientX],top:[t[0].clientY-t[1].clientY,e[0].clientY-e[1].clientY]},u=l.left[0]*l.top[1]-l.left[1]*l.top[0],d=l.left[0]*l.left[1]+l.top[0]*l.top[1];if(!ro(d,0)&&!ro(u,0)){var f=-180*Math.atan2(u,d)/Math.PI;a={center:c.centerMass,angle:f}}}r.move&&(o={left:s.centerMass.left-c.centerMass.left,top:s.centerMass.top-c.centerMass.top}),r.scale&&(i={factor:c.spread/s.spread,center:c.centerMass})}return{move:o,scale:i,rotate:a}}(t,n.touches,s,{scale:o,rotate:a,move:i})),n.touches=t)},n.processEnd=function(){var t=n.props.onTransformEnd;n.transforming&&(n.transforming=!1,t&&t())},n.processStart=function(){n.transforming=!0,n.debouncedProcessEnd.clear()},n.processEvent=function(t){var e=n.props,r=e.onEvent,o=e.disabled,i=new Aa({active:n.transforming});return r?r(i,t):(t.preventDefault(),t.stopPropagation()),!o&&!i.defaultPrevented},n.onWheel=function(t){var e=n.props,r=e.onTransform,o=e.wheelScale,i=n.container.current;o&&n.processEvent(t)&&(n.processStart(),r&&i&&r(Ui(t,i,!0===o?.1:o.ratio)),n.touches.length||n.debouncedProcessEnd())},n.onTouchStart=function(t){var e=n.props,r=e.touchMove,o=e.touchScale,i=e.touchRotate;if(t.cancelable&&(r||(o||i)&&t.touches.length>1)&&n.processEvent(t)){var a=n.container.current;if(a){var s=a.getBoundingClientRect(),c=s.left,l=s.top,u=s.bottom,d=s.right;n.touches=Array.from(t.touches).filter((function(t){return t.clientX>c&&t.clientX<d&&t.clientY>l&&t.clientY<u}))}}},n.onTouchEnd=function(t){0===t.touches.length&&(n.touches=[],n.processEnd())},n.onTouchMove=function(t){if(n.touches.length){var e=Ct([],xt(t.touches),!1).filter((function(t){return!t.identifier||n.touches.find((function(e){return e.identifier===t.identifier}))}));n.processEvent(t)&&(n.processMove(e),n.processStart())}},n.onMouseDown=function(t){if(n.props.mouseMove&&"buttons"in t&&1===t.buttons&&n.processEvent(t)){var e={clientX:t.clientX,clientY:t.clientY};n.touches=[e],n.processStart()}},n.onMouseMove=function(t){n.touches.length&&n.processEvent(t)&&n.processMove([{clientX:t.clientX,clientY:t.clientY}])},n.onMouseUp=function(){n.touches=[],n.processEnd()},n.transforming=!1,n.touches=[],n.anchor={left:0,top:0},n.container=(0,r.createRef)(),n.debouncedProcessEnd=uo(n.processEnd,e.timeout),n}return yt(e,t),e.prototype.shouldComponentUpdate=function(){return!0},e.prototype.componentWillUnmount=function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd);var t=this.container.current;t&&(t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("wheel",this.onWheel))},e.prototype.componentDidMount=function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1});var t=this.container.current;t&&(t.addEventListener("touchstart",this.onTouchStart,{passive:!1}),t.addEventListener("mousedown",this.onMouseDown,{passive:!1}),t.addEventListener("wheel",this.onWheel,{passive:!1}))},e.prototype.render=function(){var t=this.props,e=t.className,n=t.children,o=t.style;return r.createElement("div",{className:e,style:o,ref:this.container},n)},e.defaultProps={touchMove:!0,mouseMove:!0,touchScale:!0,touchRotate:!1,wheelScale:!0,timeout:500},e}(r.Component),La=function(t){var e=t.scaleImage,n=void 0===e||e,o=t.moveImage,i=void 0===o||o,a=t.rotateImage,s=void 0!==a&&a,c=t.children,l=t.className,u=t.style,d=t.cropper,f=t.timeout,h=d.getTransitions(),m=function(t){return(0,r.useMemo)((function(){return qr(t,{touch:!0},{touch:!1})}),[t])}(s),p=function(t){return(0,r.useMemo)((function(){return qr(t,{touch:!0,wheel:{ratio:.1}},{touch:!1,wheel:!1})}),[t])}(n),v=function(t){return(0,r.useMemo)((function(){return qr(t,{touch:!0,mouse:!0},{touch:!1,mouse:!1})}),[t])}(i);return r.createElement(Pa,{className:l,style:u,onTransform:d.transformImage,onTransformEnd:d.transformImageEnd,touchMove:v.touch,mouseMove:v.mouse,touchScale:p.touch,wheelScale:p.wheel,touchRotate:m.touch,disabled:h.active,timeout:f},c)},ja=(Ma=function(t,e){var n=t.style,o=t.className,i=t.stencilComponent,a=void 0===i?Na:i,s=t.stencilConstraints,c=void 0===s?Gi:s,l=t.stencilProps,u=void 0===l?{}:l,d=t.wrapperComponent,f=void 0===d?ua:d,h=t.wrapperProps,m=void 0===h?{}:h,p=t.backgroundComponent,v=void 0===p?fa:p,g=t.backgroundProps,y=void 0===g?{}:g,b=t.backgroundClassName,w=t.backgroundWrapperComponent,E=void 0===w?La:w,S=t.backgroundWrapperProps,x=void 0===S?{}:S,O=t.boundaryComponent,C=void 0===O?ca:O,N=t.boundaryProps,M=t.boundaryClassName,A=t.canvas,P=void 0===A||A,L=t.crossOrigin,j=void 0===L||L,R=t.settings,k=wt(t,["style","className","stencilComponent","stencilConstraints","stencilProps","wrapperComponent","wrapperProps","backgroundComponent","backgroundProps","backgroundClassName","backgroundWrapperComponent","backgroundWrapperProps","boundaryComponent","boundaryProps","boundaryClassName","canvas","crossOrigin","settings"]),T=(0,r.useRef)(null),D=sa((function(){return bt(bt({},k),{crossOrigin:j,stencilProps:u,canvas:P,settings:bt(bt({},R),c(R,bt(bt({},u),T.current)))})})),I=D.cropper,_=D.image,W=D.refs,Z=a,z=f,B=E,H=v,F=C;(0,r.useImperativeHandle)(e,(function(){return I}));var U={loading:I.isLoading(),loaded:I.isLoaded()};return r.createElement(z,bt({},m,{className:Xi()("advanced-cropper",o),cropper:I,style:n},U),r.createElement(F,bt({},N,{ref:W.boundary,className:Xi()("advanced-cropper__boundary",M)}),r.createElement(B,bt({},x,{cropper:I,className:"advanced-cropper__background-wrapper"}),I.getState()&&r.createElement(H,bt({},y,{ref:W.image,crossOrigin:j,cropper:I,className:Xi()("advanced-cropper__background",b)})),r.createElement(Z,bt({},u,{ref:T,cropper:I,image:_}))),P&&r.createElement(ha,{ref:W.canvas})))},(0,r.forwardRef)(Ma)),Ra=["transformImage","moveCoordinates","resizeCoordinates","defaultCoordinates","defaultVisibleArea","areaPositionRestrictions","areaSizeRestrictions","sizeRestrictions","positionRestrictions","aspectRatio","minWidth","minHeight","maxWidth","maxHeight","defaultSize","defaultPosition","defaultTransforms","imageRestriction","priority"];function ka(t,e){void 0===e&&(e=Ra);var n={settings:{},props:{}};return Object.keys(t).forEach((function(r){e.some((function(t){return t===r}))?n.settings[r]=t[r]:n.props[r]=t[r]})),n}var Ta=(0,r.forwardRef)((function(t,e){var n=ka(t,Ct(Ct([],xt(Ra),!1),["stencilSize"],!1));return r.createElement(ja,bt({postProcess:Ji,stencilConstraints:Yi},n.props,{settings:bt(bt({defaultSize:Ki,aspectRatio:Qi,sizeRestrictions:Ai(qi)},n.settings),{transformImage:bt(bt({},n.settings.transformImage),{adjustStencil:!1})}),ref:e}))}));Ta.displayName="FixedCropper";var Da=(0,r.forwardRef)((function(t,e){var n=ka(t),o=n.props,i=n.settings,a=i.stencilSize,s=i.autoZoom,c=wt(i,["stencilSize","autoZoom"]),l=ea();return Yr(s)||(o.postProcess||a?l("prop 'autoZoom' is deprecated now and will be removed, use 'postProcess' prop to pass your auto zoom function."):(l("prop 'autoZoom' is deprecated now and will be removed, use 'postProcess' prop to pass your auto zoom function. The 'postProcess' automatically set to 'hybridAutoZoom'"),o.postProcess=ta)),Yr(a)?r.createElement(ja,bt({},o,{ref:e,settings:c})):(l("prop 'stencilSize' is deprecated for <Cropper/> component now and will be removed, use <FixedCropper/> component instead."),r.createElement(Ta,bt({ref:e,stencilSize:a},c,o)))}));Da.displayName="CropperComponent";var Ia=(0,r.forwardRef)((function(t,e){var n=t.cropper,o=t.coordinates,i=t.handlerComponent,a=void 0===i?ya:i,s=t.handlers,c=void 0===s?{eastNorth:!0,westNorth:!0,westSouth:!0,eastSouth:!0}:s,l=t.handlerClassNames,u=void 0===l?{}:l,d=t.handlerWrapperClassNames,f=void 0===d?{}:d,h=t.lines,m=void 0===h?{west:!0,north:!0,east:!0,south:!0}:h,p=t.lineComponent,v=void 0===p?va:p,g=t.lineClassNames,y=void 0===g?{}:g,b=t.lineWrapperClassNames,w=void 0===b?{}:b,E=t.resizable,S=void 0===E||E,x=t.movable,O=void 0===x||x,C=t.grid,N=t.gridClassName,M=t.className,A=t.movingClassName,P=t.resizingClassName,L=t.previewClassName,j=t.boundingBoxClassName,R=t.overlayClassName,k=t.draggableAreaClassName,T=n.getState(),D=n.getTransitions(),I=n.getInteractions();(0,r.useImperativeHandle)(e,(function(){return{aspectRatio:1,boundingBox:"circle"}}));var _=o?Xr(o)?o(T):o:$o(T),W=_.width,Z=_.height,z=_.left,B=_.top;return T&&r.createElement(Oa,{className:Xi()("advanced-cropper-circle-stencil",M,I.moveCoordinates&&A,I.resizeCoordinates&&P,{"advanced-cropper-circle-stencil--movable":O,"advanced-cropper-circle-stencil--moving":I.moveCoordinates,"advanced-cropper-circle-stencil--resizable":S,"advanced-cropper-circle-stencil--resizing":I.resizeCoordinates}),width:W,height:Z,left:z,top:B,transitions:D},r.createElement(Ea,{reference:T.coordinates,className:Xi()(j,"advanced-cropper-circle-stencil__bounding-box"),handlers:c,handlerComponent:a,handlerClassNames:u,handlerWrapperClassNames:f,lines:m,lineComponent:v,lineClassNames:y,lineWrapperClassNames:w,onResize:function(t,e,r){n&&S&&n.resizeCoordinates(t,e,r)},onResizeEnd:function(){n&&n.resizeCoordinatesEnd()},disabled:!S},r.createElement(ma,{disabled:!O,onMove:function(t){n&&O&&n.moveCoordinates(t)},onMoveEnd:function(){n&&n.moveCoordinatesEnd()},className:Xi()("advanced-cropper-circle-stencil__draggable-area",k)},r.createElement(Sa,{className:Xi()("advanced-cropper-circle-stencil__overlay",R)},C&&r.createElement(Ca,{visible:n.hasInteractions(),columns:I.transformImage.rotate?9:3,rows:I.transformImage.rotate?9:3,className:Xi()("advanced-cropper-circle-stencil__grid",N)}),r.createElement("div",{className:Xi()("advanced-cropper-circle-stencil__preview",L)})))))}));Ia.displayName="CircleStencil",(0,r.forwardRef)((function(t,e){var n=t.src,o=t.crossOrigin,i=void 0===o||o,a=wt(t,["src","crossOrigin"]);return n?r.createElement("img",bt({key:n,ref:e,src:n,className:Xi()("advanced-cropper-source"),crossOrigin:!0===i?"anonymous":i||void 0},a)):null})).displayName="CropperSource";var _a=function(t){var e=t.children,n=t.cropper,o=t.className,i=t.style;return r.createElement("div",{className:Xi()(o,"cropper-preview-wrapper"),style:i},r.createElement(la,{visible:null==n?void 0:n.isLoaded(),className:"cropper-preview-wrapper__fade"},e))},Wa=function(t){var e=t.className,n=t.cropper,o=t.crossOrigin,i=void 0===o||o,a=t.size,s=t.style,c=n.getState(),l=n.getTransitions(),u=n.getImage(),d=a&&u&&(null==c?void 0:c.coordinates)?function(t,e,n,r){return void 0===r&&(r=null),t&&e&&e.visibleArea&&e.coordinates?Ii(t,e,e.coordinates,No(e.coordinates)>No(n)?e.coordinates.width/n.width:e.coordinates.height/n.height,r):{}}(u,c,a,l):{},f=u?u.src:void 0;return f?r.createElement("img",{key:f,className:Xi()("advanced-cropper-background-image",e),src:f,crossOrigin:!0===i?"anonymous":i||void 0,style:bt(bt({},d),s),onMouseDown:da}):null};(0,r.forwardRef)((function(t,e){var n,o,i,a,s=t.className,c=t.contentClassName,l=t.state,u=void 0===l?null:l,d=t.image,f=void 0===d?null:d,h=t.transitions,m=void 0===h?null:h,p=t.backgroundComponent,v=void 0===p?Wa:p,g=t.backgroundProps,y=t.backgroundClassName,b=t.boundaryComponent,w=void 0===b?ca:b,E=t.boundaryProps,S=t.boundaryClassName,x=t.wrapperComponent,O=void 0===x?_a:x,C=t.wrapperProps,N=t.loaded,M=void 0===N||N,A=t.loading,P=void 0!==A&&A,L=t.style,j=t.cropper,R=oa(),k=(0,r.useRef)(null),T=j||{current:{getState:function(){return u},getTransitions:function(){return m},getImage:function(){return f},isLoaded:function(){return M},isLoading:function(){return P}}},D=xt((0,r.useState)(null),2),I=D[0],_=D[1],W=null===(o=null===(n=T.current)||void 0===n?void 0:n.getState())||void 0===o?void 0:o.coordinates,Z=null===(a=null===(i=T.current)||void 0===i?void 0:i.getImage())||void 0===a?void 0:a.src,z=I?{width:"".concat(I.width,"px"),height:"".concat(I.height,"px")}:{},B=function(){k.current&&W&&k.current.stretchTo(W).then((function(t){t&&W?oo(No(W),No(t))?_({width:t.width,height:t.width/No(W)}):_({width:t.height*No(W),height:t.height}):_(null)})),R()};aa(B),(0,r.useLayoutEffect)(B,[null==W?void 0:W.height,null==W?void 0:W.width]),(0,r.useImperativeHandle)(e,(function(){return{refresh:R}}));var H=O,F=v,U=w;return r.createElement(H,bt({},C,{className:Xi()(s,"advanced-cropper-preview"),cropper:T.current,style:L}),r.createElement(U,bt({ref:k,stretchAlgorithm:Wi},E,{className:Xi()("advanced-cropper-preview__boundary",S)}),r.createElement("div",{className:Xi()(c,"advanced-cropper-preview__content"),style:z},T.current&&r.createElement(F,bt({},g,{cropper:T.current,size:I,className:Xi()(y,"advanced-cropper-preview__image",Z&&"advanced-cropper-preview__image--visible")})))))}));n(5763);function Za(t){return Za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Za(t)}function za(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ba(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?za(Object(n),!0).forEach((function(e){Ha(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):za(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ha(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==Za(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Za(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Za(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fa(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ua(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ua(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ua(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const Ga=function(){var t=Fa((0,r.useContext)(a.b),2),e=t[0],n=t[1],o=Fa((0,r.useState)(null),2),i=o[0],s=o[1],c=(0,r.useRef)(null);(0,r.useEffect)((function(){c.current&&c.current.getCoordinates()&&(e.fromCropper||(c.current.setCoordinates({top:e.top,left:e.left,width:e.width,height:e.height}),e.top!=c.current.getCoordinates().top&&n((function(t){return Ba(Ba({},t),{},{top:c.current.getCoordinates().top})})),e.left!=c.current.getCoordinates().left&&n((function(t){return Ba(Ba({},t),{},{left:c.current.getCoordinates().left})})),e.width!=c.current.getCoordinates().width&&n((function(t){return Ba(Ba({},t),{},{width:c.current.getCoordinates().width})})),e.height!=c.current.getCoordinates().height&&n((function(t){return Ba(Ba({},t),{},{height:c.current.getCoordinates().height})}))))}),[e.width,e.height,e.top,e.left]);return(0,r.useEffect)((function(){e.blob&&s(e.frame)}),[e.frame]),r.createElement("div",null,r.createElement(Da,{src:i,ref:c,onChange:function(t){t&&n((function(e){return Ba(Ba({},e),{},{top:t.getCoordinates().top,left:t.getCoordinates().left,width:t.getCoordinates().width,height:t.getCoordinates().height,fromCropper:!0})}))},className:"cropper",stencilProps:{grid:!0},defaultSize:{width:e.width,height:e.height},backgroundWrapperClassName:"CropperBackgroundWrapper",width:e.width,height:e.height,transitions:!1,style:{transition:"none"}}))};function Va(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Xa(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xa(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xa(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const Ya=function(){var t=Va((0,r.useContext)(a.b),2),e=t[0];t[1];return r.createElement("div",{className:Cr.Z.content},r.createElement("div",{className:Cr.Z.wrap},"audio"===e.mode&&r.createElement(Br,null),"player"===e.mode&&r.createElement(Br,null),"crop"===e.mode&&r.createElement(Ga,null)))};var $a=n(6935);function qa(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Ka(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ka(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ka(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const Qa=function(){var t=qa((0,r.useContext)(a.b),2),e=t[0];t[1];return r.createElement("div",{className:$a.Z.layout},"crop"===e.mode&&r.createElement(we,null),"player"===e.mode&&r.createElement(de,null),"audio"===e.mode&&r.createElement(Pe,null),r.createElement("div",{className:$a.Z.content},r.createElement(Ya,null),r.createElement(Or,null)))},Ja=o["useId".toString()]||(()=>{});let ts=0;function es(t){const[e,n]=r.useState(Ja());return Ke((()=>{t||n((t=>null!=t?t:String(ts++)))}),[t]),t||(e?`radix-${e}`:"")}const ns="dismissableLayer.update",rs="dismissableLayer.pointerDownOutside",os="dismissableLayer.focusOutside";let is;const as=(0,r.createContext)({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ss=(0,r.forwardRef)(((t,e)=>{var n;const{disableOutsidePointerEvents:o=!1,onEscapeKeyDown:i,onPointerDownOutside:a,onFocusOutside:s,onInteractOutside:c,onDismiss:l,...u}=t,d=(0,r.useContext)(as),[f,h]=(0,r.useState)(null),m=null!==(n=null==f?void 0:f.ownerDocument)&&void 0!==n?n:null===globalThis||void 0===globalThis?void 0:globalThis.document,[,p]=(0,r.useState)({}),v=Ue(e,(t=>h(t))),g=Array.from(d.layers),[y]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),b=g.indexOf(y),w=f?g.indexOf(f):-1,E=d.layersWithOutsidePointerEventsDisabled.size>0,S=w>=b,x=function(t,e=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const n=Xe(t),o=(0,r.useRef)(!1),i=(0,r.useRef)((()=>{}));return(0,r.useEffect)((()=>{const t=t=>{if(t.target&&!o.current){const r={originalEvent:t};function a(){ls(rs,n,r,{discrete:!0})}"touch"===t.pointerType?(e.removeEventListener("click",i.current),i.current=a,e.addEventListener("click",i.current,{once:!0})):a()}else e.removeEventListener("click",i.current);o.current=!1},r=window.setTimeout((()=>{e.addEventListener("pointerdown",t)}),0);return()=>{window.clearTimeout(r),e.removeEventListener("pointerdown",t),e.removeEventListener("click",i.current)}}),[e,n]),{onPointerDownCapture:()=>o.current=!0}}((t=>{const e=t.target,n=[...d.branches].some((t=>t.contains(e)));S&&!n&&(null==a||a(t),null==c||c(t),t.defaultPrevented||null==l||l())}),m),O=function(t,e=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const n=Xe(t),o=(0,r.useRef)(!1);return(0,r.useEffect)((()=>{const t=t=>{if(t.target&&!o.current){ls(os,n,{originalEvent:t},{discrete:!1})}};return e.addEventListener("focusin",t),()=>e.removeEventListener("focusin",t)}),[e,n]),{onFocusCapture:()=>o.current=!0,onBlurCapture:()=>o.current=!1}}((t=>{const e=t.target;[...d.branches].some((t=>t.contains(e)))||(null==s||s(t),null==c||c(t),t.defaultPrevented||null==l||l())}),m);return function(t,e=(null===globalThis||void 0===globalThis?void 0:globalThis.document)){const n=Xe(t);(0,r.useEffect)((()=>{const t=t=>{"Escape"===t.key&&n(t)};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}),[n,e])}((t=>{w===d.layers.size-1&&(null==i||i(t),!t.defaultPrevented&&l&&(t.preventDefault(),l()))}),m),(0,r.useEffect)((()=>{if(f)return o&&(0===d.layersWithOutsidePointerEventsDisabled.size&&(is=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),cs(),()=>{o&&1===d.layersWithOutsidePointerEventsDisabled.size&&(m.body.style.pointerEvents=is)}}),[f,m,o,d]),(0,r.useEffect)((()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),cs())}),[f,d]),(0,r.useEffect)((()=>{const t=()=>p({});return document.addEventListener(ns,t),()=>document.removeEventListener(ns,t)}),[]),(0,r.createElement)(an.div,pt({},u,{ref:v,style:{pointerEvents:E?S?"auto":"none":void 0,...t.style},onFocusCapture:He(t.onFocusCapture,O.onFocusCapture),onBlurCapture:He(t.onBlurCapture,O.onBlurCapture),onPointerDownCapture:He(t.onPointerDownCapture,x.onPointerDownCapture)}))}));function cs(){const t=new CustomEvent(ns);document.dispatchEvent(t)}function ls(t,e,n,{discrete:r}){const o=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&o.addEventListener(t,e,{once:!0}),r?function(t,e){t&&(0,Je.flushSync)((()=>t.dispatchEvent(e)))}(o,i):o.dispatchEvent(i)}const us="focusScope.autoFocusOnMount",ds="focusScope.autoFocusOnUnmount",fs={bubbles:!1,cancelable:!0},hs=(0,r.forwardRef)(((t,e)=>{const{loop:n=!1,trapped:o=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...s}=t,[c,l]=(0,r.useState)(null),u=Xe(i),d=Xe(a),f=(0,r.useRef)(null),h=Ue(e,(t=>l(t))),m=(0,r.useRef)({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;(0,r.useEffect)((()=>{if(o){function t(t){if(m.paused||!c)return;const e=t.target;c.contains(e)?f.current=e:gs(f.current,{select:!0})}function e(t){if(m.paused||!c)return;const e=t.relatedTarget;null!==e&&(c.contains(e)||gs(f.current,{select:!0}))}function n(t){if(document.activeElement===document.body)for(const e of t)e.removedNodes.length>0&&gs(c)}document.addEventListener("focusin",t),document.addEventListener("focusout",e);const r=new MutationObserver(n);return c&&r.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",t),document.removeEventListener("focusout",e),r.disconnect()}}}),[o,c,m.paused]),(0,r.useEffect)((()=>{if(c){ys.add(m);const e=document.activeElement;if(!c.contains(e)){const n=new CustomEvent(us,fs);c.addEventListener(us,u),c.dispatchEvent(n),n.defaultPrevented||(!function(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(gs(r,{select:e}),document.activeElement!==n)return}((t=ms(c),t.filter((t=>"A"!==t.tagName))),{select:!0}),document.activeElement===e&&gs(c))}return()=>{c.removeEventListener(us,u),setTimeout((()=>{const t=new CustomEvent(ds,fs);c.addEventListener(ds,d),c.dispatchEvent(t),t.defaultPrevented||gs(null!=e?e:document.body,{select:!0}),c.removeEventListener(ds,d),ys.remove(m)}),0)}}var t}),[c,u,d,m]);const p=(0,r.useCallback)((t=>{if(!n&&!o)return;if(m.paused)return;const e="Tab"===t.key&&!t.altKey&&!t.ctrlKey&&!t.metaKey,r=document.activeElement;if(e&&r){const e=t.currentTarget,[o,i]=function(t){const e=ms(t),n=ps(e,t),r=ps(e.reverse(),t);return[n,r]}(e);o&&i?t.shiftKey||r!==i?t.shiftKey&&r===o&&(t.preventDefault(),n&&gs(i,{select:!0})):(t.preventDefault(),n&&gs(o,{select:!0})):r===e&&t.preventDefault()}}),[n,o,m.paused]);return(0,r.createElement)(an.div,pt({tabIndex:-1},s,{ref:h,onKeyDown:p}))}));function ms(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:t=>{const e="INPUT"===t.tagName&&"hidden"===t.type;return t.disabled||t.hidden||e?NodeFilter.FILTER_SKIP:t.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function ps(t,e){for(const n of t)if(!vs(n,{upTo:e}))return n}function vs(t,{upTo:e}){if("hidden"===getComputedStyle(t).visibility)return!0;for(;t;){if(void 0!==e&&t===e)return!1;if("none"===getComputedStyle(t).display)return!0;t=t.parentElement}return!1}function gs(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&function(t){return t instanceof HTMLInputElement&&"select"in t}(t)&&e&&t.select()}}const ys=function(){let t=[];return{add(e){const n=t[0];e!==n&&(null==n||n.pause()),t=bs(t,e),t.unshift(e)},remove(e){var n;t=bs(t,e),null===(n=t[0])||void 0===n||n.resume()}}}();function bs(t,e){const n=[...t],r=n.indexOf(e);return-1!==r&&n.splice(r,1),n}const ws=(0,r.forwardRef)(((t,e)=>{var n;const{container:o=(null===globalThis||void 0===globalThis||null===(n=globalThis.document)||void 0===n?void 0:n.body),...i}=t;return o?Je.createPortal((0,r.createElement)(an.div,pt({},i,{ref:e})),o):null}));const Es=t=>{const{present:e,children:n}=t,o=function(t){const[e,n]=(0,r.useState)(),o=(0,r.useRef)({}),i=(0,r.useRef)(t),a=(0,r.useRef)("none"),s=t?"mounted":"unmounted",[c,l]=function(t,e){return(0,r.useReducer)(((t,n)=>{const r=e[t][n];return null!=r?r:t}),t)}(s,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return(0,r.useEffect)((()=>{const t=Ss(o.current);a.current="mounted"===c?t:"none"}),[c]),Ke((()=>{const e=o.current,n=i.current;if(n!==t){const r=a.current,o=Ss(e);if(t)l("MOUNT");else if("none"===o||"none"===(null==e?void 0:e.display))l("UNMOUNT");else{l(n&&r!==o?"ANIMATION_OUT":"UNMOUNT")}i.current=t}}),[t,l]),Ke((()=>{if(e){const t=t=>{const n=Ss(o.current).includes(t.animationName);t.target===e&&n&&(0,Je.flushSync)((()=>l("ANIMATION_END")))},n=t=>{t.target===e&&(a.current=Ss(o.current))};return e.addEventListener("animationstart",n),e.addEventListener("animationcancel",t),e.addEventListener("animationend",t),()=>{e.removeEventListener("animationstart",n),e.removeEventListener("animationcancel",t),e.removeEventListener("animationend",t)}}l("ANIMATION_END")}),[e,l]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:(0,r.useCallback)((t=>{t&&(o.current=getComputedStyle(t)),n(t)}),[])}}(e),i="function"==typeof n?n({present:o.isPresent}):r.Children.only(n),a=Ue(o.ref,i.ref);return"function"==typeof n||o.isPresent?(0,r.cloneElement)(i,{ref:a}):null};function Ss(t){return(null==t?void 0:t.animationName)||"none"}Es.displayName="Presence";let xs=0;function Os(){(0,r.useEffect)((()=>{var t,e;const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",null!==(t=n[0])&&void 0!==t?t:Cs()),document.body.insertAdjacentElement("beforeend",null!==(e=n[1])&&void 0!==e?e:Cs()),xs++,()=>{1===xs&&document.querySelectorAll("[data-radix-focus-guard]").forEach((t=>t.remove())),xs--}}),[])}function Cs(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",t}var Ns="right-scroll-bar-position",Ms="width-before-scroll-bar";function As(t,e){return n=e||null,o=function(e){return t.forEach((function(t){return function(t,e){return"function"==typeof t?t(e):t&&(t.current=e),t}(t,e)}))},(i=(0,r.useState)((function(){return{value:n,callback:o,facade:{get current(){return i.value},set current(t){var e=i.value;e!==t&&(i.value=t,i.callback(t,e))}}}}))[0]).callback=o,i.facade;var n,o,i}function Ps(t){return t}function Ls(t,e){void 0===e&&(e=Ps);var n=[],r=!1;return{read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(t){var o=e(t,r);return n.push(o),function(){n=n.filter((function(t){return t!==o}))}},assignSyncMedium:function(t){for(r=!0;n.length;){var e=n;n=[],e.forEach(t)}n={push:function(e){return t(e)},filter:function(){return n}}},assignMedium:function(t){r=!0;var e=[];if(n.length){var o=n;n=[],o.forEach(t),e=n}var i=function(){var n=e;e=[],n.forEach(t)},a=function(){return Promise.resolve().then(i)};a(),n={push:function(t){e.push(t),a()},filter:function(t){return e=e.filter(t),n}}}}}var js=function(t){void 0===t&&(t={});var e=Ls(null);return e.options=bt({async:!0,ssr:!1},t),e}(),Rs=function(){},ks=r.forwardRef((function(t,e){var n=r.useRef(null),o=r.useState({onScrollCapture:Rs,onWheelCapture:Rs,onTouchMoveCapture:Rs}),i=o[0],a=o[1],s=t.forwardProps,c=t.children,l=t.className,u=t.removeScrollBar,d=t.enabled,f=t.shards,h=t.sideCar,m=t.noIsolation,p=t.inert,v=t.allowPinchZoom,g=t.as,y=void 0===g?"div":g,b=wt(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=h,E=As([n,e]),S=bt(bt({},b),i);return r.createElement(r.Fragment,null,d&&r.createElement(w,{sideCar:js,removeScrollBar:u,shards:f,noIsolation:m,inert:p,setCallbacks:a,allowPinchZoom:!!v,lockRef:n}),s?r.cloneElement(r.Children.only(c),bt(bt({},S),{ref:E})):r.createElement(y,bt({},S,{className:l,ref:E}),c))}));ks.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1},ks.classNames={fullWidth:Ms,zeroRight:Ns};var Ts,Ds=function(t){var e=t.sideCar,n=wt(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=e.read();if(!o)throw new Error("Sidecar medium not found");return r.createElement(o,bt({},n))};Ds.isSideCarExport=!0;function Is(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Ts||n.nc;return e&&t.setAttribute("nonce",e),t}var _s=function(){var t=0,e=null;return{add:function(n){var r,o;0==t&&(e=Is())&&(o=n,(r=e).styleSheet?r.styleSheet.cssText=o:r.appendChild(document.createTextNode(o)),function(t){(document.head||document.getElementsByTagName("head")[0]).appendChild(t)}(e)),t++},remove:function(){! --t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Ws=function(){var t,e=(t=_s(),function(e,n){r.useEffect((function(){return t.add(e),function(){t.remove()}}),[e&&n])});return function(t){var n=t.styles,r=t.dynamic;return e(n,r),null}},Zs={left:0,top:0,right:0,gap:0},zs=function(t){return parseInt(t||"",10)||0},Bs=function(t){if(void 0===t&&(t="margin"),"undefined"==typeof window)return Zs;var e=function(t){var e=window.getComputedStyle(document.body),n=e["padding"===t?"paddingLeft":"marginLeft"],r=e["padding"===t?"paddingTop":"marginTop"],o=e["padding"===t?"paddingRight":"marginRight"];return[zs(n),zs(r),zs(o)]}(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Hs=Ws(),Fs=function(t,e,n,r){var o=t.left,i=t.top,a=t.right,s=t.gap;return void 0===n&&(n="margin"),"\n  .".concat("with-scroll-bars-hidden"," {\n   overflow: hidden ").concat(r,";\n   padding-right: ").concat(s,"px ").concat(r,";\n  }\n  body {\n    overflow: hidden ").concat(r,";\n    overscroll-behavior: contain;\n    ").concat([e&&"position: relative ".concat(r,";"),"margin"===n&&"\n    padding-left: ".concat(o,"px;\n    padding-top: ").concat(i,"px;\n    padding-right: ").concat(a,"px;\n    margin-left:0;\n    margin-top:0;\n    margin-right: ").concat(s,"px ").concat(r,";\n    "),"padding"===n&&"padding-right: ".concat(s,"px ").concat(r,";")].filter(Boolean).join(""),"\n  }\n  \n  .").concat(Ns," {\n    right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(Ms," {\n    margin-right: ").concat(s,"px ").concat(r,";\n  }\n  \n  .").concat(Ns," .").concat(Ns," {\n    right: 0 ").concat(r,";\n  }\n  \n  .").concat(Ms," .").concat(Ms," {\n    margin-right: 0 ").concat(r,";\n  }\n  \n  body {\n    ").concat("--removed-body-scroll-bar-size",": ").concat(s,"px;\n  }\n")},Us=function(t){var e=t.noRelative,n=t.noImportant,o=t.gapMode,i=void 0===o?"margin":o,a=r.useMemo((function(){return Bs(i)}),[i]);return r.createElement(Hs,{styles:Fs(a,!e,i,n?"":"!important")})},Gs=!1;if("undefined"!=typeof window)try{var Vs=Object.defineProperty({},"passive",{get:function(){return Gs=!0,!0}});window.addEventListener("test",Vs,Vs),window.removeEventListener("test",Vs,Vs)}catch(t){Gs=!1}var Xs=!!Gs&&{passive:!1},Ys=function(t,e){var n=window.getComputedStyle(t);return"hidden"!==n[e]&&!(n.overflowY===n.overflowX&&!function(t){return"TEXTAREA"===t.tagName}(t)&&"visible"===n[e])},$s=function(t,e){var n=e;do{if("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot&&(n=n.host),qs(t,n)){var r=Ks(t,n);if(r[1]>r[2])return!0}n=n.parentNode}while(n&&n!==document.body);return!1},qs=function(t,e){return"v"===t?function(t){return Ys(t,"overflowY")}(e):function(t){return Ys(t,"overflowX")}(e)},Ks=function(t,e){return"v"===t?[(n=e).scrollTop,n.scrollHeight,n.clientHeight]:function(t){return[t.scrollLeft,t.scrollWidth,t.clientWidth]}(e);var n},Qs=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},Js=function(t){return[t.deltaX,t.deltaY]},tc=function(t){return t&&"current"in t?t.current:t},ec=function(t){return"\n  .block-interactivity-".concat(t," {pointer-events: none;}\n  .allow-interactivity-").concat(t," {pointer-events: all;}\n")},nc=0,rc=[];const oc=(ic=function(t){var e=r.useRef([]),n=r.useRef([0,0]),o=r.useRef(),i=r.useState(nc++)[0],a=r.useState((function(){return Ws()}))[0],s=r.useRef(t);r.useEffect((function(){s.current=t}),[t]),r.useEffect((function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(i));var e=Ct([t.lockRef.current],(t.shards||[]).map(tc),!0).filter(Boolean);return e.forEach((function(t){return t.classList.add("allow-interactivity-".concat(i))})),function(){document.body.classList.remove("block-interactivity-".concat(i)),e.forEach((function(t){return t.classList.remove("allow-interactivity-".concat(i))}))}}}),[t.inert,t.lockRef.current,t.shards]);var c=r.useCallback((function(t,e){if("touches"in t&&2===t.touches.length)return!s.current.allowPinchZoom;var r,i=Qs(t),a=n.current,c="deltaX"in t?t.deltaX:a[0]-i[0],l="deltaY"in t?t.deltaY:a[1]-i[1],u=t.target,d=Math.abs(c)>Math.abs(l)?"h":"v";if("touches"in t&&"h"===d&&"range"===u.type)return!1;var f=$s(d,u);if(!f)return!0;if(f?r=d:(r="v"===d?"h":"v",f=$s(d,u)),!f)return!1;if(!o.current&&"changedTouches"in t&&(c||l)&&(o.current=r),!r)return!0;var h=o.current||r;return function(t,e,n,r,o){var i=function(t,e){return"h"===t&&"rtl"===e?-1:1}(t,window.getComputedStyle(e).direction),a=i*r,s=n.target,c=e.contains(s),l=!1,u=a>0,d=0,f=0;do{var h=Ks(t,s),m=h[0],p=h[1]-h[2]-i*m;(m||p)&&qs(t,s)&&(d+=p,f+=m),s=s.parentNode}while(!c&&s!==document.body||c&&(e.contains(s)||e===s));return(u&&(o&&0===d||!o&&a>d)||!u&&(o&&0===f||!o&&-a>f))&&(l=!0),l}(h,e,t,"h"===h?c:l,!0)}),[]),l=r.useCallback((function(t){var n=t;if(rc.length&&rc[rc.length-1]===a){var r="deltaY"in n?Js(n):Qs(n),o=e.current.filter((function(t){return t.name===n.type&&t.target===n.target&&(e=t.delta,o=r,e[0]===o[0]&&e[1]===o[1]);var e,o}))[0];if(o&&o.should)n.cancelable&&n.preventDefault();else if(!o){var i=(s.current.shards||[]).map(tc).filter(Boolean).filter((function(t){return t.contains(n.target)}));(i.length>0?c(n,i[0]):!s.current.noIsolation)&&n.cancelable&&n.preventDefault()}}}),[]),u=r.useCallback((function(t,n,r,o){var i={name:t,delta:n,target:r,should:o};e.current.push(i),setTimeout((function(){e.current=e.current.filter((function(t){return t!==i}))}),1)}),[]),d=r.useCallback((function(t){n.current=Qs(t),o.current=void 0}),[]),f=r.useCallback((function(e){u(e.type,Js(e),e.target,c(e,t.lockRef.current))}),[]),h=r.useCallback((function(e){u(e.type,Qs(e),e.target,c(e,t.lockRef.current))}),[]);r.useEffect((function(){return rc.push(a),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Xs),document.addEventListener("touchmove",l,Xs),document.addEventListener("touchstart",d,Xs),function(){rc=rc.filter((function(t){return t!==a})),document.removeEventListener("wheel",l,Xs),document.removeEventListener("touchmove",l,Xs),document.removeEventListener("touchstart",d,Xs)}}),[]);var m=t.removeScrollBar,p=t.inert;return r.createElement(r.Fragment,null,p?r.createElement(a,{styles:ec(i)}):null,m?r.createElement(Us,{gapMode:"margin"}):null)},js.useMedium(ic),Ds);var ic,ac=r.forwardRef((function(t,e){return r.createElement(ks,bt({},t,{ref:e,sideCar:oc}))}));ac.classNames=ks.classNames;const sc=ac;var cc=function(t){return"undefined"==typeof document?null:(Array.isArray(t)?t[0]:t).ownerDocument.body},lc=new WeakMap,uc=new WeakMap,dc={},fc=0,hc=function(t){return t&&(t.host||hc(t.parentNode))},mc=function(t,e,n,r){var o=function(t,e){return e.map((function(e){if(t.contains(e))return e;var n=hc(e);return n&&t.contains(n)?n:(console.error("aria-hidden",e,"in not contained inside",t,". Doing nothing"),null)})).filter((function(t){return Boolean(t)}))}(e,Array.isArray(t)?t:[t]);dc[n]||(dc[n]=new WeakMap);var i=dc[n],a=[],s=new Set,c=new Set(o),l=function(t){t&&!s.has(t)&&(s.add(t),l(t.parentNode))};o.forEach(l);var u=function(t){t&&!c.has(t)&&Array.prototype.forEach.call(t.children,(function(t){if(s.has(t))u(t);else{var e=t.getAttribute(r),o=null!==e&&"false"!==e,c=(lc.get(t)||0)+1,l=(i.get(t)||0)+1;lc.set(t,c),i.set(t,l),a.push(t),1===c&&o&&uc.set(t,!0),1===l&&t.setAttribute(n,"true"),o||t.setAttribute(r,"true")}}))};return u(e),s.clear(),fc++,function(){a.forEach((function(t){var e=lc.get(t)-1,o=i.get(t)-1;lc.set(t,e),i.set(t,o),e||(uc.has(t)||t.removeAttribute(r),uc.delete(t)),o||t.removeAttribute(n)})),--fc||(lc=new WeakMap,lc=new WeakMap,uc=new WeakMap,dc={})}},pc=function(t,e,n){void 0===n&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),o=e||cc(t);return o?(r.push.apply(r,Array.from(o.querySelectorAll("[aria-live]"))),mc(r,o,n,"aria-hidden")):function(){return null}};const vc="Dialog",[gc,yc]=Ge(vc),[bc,wc]=gc(vc),Ec=t=>{const{__scopeDialog:e,children:n,open:o,defaultOpen:i,onOpenChange:a,modal:s=!0}=t,c=(0,r.useRef)(null),l=(0,r.useRef)(null),[u=!1,d]=Ye({prop:o,defaultProp:i,onChange:a});return(0,r.createElement)(bc,{scope:e,triggerRef:c,contentRef:l,contentId:es(),titleId:es(),descriptionId:es(),open:u,onOpenChange:d,onOpenToggle:(0,r.useCallback)((()=>d((t=>!t))),[d]),modal:s},n)},Sc="DialogTrigger",xc=(0,r.forwardRef)(((t,e)=>{const{__scopeDialog:n,...o}=t,i=wc(Sc,n),a=Ue(e,i.triggerRef);return(0,r.createElement)(an.button,pt({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":Hc(i.open)},o,{ref:a,onClick:He(t.onClick,i.onOpenToggle)}))})),Oc="DialogPortal",[Cc,Nc]=gc(Oc,{forceMount:void 0}),Mc=t=>{const{__scopeDialog:e,forceMount:n,children:o,container:i}=t,a=wc(Oc,e);return(0,r.createElement)(Cc,{scope:e,forceMount:n},r.Children.map(o,(t=>(0,r.createElement)(Es,{present:n||a.open},(0,r.createElement)(ws,{asChild:!0,container:i},t)))))},Ac="DialogOverlay",Pc=(0,r.forwardRef)(((t,e)=>{const n=Nc(Ac,t.__scopeDialog),{forceMount:o=n.forceMount,...i}=t,a=wc(Ac,t.__scopeDialog);return a.modal?(0,r.createElement)(Es,{present:o||a.open},(0,r.createElement)(Lc,pt({},i,{ref:e}))):null})),Lc=(0,r.forwardRef)(((t,e)=>{const{__scopeDialog:n,...o}=t,i=wc(Ac,n);return(0,r.createElement)(sc,{as:tn,allowPinchZoom:!0,shards:[i.contentRef]},(0,r.createElement)(an.div,pt({"data-state":Hc(i.open)},o,{ref:e,style:{pointerEvents:"auto",...o.style}})))})),jc="DialogContent",Rc=(0,r.forwardRef)(((t,e)=>{const n=Nc(jc,t.__scopeDialog),{forceMount:o=n.forceMount,...i}=t,a=wc(jc,t.__scopeDialog);return(0,r.createElement)(Es,{present:o||a.open},a.modal?(0,r.createElement)(kc,pt({},i,{ref:e})):(0,r.createElement)(Tc,pt({},i,{ref:e})))})),kc=(0,r.forwardRef)(((t,e)=>{const n=wc(jc,t.__scopeDialog),o=(0,r.useRef)(null),i=Ue(e,n.contentRef,o);return(0,r.useEffect)((()=>{const t=o.current;if(t)return pc(t)}),[]),(0,r.createElement)(Dc,pt({},t,{ref:i,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:He(t.onCloseAutoFocus,(t=>{var e;t.preventDefault(),null===(e=n.triggerRef.current)||void 0===e||e.focus()})),onPointerDownOutside:He(t.onPointerDownOutside,(t=>{const e=t.detail.originalEvent,n=0===e.button&&!0===e.ctrlKey;(2===e.button||n)&&t.preventDefault()})),onFocusOutside:He(t.onFocusOutside,(t=>t.preventDefault()))}))})),Tc=(0,r.forwardRef)(((t,e)=>{const n=wc(jc,t.__scopeDialog),o=(0,r.useRef)(!1),i=(0,r.useRef)(!1);return(0,r.createElement)(Dc,pt({},t,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:e=>{var r,a;(null===(r=t.onCloseAutoFocus)||void 0===r||r.call(t,e),e.defaultPrevented)||(o.current||null===(a=n.triggerRef.current)||void 0===a||a.focus(),e.preventDefault());o.current=!1,i.current=!1},onInteractOutside:e=>{var r,a;null===(r=t.onInteractOutside)||void 0===r||r.call(t,e),e.defaultPrevented||(o.current=!0,"pointerdown"===e.detail.originalEvent.type&&(i.current=!0));const s=e.target;(null===(a=n.triggerRef.current)||void 0===a?void 0:a.contains(s))&&e.preventDefault(),"focusin"===e.detail.originalEvent.type&&i.current&&e.preventDefault()}}))})),Dc=(0,r.forwardRef)(((t,e)=>{const{__scopeDialog:n,trapFocus:o,onOpenAutoFocus:i,onCloseAutoFocus:a,...s}=t,c=wc(jc,n),l=Ue(e,(0,r.useRef)(null));return Os(),(0,r.createElement)(r.Fragment,null,(0,r.createElement)(hs,{asChild:!0,loop:!0,trapped:o,onMountAutoFocus:i,onUnmountAutoFocus:a},(0,r.createElement)(ss,pt({role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Hc(c.open)},s,{ref:l,onDismiss:()=>c.onOpenChange(!1)}))),!1)})),Ic="DialogTitle",_c=(0,r.forwardRef)(((t,e)=>{const{__scopeDialog:n,...o}=t,i=wc(Ic,n);return(0,r.createElement)(an.h2,pt({id:i.titleId},o,{ref:e}))})),Wc="DialogDescription",Zc=(0,r.forwardRef)(((t,e)=>{const{__scopeDialog:n,...o}=t,i=wc(Wc,n);return(0,r.createElement)(an.p,pt({id:i.descriptionId},o,{ref:e}))})),zc="DialogClose",Bc=(0,r.forwardRef)(((t,e)=>{const{__scopeDialog:n,...o}=t,i=wc(zc,n);return(0,r.createElement)(an.button,pt({type:"button"},o,{ref:e,onClick:He(t.onClick,(()=>i.onOpenChange(!1)))}))}));function Hc(t){return t?"open":"closed"}const Fc="DialogTitleWarning",[Uc,Gc]=function(t,e){const n=(0,r.createContext)(e);function o(t){const{children:e,...o}=t,i=(0,r.useMemo)((()=>o),Object.values(o));return(0,r.createElement)(n.Provider,{value:i},e)}return o.displayName=t+"Provider",[o,function(o){const i=(0,r.useContext)(n);if(i)return i;if(void 0!==e)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}]}(Fc,{contentName:jc,titleName:Ic,docsSlug:"dialog"}),Vc=Ec,Xc=xc,Yc=Mc,$c=Pc,qc=Rc,Kc=_c,Qc=Zc,Jc=Bc,tl="AlertDialog",[el,nl]=Ge(tl,[yc]),rl=yc(),ol=t=>{const{__scopeAlertDialog:e,...n}=t,o=rl(e);return(0,r.createElement)(Vc,pt({},o,n,{modal:!0}))},il=(0,r.forwardRef)(((t,e)=>{const{__scopeAlertDialog:n,...o}=t,i=rl(n);return(0,r.createElement)(Xc,pt({},i,o,{ref:e}))})),al=t=>{const{__scopeAlertDialog:e,...n}=t,o=rl(e);return(0,r.createElement)(Yc,pt({},o,n))},sl=(0,r.forwardRef)(((t,e)=>{const{__scopeAlertDialog:n,...o}=t,i=rl(n);return(0,r.createElement)($c,pt({},i,o,{ref:e}))})),cl="AlertDialogContent",[ll,ul]=el(cl),dl=(0,r.forwardRef)(((t,e)=>{const{__scopeAlertDialog:n,children:o,...i}=t,a=rl(n),s=Ue(e,(0,r.useRef)(null)),c=(0,r.useRef)(null);return(0,r.createElement)(Uc,{contentName:cl,titleName:fl,docsSlug:"alert-dialog"},(0,r.createElement)(ll,{scope:n,cancelRef:c},(0,r.createElement)(qc,pt({role:"alertdialog"},a,i,{ref:s,onOpenAutoFocus:He(i.onOpenAutoFocus,(t=>{var e;t.preventDefault(),null===(e=c.current)||void 0===e||e.focus({preventScroll:!0})})),onPointerDownOutside:t=>t.preventDefault(),onInteractOutside:t=>t.preventDefault()}),(0,r.createElement)(nn,null,o),!1)))})),fl="AlertDialogTitle",hl=(0,r.forwardRef)(((t,e)=>{const{__scopeAlertDialog:n,...o}=t,i=rl(n);return(0,r.createElement)(Kc,pt({},i,o,{ref:e}))})),ml=(0,r.forwardRef)(((t,e)=>{const{__scopeAlertDialog:n,...o}=t,i=rl(n);return(0,r.createElement)(Qc,pt({},i,o,{ref:e}))})),pl=(0,r.forwardRef)(((t,e)=>{const{__scopeAlertDialog:n,...o}=t,i=rl(n);return(0,r.createElement)(Jc,pt({},i,o,{ref:e}))})),vl="AlertDialogCancel",gl=(0,r.forwardRef)(((t,e)=>{const{__scopeAlertDialog:n,...o}=t,{cancelRef:i}=ul(vl,n),a=rl(n),s=Ue(e,i);return(0,r.createElement)(Jc,pt({},a,o,{ref:s}))})),yl=ol,bl=il,wl=al,El=sl,Sl=dl,xl=pl,Ol=gl,Cl=hl,Nl=ml;function Ml(t){return Ml="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ml(t)}function Al(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Pl(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Al(Object(n),!0).forEach((function(e){Ll(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Al(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ll(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==Ml(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Ml(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Ml(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jl(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return Rl(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rl(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rl(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const kl=function(t){var e=jl((0,r.useContext)(a.b),2),n=(e[0],e[1]),o=jl((0,r.useState)("Test"),2),i=o[0],s=o[1],c=jl((0,r.useState)("Description here"),2),l=c[0],u=c[1],d=jl((0,r.useState)("Submit"),2),f=d[0],h=d[1],m=jl((0,r.useState)("Cancel"),2),p=m[0],v=m[1],g=jl((0,r.useState)((function(){})),2),y=g[0],b=g[1],w=jl((0,r.useState)((function(){})),2),E=w[0],S=w[1],x=jl((0,r.useState)(!1),2),O=x[0],C=x[1],N=jl((0,r.useState)(null),2),M=N[0],A=N[1],P=jl((0,r.useState)(null),2),L=P[0],j=P[1],R=jl((0,r.useState)((function(){})),2),k=R[0],T=R[1],D=jl((0,r.useState)(!1),2),I=D[0],_=D[1],W=jl((0,r.useState)(!1),2),Z=W[0],z=W[1],B=jl((0,r.useState)((function(){})),2),H=B[0],F=B[1],U=(0,r.useCallback)((function(t,e,n,r,o,i){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,d=arguments.length>9&&void 0!==arguments[9]&&arguments[9],f=arguments.length>10&&void 0!==arguments[10]&&arguments[10],m=arguments.length>11&&void 0!==arguments[11]?arguments[11]:function(){};s(t),u(e),h(n),v(r),C(!0),b((function(){return o})),S((function(){return i})),A(a),j(c),T((function(){return l})),_(d),z(f),F((function(){return m}))}));return(0,r.useEffect)((function(){return n((function(t){return Pl(Pl({},t),{},{openModal:U})})),function(){n((function(t){return Pl(Pl({},t),{},{openModal:null})}))}}),[]),r.createElement(yl,{open:O,onOpenChange:function(t){C(t)}},r.createElement(bl,{asChild:!0}),r.createElement(wl,null,r.createElement(El,{className:"AlertDialogOverlay"}),r.createElement(Sl,{className:"AlertDialogContent"},r.createElement(Cl,{className:"AlertDialogTitle"},i),r.createElement(Nl,{className:"AlertDialogDescription"},l,L&&" ",L&&r.createElement("a",{href:"#",onClick:function(t){t.preventDefault(),t.stopPropagation(),k()},target:"_blank"},L)),M&&r.createElement("img",{src:M,style:{width:"100%",marginBottom:15,marginTop:5,borderRadius:"15px"}}),r.createElement("div",{style:{display:"flex",gap:12,justifyContent:"flex-end"}},Z&&r.createElement("button",{className:"SideButtonModal",onClick:function(){H(),C(!1)}},Z),p&&r.createElement(Ol,{asChild:!0},r.createElement("button",{className:"Button grey",onClick:function(){return E()}},p)),f&&r.createElement(xl,{asChild:!0},r.createElement("button",{className:I?"Button blue":"Button red",onClick:function(){return y()}},f))))))};function Tl(t){return Tl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tl(t)}function Dl(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Il(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Dl(Object(n),!0).forEach((function(e){_l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dl(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _l(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==Tl(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==Tl(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Tl(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wl(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,s=[],c=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){l=!0,o=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return s}}(t,e)||Zl(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zl(t,e){if(t){if("string"==typeof t)return zl(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zl(t,e):void 0}}function zl(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}const Bl=function(){var t=Wl((0,r.useContext)(a.b),2),e=t[0],n=t[1],o=(0,r.useRef)(null),i=(0,r.useRef)("");return(0,r.useEffect)((function(){var t,r=!!(t=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./))&&parseInt(t[2],10);r&&r>110?e.loadFFmpeg():n((function(t){return Il(Il({},t),{},{updateChrome:!0,ffmpeg:!0})}))}),[]),(0,r.useEffect)((function(){e.blob&&e.ffmpeg&&(e.frame||e.getFrame())}),[e.blob,e.ffmpeg]),(0,r.useEffect)((function(){if(o&&(o.current&&!(navigator.platform.toUpperCase().indexOf("MAC")>=0))){var t=o.current;t.querySelectorAll("*").forEach((function(t){t.classList.add("screenity-scrollbar")}));var e=new MutationObserver((function(t){var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Zl(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}(t);try{for(n.s();!(e=n.n()).done;){var r=e.value;if("childList"===r.type){var o=Array.from(r.addedNodes),i=Array.from(r.removedNodes);o.forEach((function(t){t.nodeType===Node.ELEMENT_NODE&&t.classList.add("screenity-scrollbar")})),i.forEach((function(t){t.nodeType===Node.ELEMENT_NODE&&t.classList.remove("screenity-scrollbar")}))}}}catch(t){n.e(t)}finally{n.f()}}));return e.observe(t,{childList:!0,subtree:!0}),function(){e.disconnect()}}}),[o.current]),(0,r.useEffect)((function(){e.chunkCount>0&&(i.current="(".concat(Math.round(e.chunkIndex/e.chunkCount*100),"%)"))}),[e.chunkIndex,e.chunkCount]),r.createElement("div",{ref:o},r.createElement(kl,null),r.createElement("video",null),e.ffmpeg&&e.ready&&"edit"===e.mode&&r.createElement(ae,null),"edit"!=e.mode&&e.ready&&r.createElement(Qa,null),!e.ready&&r.createElement("div",{className:"wrap"},r.createElement("img",{className:"logo",src:"/assets/logo-text.svg"}),r.createElement("div",{className:"middle-area"},r.createElement("img",{src:"/assets/record-tab-active.svg"}),r.createElement("div",{className:"title"},chrome.i18n.getMessage("sandboxProgressTitle")+" "+i.current),r.createElement("div",{className:"subtitle"},chrome.i18n.getMessage("sandboxProgressDescription"))),r.createElement("div",{className:"setupBackgroundSVG"})),r.createElement("style",null,'\n\t\t\t\t\n\t\t\t\t.wrap {\n\t\t\t\t\toverflow: hidden;\n\t\t\t\t}\n\t\t\t\t.setupBackgroundSVG {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 0px;\n\t\t\t\t\tleft: 0px;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tbackground: url(/assets/helper/pattern-svg.svg) repeat;\n\t\t\t\t\tbackground-size: 62px 23.5px;\n\t\t\t\t\tanimation: moveBackground 138s linear infinite;\n\t\t\t\t}\n\t\t\t\t.button-stop {\n\t\t\t\t\tpadding: 10px 20px;\n\t\t\t\t\tbackground: #FFF;\n\t\t\t\t\tborder-radius: 30px;\n\t\t\t\t\tcolor: #29292F;\n\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\tfont-weight: 500;\n\t\t\t\t\tcursor: pointer;\n\t\t\t\t\tmargin-top: 0px;\n\t\t\t\t\tborder: 1px solid #E8E8E8;\n\t\t\t\t\tmargin-left: auto;\n\t\t\t\t\tmargin-right: auto;\n\t\t\t\t\tz-index: 999999;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t@keyframes moveBackground {\n\t\t\t\t\t0% {\n\t\t\t\t\t\tbackground-position: 0 0;\n\t\t\t\t\t}\n\t\t\t\t\t100% {\n\t\t\t\t\t\tbackground-position: 100% 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t.logo {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\tbottom: 30px;\n\t\t\t\t\tleft: 0px;\n\t\t\t\t\tright: 0px;\n\t\t\t\t\tmargin: auto;\n\t\t\t\t\twidth: 120px;\n\t\t\t\t}\n\t\t\t\t.wrap {\n\t\t\t\t\tposition: absolute;\n\t\t\t\t\ttop: 0;\n\t\t\t\t\tleft: 0;\n\t\t\t\t\twidth: 100%;\n\t\t\t\t\theight: 100%;\n\t\t\t\t\tbackground-color: #F6F7FB;\n\t\t\t\t}\n\t\t\t\t\t.middle-area {\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\tflex-direction: column;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\theight: 100%;\n\t\t\t\t\t\tfont-family: Satoshi Medium, sans-serif;\n\t\t\t\t\t}\n\t\t\t\t\t.middle-area img {\n\t\t\t\t\t\twidth: 40px;\n\t\t\t\t\t\tmargin-bottom: 20px;\n\t\t\t\t\t}\n\t\t\t\t\t.title {\n\t\t\t\t\t\tfont-size: 24px;\n\t\t\t\t\t\tfont-weight: 700;\n\t\t\t\t\t\tcolor: #1A1A1A;\n\t\t\t\t\t\tmargin-bottom: 14px;\n\t\t\t\t\t\tfont-family: Satoshi-Medium, sans-serif;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t}\n\t\t\t\t\t.subtitle {\n\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t\tfont-weight: 400;\n\t\t\t\t\t\tcolor: #6E7684;\n\t\t\t\t\t\tmargin-bottom: 24px;\n\t\t\t\t\t\tfont-family: Satoshi-Medium, sans-serif;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t}\n\n\n.screenity-scrollbar *::-webkit-scrollbar, .screenity-scrollbar::-webkit-scrollbar {\n  background-color: rgba(0,0,0,0);\n  width: 16px;\n  height: 16px;\n  z-index: 999999;\n}\n.screenity-scrollbar *::-webkit-scrollbar-track, .screenity-scrollbar::-webkit-scrollbar-track {\n  background-color: rgba(0,0,0,0);\n}\n.screenity-scrollbar *::-webkit-scrollbar-thumb, .screenity-scrollbar::-webkit-scrollbar-thumb {\n  background-color: rgba(0,0,0,0);\n  border-radius:16px;\n  border:0px solid #fff;\n}\n.screenity-scrollbar *::-webkit-scrollbar-button, .screenity-scrollbar::-webkit-scrollbar-button {\n  display:none;\n}\n.screenity-scrollbar *:hover::-webkit-scrollbar-thumb, .screenity-scrollbar:hover::-webkit-scrollbar-thumb {\n  background-color: #a0a0a5;\n  border:4px solid #fff;\n}\n::-webkit-scrollbar-thumb *:hover, ::-webkit-scrollbar-thumb:hover {\n    background-color:#a0a0a5;\n    border:4px solid #f4f4f4\n}\n.videoBanner {\n\theight: 40px!important;\n\twidth: 100%!important;\n\tposition: absolute!important;\n\ttop: 0px!important;\n\tleft: 0px!important;\n\tbackground-color: #3080F8!important;\n\tcolor: #FFF!important;\n\tfont-family: "Satoshi-Medium"!important;\n\tz-index: 99999999999!important;\n\ttext-align: center!important;\n\tdisplay: flex!important;\n\talign-items: center!important;\n\tjustify-content: center!important;\n\tflex-direction: row!important;\n\tgap: 6px!important;\n}\n\t\t\t\t\t\n\t\t\t\t\t'))}}},(function(t){t.h=()=>"05322a59081137ba72c8"}));